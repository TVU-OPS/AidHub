[{"name":"/page/Chi tiet thien tai","nodes":[{"id":"71a19330-e570-12c6-7452-fe8ab1c96253","type":"Page","parameters":{},"ports":[],"children":[{"id":"dff933f2-6544-173d-8ffa-43c5f663bc74","type":"Group","parameters":{"scrollEnabled":false,"rowGap":{"value":8,"unit":"px"},"height":{"value":100,"unit":"vh","isFixed":false},"flexDirection":"row"},"ports":[],"children":[{"id":"51345ce3-73e8-173b-4456-0d3d66f1d3f8","type":"Group","parameters":{"width":{"value":500,"unit":"px"},"backgroundColor":"transparent","sizeMode":"explicit","paddingTop":{"value":12,"unit":"px"},"paddingBottom":{"value":12,"unit":"px"},"paddingRight":{"value":12,"unit":"px"},"paddingLeft":{"value":12,"unit":"px"},"height":{"value":100,"unit":"vh"},"scrollEnabled":true},"ports":[],"children":[{"id":"1dfff217-9ce9-20c2-b99a-a010cb746c98","type":"Group","parameters":{"sizeMode":"contentSize","flexDirection":"row","alignItems":"center","columnGap":{"value":8,"unit":"px"},"paddingBottom":{"value":12,"unit":"px"}},"ports":[],"children":[{"id":"b451b429-c938-461d-94e5-6ed00f2ad367","type":"net.noodl.controls.button","parameters":{"boxShadowEnabled":false,"useLabel":false,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"arrow_back_ios_new","codeAsClass":false},"sizeMode":"contentSize","paddingTop":{"value":8,"unit":"px"},"paddingBottom":{"value":8,"unit":"px"},"paddingLeft":{"value":8,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"minWidth":{"value":0,"unit":"px"},"borderRadius":{"value":50,"unit":"%"},"alignY":"center","alignX":"center","iconSize":{"value":20,"unit":"px"}},"ports":[],"children":[]},{"id":"f63f9a2c-54e6-6ccf-3544-fd4ef14bb4c8","type":"Text","parameters":{"text":"Chi tiết thiên tai","fontSize":{"value":18,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf"},"ports":[],"children":[]}]},{"id":"aff85d49-ff5e-339f-8700-8cc5d811d13a","type":"Group","parameters":{},"ports":[],"children":[{"id":"67bdc570-4aa3-3156-ab49-774b13f2d754","type":"Group","parameters":{"backgroundColor":"Grey - 200","paddingTop":{"value":12,"unit":"px"},"paddingRight":{"value":12,"unit":"px"},"paddingBottom":{"value":12,"unit":"px"},"paddingLeft":{"value":12,"unit":"px"},"borderRadius":{"value":12,"unit":"px"},"sizeMode":"contentHeight","marginBottom":{"value":20,"unit":"px"}},"ports":[],"children":[{"id":"0d9ff8ef-34ce-a0be-5527-8f7f60d53822","type":"Text","parameters":{"text":"....","sizeMode":"contentSize","fontSize":{"value":20,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf"},"ports":[],"children":[]},{"id":"3c3aeb17-8944-e53d-86e5-f1ade30b3713","type":"Group","parameters":{"minWidth":{"value":50,"unit":"px"},"minHeight":{"value":50,"unit":"px"},"alignItems":"flex-start","justifyContent":"center","sizeMode":"contentHeight","flexDirection":"column","columnGap":{"value":8,"unit":"px"},"rowGap":{"value":8,"unit":"px"},"width":{"value":200,"unit":"px"}},"ports":[],"children":[{"id":"daf6b8c5-4080-bd23-82fd-d50d2d560193","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":8,"unit":"px"},"justifyContent":"flex-start","paddingTop":{"value":4,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"paddingLeft":{"value":8,"unit":"px"},"sizeMode":"contentSize","backgroundColor":"ECFCCB","borderRadius":{"value":8,"unit":"px"},"borderStyle":"solid","borderWidth":{"value":0.4,"unit":"px"},"borderColor":"Success","alignItems":"center"},"ports":[],"children":[{"id":"5872baba-9f17-be3e-a4e4-2ec51b8b0e80","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"cleaning_services","codeAsClass":false},"iconColor":"Success"},"ports":[],"children":[]},{"id":"2d95f872-894b-87d8-6ec3-8f46ba9b6f93","type":"Text","variant":"active","parameters":{"fontSize":{"value":14,"unit":"px"},"text":"Kết thúc"},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]}]},{"id":"bb0dffdb-a253-d3c3-0383-0dd79f5fff42","type":"Group","parameters":{"sizeMode":"contentSize","flexDirection":"row","columnGap":{"value":8,"unit":"px"},"justifyContent":"flex-start","paddingTop":{"value":4,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"paddingLeft":{"value":8,"unit":"px"},"borderRadius":{"value":8,"unit":"px"},"backgroundColor":"FEF8C3","borderStyle":"solid","borderWidth":{"value":0.2,"unit":"px"},"borderColor":"Notice","visible":true,"alignItems":"center"},"ports":[],"children":[{"id":"8f647143-d2bd-f955-4e53-d13a69f0e83f","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"circle","codeAsClass":false},"iconColor":"A06109"},"ports":[],"children":[]},{"id":"993240b1-9de7-142a-2c7d-cc8d86396212","type":"Text","variant":"active","parameters":{"text":"Sắp diễn ra","color":"A06109","fontSize":{"value":14,"unit":"px"}},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]}]},{"id":"435246d7-2f9b-d928-ae49-29b26225c829","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":8,"unit":"px"},"justifyContent":"flex-start","paddingTop":{"value":4,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"paddingLeft":{"value":8,"unit":"px"},"sizeMode":"contentSize","backgroundColor":"FBECEC","borderRadius":{"value":8,"unit":"px"},"borderStyle":"solid","borderWidth":{"value":0.4,"unit":"px"},"borderColor":"Danger","alignY":"center","alignItems":"center"},"ports":[],"children":[{"id":"3d8fe7e5-7ec4-8a11-017c-7c4c83d37637","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"warning","codeAsClass":false},"iconColor":"Danger"},"ports":[],"children":[]},{"id":"604d860b-b25f-ffac-abb6-59c9bb9c2ddd","type":"Text","variant":"active","parameters":{"fontSize":{"value":14,"unit":"px"},"text":"Đang diễn ra","color":"Danger"},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]}]}]},{"id":"a7dacbf1-119f-be42-498b-a4dff86f2b75","type":"Group","parameters":{"flexDirection":"column","columnGap":{"value":8,"unit":"px"},"sizeMode":"contentHeight","alignX":"left"},"ports":[],"children":[{"id":"b0b53c13-bd02-443f-53e0-36b33be5105b","type":"Text","parameters":{"text":"Số yêu cầu:","sizeMode":"contentSize","color":"Grey - 600","fontSize":{"value":16,"unit":"px"}},"ports":[],"children":[]},{"id":"b1184a8e-4818-3d2e-7c9b-2ebf5fed1661","type":"Text","parameters":{"text":"....","sizeMode":"contentSize","fontSize":{"value":20,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf"},"ports":[],"children":[]}]},{"id":"f18ede1e-e107-1867-6bc2-aa5d51fab01a","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentHeight","marginBottom":{"value":12,"unit":"px"}},"ports":[],"children":[{"id":"e48af75e-4561-ff5f-5994-3e8b5a867363","type":"Group","parameters":{"flexDirection":"column","columnGap":{"value":8,"unit":"px"},"sizeMode":"contentHeight","alignX":"left"},"ports":[],"children":[{"id":"59254d3f-f43d-6070-503c-43271cffb860","type":"Text","parameters":{"text":"Loại thiên tai:","sizeMode":"contentSize","color":"Grey - 600","fontSize":{"value":16,"unit":"px"}},"ports":[],"children":[]},{"id":"1846767a-4fa1-21e3-1541-17c5cb2f3e6e","type":"Text","parameters":{"text":"....","sizeMode":"contentSize","fontSize":{"value":16,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf"},"ports":[],"children":[]}]}]},{"id":"68cc1fb2-3183-34ea-eb4a-3c258e3f386a","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentHeight","marginBottom":{"value":12,"unit":"px"}},"ports":[],"children":[{"id":"b14e47a8-559d-8739-6ac1-4640d61a3ae0","type":"Group","parameters":{"flexDirection":"column","columnGap":{"value":8,"unit":"px"},"sizeMode":"contentHeight","alignX":"left"},"ports":[],"children":[{"id":"d2f50cd0-ef21-6cfa-3ede-4923a245a07f","type":"Text","parameters":{"text":"Bắt đầu:","sizeMode":"contentSize","color":"Grey - 600","fontSize":{"value":16,"unit":"px"}},"ports":[],"children":[]},{"id":"233a53af-0247-9d36-716a-f9447088ffad","type":"Text","parameters":{"text":"....","sizeMode":"contentSize","fontSize":{"value":18,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf"},"ports":[],"children":[]}]},{"id":"f4ac7c25-9699-3e37-51e3-2eb6b17f7340","type":"Group","parameters":{"flexDirection":"column","columnGap":{"value":8,"unit":"px"},"sizeMode":"contentHeight","alignX":"left"},"ports":[],"children":[{"id":"08bd80bb-f59f-df03-1b82-0a544ba7ecab","type":"Text","parameters":{"text":"Kết thúc","sizeMode":"contentSize","color":"Grey - 600","fontSize":{"value":16,"unit":"px"}},"ports":[],"children":[]},{"id":"428b1d78-7db8-de1d-4c5a-27bc992e160f","type":"Text","parameters":{"text":"....","sizeMode":"contentSize","fontSize":{"value":18,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf","styleCss":"/* background-color: red; */\r\n\r\noverflow: hidden;\r\ntext-overflow: ellipsis;\r\ndisplay: -webkit-box;\r\n-webkit-line-clamp: 3;\r\n-webkit-box-orient: vertical;\r\nword-break: break-word;"},"ports":[],"children":[]}]}]},{"id":"d5ae092a-335f-ff6c-19b8-80ee8419d754","type":"Group","parameters":{"flexDirection":"column","sizeMode":"contentHeight","marginBottom":{"value":12,"unit":"px"}},"ports":[],"children":[{"id":"ff87d3b8-94f0-8e9d-8dba-87da5c1a71a6","type":"Text","parameters":{"text":"Địa điểm","sizeMode":"contentSize","color":"Grey - 600","fontSize":{"value":18,"unit":"px"}},"ports":[],"children":[]},{"id":"03f68a93-9728-21aa-8c36-0267ee629e19","type":"Text","parameters":{"text":"....","sizeMode":"contentHeight","fontSize":{"value":16,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Regular.ttf"},"ports":[],"children":[]}]}]},{"id":"8a99f19c-9a27-da37-a00b-ab43d077b3ce","type":"Group","parameters":{"backgroundColor":"Grey - 200","paddingTop":{"value":12,"unit":"px"},"paddingRight":{"value":12,"unit":"px"},"paddingBottom":{"value":12,"unit":"px"},"paddingLeft":{"value":12,"unit":"px"},"borderRadius":{"value":12,"unit":"px"},"sizeMode":"contentHeight","marginBottom":{"value":20,"unit":"px"}},"ports":[],"children":[{"id":"9c5d61c0-8fa6-ddb7-c0a4-748e121d1bd4","type":"Text","parameters":{"text":"Mô tả","fontSize":{"value":18,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf","marginBottom":{"value":8,"unit":"px"}},"ports":[],"children":[]},{"id":"5f1b52c7-29e6-4a0c-8712-b321f669df60","type":"Text","parameters":{"text":"....","sizeMode":"contentHeight","fontSize":{"value":16,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Regular.ttf"},"ports":[],"children":[]}]}]}]},{"id":"187c9de3-6589-dabf-a109-c44aafa9febd","type":"Group","parameters":{"backgroundColor":"transparent","position":"relative","sizeMode":"explicit","borderLeftStyle":"solid","borderLeftWidth":{"value":1,"unit":"px"},"borderLeftColor":"Border","paddingTop":{"value":8,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"paddingLeft":{"value":8,"unit":"px"},"paddingBottom":{"value":8,"unit":"px"}},"ports":[],"children":[{"id":"9d458f69-014c-06f4-4181-b3f711882daa","type":"/component/MapboxYeuCau","parameters":{},"ports":[],"children":[]}]}]}]},{"id":"b6bc9dac-0859-4009-4c7e-a87fd4927232","type":"/#Logic/UpdateViTriYeuCau","parameters":{},"ports":[],"children":[]},{"id":"64c9a62c-b11a-2fce-1bb8-e0cdd9271b63","type":"/#Logic/GetChiTietThienTai","parameters":{},"ports":[],"children":[]},{"id":"9aae1f9e-685c-65e5-66c7-991bf96edb24","type":"JavaScriptFunction","parameters":{"functionScript":"const data = Inputs.data\r\n\r\nif (!data) return\r\n\r\nOutputs.id = data.id\r\nOutputs.documentId = data.documentId\r\nOutputs.Name = data.Name\r\nOutputs.Description = data.Description;\r\nOutputs.PeopleCount = data.PeopleCount;\r\nOutputs.StartDate = data.StartDate;\r\nOutputs.EndDate = data.EndDate;\r\nOutputs.createdAt = data.createdAt;\r\nOutputs.DisasterType = data.DisasterType;\r\nOutputs.Provinces = data.Provinces;"},"ports":[{"name":"in-data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-id","displayName":"id","plug":"output","type":"*","group":"Outputs","index":5},{"name":"out-documentId","displayName":"documentId","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-Name","displayName":"Name","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-Description","displayName":"Description","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-PeopleCount","displayName":"PeopleCount","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-StartDate","displayName":"StartDate","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-EndDate","displayName":"EndDate","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-createdAt","displayName":"createdAt","plug":"output","type":"*","group":"Outputs","index":12},{"name":"out-DisasterType","displayName":"DisasterType","plug":"output","type":"*","group":"Outputs","index":13},{"name":"out-Provinces","displayName":"Provinces","plug":"output","type":"*","group":"Outputs","index":14}],"children":[]},{"id":"fdc136fb-c4c3-d204-88a4-03ed3968515e","type":"Expression","parameters":{"expression":"DisasterType.DisasterTypeName"},"ports":[],"children":[]},{"id":"83714bc8-19cc-c969-3469-b71f872809ca","type":"/#Logic/Format date","parameters":{},"ports":[],"children":[]},{"id":"26c3d698-b0b2-8819-e5bb-f6f9b0c0c52c","type":"/#Logic/Format date","parameters":{},"ports":[],"children":[]},{"id":"7d5aa913-40be-6f17-f892-cd0610b7b6ac","type":"JavaScriptFunction","parameters":{"functionScript":"const currentDate = new Date(); // Lấy thời gian hiện tại\r\nconst startDate = new Date(Inputs.StartDate); // Chuyển StartDate thành đối tượng Date\r\nconst endDate = Inputs.EndDate ? new Date(Inputs.EndDate) : null; // Chuyển EndDate thành đối tượng Date\r\n\r\nfunction checkDateStatus(startDate, endDate, currentDate) {\r\n    if (currentDate < startDate) {\r\n        Outputs.SAP =  true;\r\n        // Outputs.Results = 'Sắp diễn ra';\r\n        return\r\n    } else if (endDate === null || currentDate <= endDate) {\r\n        Outputs.DANG =  true;\r\n        // Outputs.Results = 'Đang diễn ra';\r\n        return\r\n    } else {\r\n        Outputs.KETTHUC =  true;\r\n        // Outputs.Results = 'Đã kết thúc';\r\n        return\r\n    }\r\n}\r\n\r\ncheckDateStatus(startDate, endDate, currentDate)"},"ports":[{"name":"in-StartDate","displayName":"StartDate","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-EndDate","displayName":"EndDate","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-SAP","displayName":"SAP","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-Results","displayName":"Results","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-DANG","displayName":"DANG","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-KETTHUC","displayName":"KETTHUC","plug":"output","type":"*","group":"Outputs","index":9}],"children":[]},{"id":"102b2b79-17d2-5e6a-6f56-2db3d7ed5a82","type":"States","parameters":{"states":"ket thuc,sap,dang","currentState":"ket thuc"},"ports":[],"children":[]},{"id":"7e0177b1-de23-0dab-dce0-9ee7f1d036eb","type":"JavaScriptFunction","parameters":{"functionScript":"const Provinces = Inputs.Provinces\r\n\r\nif (Provinces?.length == 0) {\r\n    Outputs.Provinces = \"Không có\"\r\n    return\r\n}\r\n\r\nOutputs.Provinces = Provinces?.map(province => province.FullName).join(', ');"},"ports":[{"name":"in-Provinces","displayName":"Provinces","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Provinces","displayName":"Provinces","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"99400e95-bd45-4586-7bda-fa79e0543bdb","type":"/#Logic/GetAllYeuCau","parameters":{},"ports":[],"children":[]},{"id":"57f559e8-ff33-d169-9ae0-0a139c132c5a","type":"RouterNavigate","parameters":{"router":"Main","target":"/page/thien tai"},"ports":[],"children":[]},{"id":"def432b8-83ed-f53c-e74f-55cf295809f3","type":"PageInputs","parameters":{"pathParams":"id"},"ports":[],"children":[]}],"connections":[{"sourceId":"64c9a62c-b11a-2fce-1bb8-e0cdd9271b63","sourcePort":"data","targetId":"9aae1f9e-685c-65e5-66c7-991bf96edb24","targetPort":"in-data"},{"sourceId":"9aae1f9e-685c-65e5-66c7-991bf96edb24","sourcePort":"out-DisasterType","targetId":"fdc136fb-c4c3-d204-88a4-03ed3968515e","targetPort":"DisasterType"},{"sourceId":"9aae1f9e-685c-65e5-66c7-991bf96edb24","sourcePort":"out-StartDate","targetId":"83714bc8-19cc-c969-3469-b71f872809ca","targetPort":"date"},{"sourceId":"9aae1f9e-685c-65e5-66c7-991bf96edb24","sourcePort":"out-EndDate","targetId":"26c3d698-b0b2-8819-e5bb-f6f9b0c0c52c","targetPort":"date"},{"sourceId":"7d5aa913-40be-6f17-f892-cd0610b7b6ac","sourcePort":"out-SAP","targetId":"102b2b79-17d2-5e6a-6f56-2db3d7ed5a82","targetPort":"to-sap"},{"sourceId":"7d5aa913-40be-6f17-f892-cd0610b7b6ac","sourcePort":"out-DANG","targetId":"102b2b79-17d2-5e6a-6f56-2db3d7ed5a82","targetPort":"to-dang"},{"sourceId":"7d5aa913-40be-6f17-f892-cd0610b7b6ac","sourcePort":"out-KETTHUC","targetId":"102b2b79-17d2-5e6a-6f56-2db3d7ed5a82","targetPort":"to-ket thuc"},{"sourceId":"9aae1f9e-685c-65e5-66c7-991bf96edb24","sourcePort":"out-StartDate","targetId":"7d5aa913-40be-6f17-f892-cd0610b7b6ac","targetPort":"in-StartDate"},{"sourceId":"9aae1f9e-685c-65e5-66c7-991bf96edb24","sourcePort":"out-EndDate","targetId":"7d5aa913-40be-6f17-f892-cd0610b7b6ac","targetPort":"in-EndDate"},{"sourceId":"9aae1f9e-685c-65e5-66c7-991bf96edb24","sourcePort":"out-Provinces","targetId":"7e0177b1-de23-0dab-dce0-9ee7f1d036eb","targetPort":"in-Provinces"},{"sourceId":"102b2b79-17d2-5e6a-6f56-2db3d7ed5a82","sourcePort":"at-ket thuc","targetId":"daf6b8c5-4080-bd23-82fd-d50d2d560193","targetPort":"mounted"},{"sourceId":"102b2b79-17d2-5e6a-6f56-2db3d7ed5a82","sourcePort":"at-sap","targetId":"bb0dffdb-a253-d3c3-0383-0dd79f5fff42","targetPort":"mounted"},{"sourceId":"102b2b79-17d2-5e6a-6f56-2db3d7ed5a82","sourcePort":"at-dang","targetId":"435246d7-2f9b-d928-ae49-29b26225c829","targetPort":"mounted"},{"sourceId":"9aae1f9e-685c-65e5-66c7-991bf96edb24","sourcePort":"out-Name","targetId":"0d9ff8ef-34ce-a0be-5527-8f7f60d53822","targetPort":"text"},{"sourceId":"fdc136fb-c4c3-d204-88a4-03ed3968515e","sourcePort":"result","targetId":"1846767a-4fa1-21e3-1541-17c5cb2f3e6e","targetPort":"text"},{"sourceId":"83714bc8-19cc-c969-3469-b71f872809ca","sourcePort":"date","targetId":"233a53af-0247-9d36-716a-f9447088ffad","targetPort":"text"},{"sourceId":"26c3d698-b0b2-8819-e5bb-f6f9b0c0c52c","sourcePort":"date","targetId":"428b1d78-7db8-de1d-4c5a-27bc992e160f","targetPort":"text"},{"sourceId":"7e0177b1-de23-0dab-dce0-9ee7f1d036eb","sourcePort":"out-Provinces","targetId":"03f68a93-9728-21aa-8c36-0267ee629e19","targetPort":"text"},{"sourceId":"9aae1f9e-685c-65e5-66c7-991bf96edb24","sourcePort":"out-Description","targetId":"5f1b52c7-29e6-4a0c-8712-b321f669df60","targetPort":"text"},{"sourceId":"9aae1f9e-685c-65e5-66c7-991bf96edb24","sourcePort":"out-id","targetId":"99400e95-bd45-4586-7bda-fa79e0543bdb","targetPort":"DisasterId"},{"sourceId":"99400e95-bd45-4586-7bda-fa79e0543bdb","sourcePort":"total","targetId":"b1184a8e-4818-3d2e-7c9b-2ebf5fed1661","targetPort":"text"},{"sourceId":"9aae1f9e-685c-65e5-66c7-991bf96edb24","sourcePort":"out-id","targetId":"99400e95-bd45-4586-7bda-fa79e0543bdb","targetPort":"Do"},{"sourceId":"b451b429-c938-461d-94e5-6ed00f2ad367","sourcePort":"onClick","targetId":"57f559e8-ff33-d169-9ae0-0a139c132c5a","targetPort":"navigate"},{"sourceId":"71a19330-e570-12c6-7452-fe8ab1c96253","sourcePort":"didMount","targetId":"b6bc9dac-0859-4009-4c7e-a87fd4927232","targetPort":"Do"},{"sourceId":"def432b8-83ed-f53c-e74f-55cf295809f3","sourcePort":"pm-id","targetId":"b6bc9dac-0859-4009-4c7e-a87fd4927232","targetPort":"idThienTai"},{"sourceId":"def432b8-83ed-f53c-e74f-55cf295809f3","sourcePort":"pm-id","targetId":"64c9a62c-b11a-2fce-1bb8-e0cdd9271b63","targetPort":"id"},{"sourceId":"71a19330-e570-12c6-7452-fe8ab1c96253","sourcePort":"didMount","targetId":"64c9a62c-b11a-2fce-1bb8-e0cdd9271b63","targetPort":"Do"},{"sourceId":"b6bc9dac-0859-4009-4c7e-a87fd4927232","sourcePort":"Success","targetId":"9d458f69-014c-06f4-4181-b3f711882daa","targetPort":"Mounted"}],"ports":[],"roots":["71a19330-e570-12c6-7452-fe8ab1c96253"]},{"name":"/#Logic/UpdateViTriYeuCau","nodes":[{"id":"31602c0b-e2ad-5357-1a88-0b22119c25aa","type":"JavaScriptFunction","parameters":{"functionScript":"const data = Inputs.data;\r\nconst yeucau = Inputs.yeucau\r\n\r\nfunction extractProvinces(data) {\r\n  return data?.Provinces?.map(province => ({\r\n    name: province.FullName,\r\n    location: {\r\n      lat: parseFloat(province.Latitude) || 0,\r\n      lng: parseFloat(province.Longitude) || 0,\r\n    },\r\n  }))\r\n}\r\n\r\nif (data) {\r\n  const provinces = extractProvinces(data);\r\n\r\n  Outputs.idThienTai = data.id\r\n\r\n  const oldProvinces = JSON.parse(localStorage.getItem(\"provinces\")) || [];\r\n\r\n  if (JSON.stringify(provinces) === JSON.stringify(oldProvinces)) {\r\n    Outputs.Success = true;\r\n    return;\r\n  } else {\r\n    if (provinces !== undefined) {\r\n      localStorage.setItem(\"provinces\", JSON.stringify(provinces));\r\n      Outputs.Success = true;\r\n      return;\r\n    }\r\n  }\r\n}"},"ports":[{"name":"in-data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-yeucau","displayName":"yeucau","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-idThienTai","displayName":"idThienTai","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"7aa0b85b-bf3c-be4b-f6cf-adc15eec033e","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"1764540a-728f-7947-cbaf-28d46291ad88","type":"/#Logic/GetChiTietThienTai","parameters":{},"ports":[],"children":[]},{"id":"01a8342a-2ba1-2cc0-a1c3-ea8d22c9ae94","type":"/#Logic/GetAllYeuCau","parameters":{},"ports":[],"children":[]},{"id":"8fd506a7-22ee-78f6-06d8-dcd5b18ddbe8","type":"JavaScriptFunction","parameters":{"functionScript":"const data = Inputs.data;\r\n\r\nfunction extractLocations(data) {\r\n  return data\r\n    .filter((item) => item.Location?.lat && item.Location?.lng)\r\n    .map((item) => ({\r\n      description: item.FullName,\r\n      phone: item.PhoneNumber,\r\n      lat: item.Location.lat ? parseFloat(item.Location.lat) : 0,\r\n      lng: item.Location.lat ? parseFloat(item.Location.lng) : 0,\r\n    }));\r\n}\r\n\r\nif (data) {\r\n  const locations = extractLocations(data);\r\n\r\n  const oldLocations = JSON.parse(localStorage.getItem(\"locations\")) || [];\r\n\r\n  if (JSON.stringify(locations) === JSON.stringify(oldLocations)) {\r\n    Outputs.Success = true;\r\n    return;\r\n  } else {\r\n    if (locations !== undefined) {\r\n      localStorage.setItem(\"locations\", JSON.stringify(locations));\r\n      Outputs.Success = true;\r\n      return;\r\n    }\r\n  }\r\n}\r\n"},"ports":[{"name":"in-data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"c99d5fb9-4278-10f3-0893-774c70cf5893","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"885a0e25-221c-b8b2-dfd9-f219d9eabfee","type":"And","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"7aa0b85b-bf3c-be4b-f6cf-adc15eec033e","sourcePort":"idThienTai","targetId":"1764540a-728f-7947-cbaf-28d46291ad88","targetPort":"id"},{"sourceId":"7aa0b85b-bf3c-be4b-f6cf-adc15eec033e","sourcePort":"Do","targetId":"1764540a-728f-7947-cbaf-28d46291ad88","targetPort":"Do"},{"sourceId":"1764540a-728f-7947-cbaf-28d46291ad88","sourcePort":"data","targetId":"31602c0b-e2ad-5357-1a88-0b22119c25aa","targetPort":"in-data"},{"sourceId":"31602c0b-e2ad-5357-1a88-0b22119c25aa","sourcePort":"out-idThienTai","targetId":"01a8342a-2ba1-2cc0-a1c3-ea8d22c9ae94","targetPort":"DisasterId"},{"sourceId":"31602c0b-e2ad-5357-1a88-0b22119c25aa","sourcePort":"out-idThienTai","targetId":"01a8342a-2ba1-2cc0-a1c3-ea8d22c9ae94","targetPort":"Do"},{"sourceId":"01a8342a-2ba1-2cc0-a1c3-ea8d22c9ae94","sourcePort":"Data","targetId":"8fd506a7-22ee-78f6-06d8-dcd5b18ddbe8","targetPort":"in-data"},{"sourceId":"01a8342a-2ba1-2cc0-a1c3-ea8d22c9ae94","sourcePort":"Data","targetId":"8fd506a7-22ee-78f6-06d8-dcd5b18ddbe8","targetPort":"run"},{"sourceId":"31602c0b-e2ad-5357-1a88-0b22119c25aa","sourcePort":"out-Success","targetId":"885a0e25-221c-b8b2-dfd9-f219d9eabfee","targetPort":"input 0"},{"sourceId":"8fd506a7-22ee-78f6-06d8-dcd5b18ddbe8","sourcePort":"out-Success","targetId":"885a0e25-221c-b8b2-dfd9-f219d9eabfee","targetPort":"input 1"},{"sourceId":"885a0e25-221c-b8b2-dfd9-f219d9eabfee","sourcePort":"result","targetId":"c99d5fb9-4278-10f3-0893-774c70cf5893","targetPort":"Success"}],"ports":[{"name":"Success","type":"boolean","plug":"output","index":1},{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":1},{"name":"idThienTai","type":{"name":"*","editAsType":"string"},"group":"Parameters","plug":"input","index":2}],"roots":[]}]