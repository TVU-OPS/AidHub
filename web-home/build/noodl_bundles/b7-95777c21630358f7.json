[{"name":"/Page/home","nodes":[{"id":"975881a3-e3d2-ba31-755a-6c63b54fe66d","type":"Page","parameters":{"title":"Trang chủ","urlPath":"/home"},"ports":[],"children":[{"id":"2d9603b0-acac-a347-4245-0b99f0c626c3","type":"Group","parameters":{"flexDirection":"row"},"ports":[],"children":[{"id":"b0a25cd1-3f1d-902d-d922-0b0c4bb9df2e","type":"Group","parameters":{"width":{"value":56,"unit":"px"}},"ports":[],"children":[{"id":"515214bd-a79c-3758-a16f-bce03a187a52","type":"Group","parameters":{"borderRightStyle":"solid","backgroundColor":"Grey - 200","borderRightWidth":{"value":1,"unit":"px"},"borderRightColor":"Grey - 400","clip":true,"position":"absolute","alignX":"left","zIndex":2,"marginRight":{"value":0,"unit":"px"},"marginLeft":{"value":0,"unit":"px"},"styleCss":"width: 100%;\r\nheight: calc(100vh - 80px);","sizeMode":"contentHeight","width":{"value":56,"unit":"px"}},"ports":[],"children":[{"id":"6fb097eb-7022-2079-0b76-2eea00191d9a","type":"Group","parameters":{"height":{"value":56,"unit":"px"},"borderBottomStyle":"solid","borderBottomColor":"Grey - 400","justifyContent":"space-between","paddingLeft":{"value":8,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"alignItems":"center","borderBottomWidth":{"value":1,"unit":"px"},"flexDirection":"row"},"ports":[],"children":[{"id":"a07c3165-465c-7b6e-3382-1432bde121f5","type":"net.noodl.controls.button","parameters":{"useIcon":true,"paddingLeft":{"value":8,"unit":"px"},"backgroundColor":"transparent","iconColor":"Grey - 700","color":"Grey - 700","iconSize":{"value":24,"unit":"px"},"textStyle":"Body Medium","fontFamily":"fonts/Roboto/Roboto-Regular.ttf","label":"Bộ lọc","iconSpacing":{"value":8,"unit":"px"},"useLabel":true,"iconSourceType":"icon","iconIconSource":{"class":"material-icons","code":"filter_list","codeAsClass":false}},"ports":[],"children":[]},{"id":"47a89711-f7c1-c387-11c9-29e198a8fe45","type":"net.noodl.controls.button","parameters":{"useIcon":true,"iconColor":"Grey - 700","position":"relative","paddingTop":{"value":0,"unit":"px"},"paddingBottom":{"value":0,"unit":"px"},"paddingRight":{"value":0,"unit":"px"},"paddingLeft":{"value":0,"unit":"px"},"sizeMode":"explicit","marginTop":{"value":0,"unit":"px"},"iconSize":{"value":24,"unit":"px"},"useLabel":false,"enabled":true,"width":{"value":36,"unit":"px"},"height":{"value":36,"unit":"px"},"iconSpacing":{"value":0,"unit":"px"},"marginLeft":{"value":0,"unit":"px"},"marginRight":{"value":0,"unit":"px"},"marginBottom":{"value":0,"unit":"px"},"minWidth":{"value":0,"unit":"px"},"iconIconSource":{"class":"material-icons","code":"menu"},"backgroundColor":"transparent"},"stateParameters":{"hover":{"iconColor":"Grey - 900"}},"ports":[],"children":[]},{"id":"620e4b03-a743-69e9-60c6-2ef67c2c9212","type":"net.noodl.controls.button","parameters":{"useIcon":true,"iconColor":"Grey - 700","backgroundColor":"transparent","position":"relative","paddingTop":{"value":0,"unit":"px"},"paddingBottom":{"value":0,"unit":"px"},"paddingRight":{"value":0,"unit":"px"},"paddingLeft":{"value":0,"unit":"px"},"sizeMode":"explicit","marginTop":{"value":0,"unit":"px"},"iconSize":{"value":24,"unit":"px"},"useLabel":false,"enabled":true,"width":{"value":36,"unit":"px"},"height":{"value":36,"unit":"px"},"iconSpacing":{"value":0,"unit":"px"},"marginLeft":{"value":0,"unit":"px"},"marginRight":{"value":0,"unit":"px"},"marginBottom":{"value":0,"unit":"px"},"minWidth":{"value":0,"unit":"px"},"iconIconSource":{"class":"material-icons","code":"close"}},"stateParameters":{"hover":{"iconColor":"Grey - 900"}},"ports":[],"children":[]}]},{"id":"63530ecc-b937-9260-2688-d581d9ff8f39","type":"/Page/home/GuestFilter","parameters":{"Visible":false,"Mounted":false},"ports":[],"children":[]},{"id":"33f9a71c-fc32-073c-1a17-22ca7f5f3cd4","type":"/Page/home/OrganizationFilter","parameters":{"Visible":false},"ports":[],"children":[]}]}]},{"id":"002756af-2464-dece-57dc-da33382cebc8","type":"Group","parameters":{},"ports":[],"children":[{"id":"b01aac4a-cf65-3f72-b47f-d51085538ee2","type":"/Page/home/CurrentDisaster","parameters":{},"ports":[],"children":[]},{"id":"5bf9bd33-6c21-7f47-492d-485a46273e94","type":"Group","parameters":{"backgroundColor":"Grey - 200","mounted":false,"sizeMode":"contentHeight","styleCss":"/* background-color: red; */\r\nwidth: 100%;\r\nheight: calc(100vh - 80px);"},"ports":[],"children":[{"id":"54c60dab-1aa9-5c95-14c7-eccab56695e9","type":"Text","parameters":{"textAlignX":"center","sizeMode":"explicit","textAlignY":"center","text":"Đang tải...","textStyle":"Title Small","color":"Grey - 700"},"ports":[],"children":[]}]},{"id":"e1d4db28-bb13-1bf5-3a6d-b6109eccffc9","type":"module.inlineHtml","parameters":{"html":"<div id=\"map\" style=\"width: 100%; height: 100%; border-radius: 4px\"></div>\r\n<script>\r\n  //NOTE: Tính tọa độ giữa tỉnh (các tỉnh đang bị thiên tai)\r\n  function calculateCenter(points) {\r\n    if (!points || points.length === 0) {\r\n      return null;\r\n    }\r\n\r\n    let totalX = 0,\r\n      totalY = 0;\r\n\r\n    points.forEach((point) => {\r\n      totalX += point.lng;\r\n      totalY += point.lat;\r\n    });\r\n\r\n    const centerX = totalX / points.length;\r\n    const centerY = totalY / points.length;\r\n\r\n    return { lng: centerX, lat: centerY };\r\n  }\r\n\r\n  //NOTE: Tính mức zoom\r\n  function calculateZoom(points) {\r\n    let maxDistance = 0;\r\n    points.forEach((point1) => {\r\n      points.forEach((point2) => {\r\n        const distance = Math.sqrt(\r\n          Math.pow(point1.lat - point2.lat, 2) + Math.pow(point1.lng - point2.lng, 2)\r\n        );\r\n        if (distance > maxDistance) maxDistance = distance;\r\n      });\r\n    });\r\n\r\n    // Quy đổi khoảng cách thành mức zoom\r\n    // Bạn có thể điều chỉnh giá trị này dựa trên kích thước bản đồ\r\n    if (maxDistance > 1) return 5; // Zoom out xa hơn nếu khoảng cách lớn\r\n    if (maxDistance > 0.5) return 8; // Trung bình\r\n    return 10; // Zoom gần\r\n  }\r\n\r\n  //NOTE: Hàm chuẩn hóa chuỗi\r\n  function normalizeString(str) {\r\n    return str\r\n      .replace(/Tỉnh/g, \"\")\r\n      .replace(/Thành phố/g, \"\")\r\n      .trim(); // Xóa khoảng trắng đầu và cuối chuỗi\r\n  }\r\n\r\n  function updatePosition(position) {\r\n    const { latitude, longitude } = position.coords;\r\n    marker.setLngLat([longitude, latitude]);\r\n    map.setCenter([longitude, latitude]);\r\n  }\r\n\r\n  function createMapbox() {\r\n    mapboxgl.accessToken =\r\n      \"pk.eyJ1IjoiZGhpZXAyMzA3IiwiYSI6ImNtNDRpeDFtejBuNzkycHB6bXp6eWZ1MTQifQ.169cDiC_Q2YWzRBdIxxgPg\";\r\n\r\n    const provinces = localStorage.getItem(\"provinces\")\r\n      ? JSON.parse(localStorage.getItem(\"provinces\"))\r\n      : [];\r\n\r\n    const locations = localStorage.getItem(\"locations\")\r\n      ? JSON.parse(localStorage.getItem(\"locations\"))\r\n      : [];\r\n\r\n    const provinceNames = provinces?.map((province) => normalizeString(province.name));\r\n\r\n    let center = {\r\n      lng: 108,\r\n      lat: 14,\r\n    };\r\n\r\n    if (provinces.length > 0) {\r\n      const posList = provinces.map((province) => province.location);\r\n      center = calculateCenter(posList);\r\n    }\r\n\r\n    map = new mapboxgl.Map({\r\n      style: \"mapbox://styles/dhiep2307/cm44mghvy011l01sd5cci6k20\", // stylesheet location\r\n      container: \"map\",\r\n      center: [center.lng, center.lat],\r\n      zoom: 8,\r\n    });\r\n\r\n    //========NOTE: Tạo map\r\n    marker = new mapboxgl.Marker();\r\n\r\n    function updatePosition(position) {\r\n      const { latitude, longitude } = position.coords;\r\n      marker.setLngLat([longitude, latitude]);\r\n    }\r\n\r\n    map.on(\"load\", function () {\r\n      if (!navigator.geolocation) {\r\n        console.log(\"Lỗi lấy vị trí\", error);\r\n      } else {\r\n        navigator.geolocation.getCurrentPosition(async (position) => {\r\n          const { latitude, longitude } = position.coords;\r\n\r\n          marker.setLngLat([longitude, latitude]).addTo(map);\r\n\r\n          const popup = new mapboxgl.Popup({\r\n            offset: 25,\r\n            closeOnClick: true,\r\n            closeButton: true,\r\n          }).setHTML(`\r\n              <h3 style=\"font-size: 18px; font-weight: bold; color: #333; margin: 0 0 10px 0;\">Vị trí của bạn</h3>\r\n          `);\r\n\r\n          marker.setPopup(popup);\r\n          \r\n          map.setCenter([longitude, latitude]);\r\n\r\n          navigator.geolocation.watchPosition(\r\n            updatePosition, //Cập nhật lại vị trí, khi vị trí thay đổi\r\n            (error) => {\r\n              console.error(\"Lỗi lấy vị trí:\", error);\r\n            },\r\n            {\r\n              enableHighAccuracy: true, // Sử dụng GPS chính xác\r\n              maximumAge: 300,\r\n            }\r\n          );\r\n        });\r\n      }\r\n\r\n      //========NOTE: Thêm marker cho SOS Request\r\n      if (locations.length > 0) {\r\n        locations.map((location) => {\r\n          const marker2 = new mapboxgl.Marker({ color: \"red\" })\r\n            .setLngLat([location.lng, location.lat]) // Vị trí\r\n            .addTo(map);\r\n\r\n          const popup = new mapboxgl.Popup({\r\n            offset: 25,\r\n            closeOnClick: true,\r\n            closeButton: true,\r\n          }).setHTML(`\r\n              <h3 style=\"font-size: 18px; font-weight: bold; color: #333; margin: 0 0 10px 0;\">${location?.description}</h3>\r\n              <a style=\"\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n                gap: 5px;\r\n                font-size: 14px;\r\n                text-decoration: none;\r\n                padding: 8px 12px;\r\n                border-radius: 6px;\r\n                background: linear-gradient(to right, #2ecc71, #27ae60);\r\n                color: white;\r\n                font-weight: 700;\r\n                transition: all 0.3s ease;\r\n                box-shadow: 0 2px 4px rgba(46,204,113,0.2);\r\n              \" href=\"tel://${location?.phone}\">\r\n                <svg style=\"width: 16px; height: 16px;\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\r\n                  <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z\"/>\r\n                </svg>\r\n                ${location?.phone}\r\n              </a>\r\n          `);\r\n\r\n          marker2.setPopup(popup);\r\n        });\r\n      }\r\n\r\n      //========NOTE: Thêm các layer\r\n\r\n      map.addSource(\"diaphanhuyen-4apinm\", {\r\n        type: \"vector\",\r\n        url: \"mapbox://dhiep2307.0va1jnhw\",\r\n      });\r\n\r\n      // Thêm layer tỉnh\r\n      if (provinces.length > 0) {\r\n        map.addLayer({\r\n          id: \"loc-tinh\",\r\n          type: \"fill\",\r\n          source: \"diaphanhuyen-4apinm\",\r\n          \"source-layer\": \"diaphanhuyen-4apinm\",\r\n          layout: {},\r\n          paint: {\r\n            \"fill-color\": \"#ff6666\",\r\n            \"fill-opacity\": 0.2,\r\n          },\r\n          filter: [\"in\", \"Ten_Tinh\", ...provinceNames],\r\n        });\r\n\r\n        provinces.forEach((e) => {\r\n          map.addLayer({\r\n            id: \"text-layer-tinh-\" + e.name,\r\n            type: \"symbol\",\r\n            source: {\r\n              type: \"geojson\",\r\n              data: {\r\n                type: \"FeatureCollection\",\r\n                features: [\r\n                  {\r\n                    type: \"Feature\",\r\n                    geometry: {\r\n                      type: \"Point\",\r\n                      coordinates: [e.location.lng, e.location.lat],\r\n                    },\r\n                    properties: {\r\n                      title: `${e.name}`, // Văn bản sẽ hiển thị\r\n                    },\r\n                  },\r\n                ],\r\n              },\r\n            },\r\n            layout: {\r\n              \"text-field\": [\"get\", \"title\"], // Lấy giá trị từ thuộc tính 'title' để hiển thị\r\n              \"text-size\": [\r\n                \"interpolate\", // Biểu thức interpolate giúp thay đổi kích thước theo zoom\r\n                [\"linear\"], // Mức độ thay đổi là tuyến tính\r\n                [\"zoom\"], // Sử dụng zoom level để điều chỉnh\r\n                5,\r\n                9, // Zoom level 5: 10px (kích thước chữ nhỏ)\r\n                15,\r\n                30, // Zoom level 15: 30px (kích thước chữ lớn)\r\n              ], // Kích thước chữ\r\n              \"text-anchor\": \"center\", // Căn chỉnh chữ theo giữa điểm\r\n              \"text-offset\": [0, 0], // Định vị trí chữ (tùy chọn)\r\n            },\r\n            paint: {\r\n              \"text-color\": \"#186bf0\", // Màu chữ\r\n              \"text-halo-color\": \"#FFFFFF\", // Màu viền chữ\r\n              \"text-halo-width\": 2, // Độ rộng viền chữ\r\n            },\r\n          });\r\n        });\r\n      }\r\n\r\n      //Thêm các chức năng zoom, xoay bản đồ\r\n      map.addControl(new mapboxgl.NavigationControl());\r\n      map.addControl(new mapboxgl.FullscreenControl());\r\n\r\n      //Thêm layer Hoàng sa, Trường sa, Biển đông\r\n      map.addLayer({\r\n        id: \"text-layer-truong-sa\",\r\n        type: \"symbol\",\r\n        source: {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [\r\n              {\r\n                type: \"Feature\",\r\n                geometry: {\r\n                  type: \"Point\",\r\n                  coordinates: [113.81768, 9.46653],\r\n                },\r\n                properties: {\r\n                  title: \"Quần đảo Trường Sa (Việt Nam)\",\r\n                },\r\n              },\r\n            ],\r\n          },\r\n        },\r\n        layout: {\r\n          \"text-field\": [\"get\", \"title\"], // Lấy giá trị từ thuộc tính 'title' để hiển thị\r\n          \"text-size\": [\r\n            \"interpolate\", // Biểu thức interpolate giúp thay đổi kích thước theo zoom\r\n            [\"linear\"], // Mức độ thay đổi là tuyến tính\r\n            [\"zoom\"], // Sử dụng zoom level để điều chỉnh\r\n            5,\r\n            9, // Zoom level 5: 10px (kích thước chữ nhỏ)\r\n            15,\r\n            30, // Zoom level 15: 30px (kích thước chữ lớn)\r\n          ], // Kích thước chữ\r\n          \"text-anchor\": \"center\", // Căn chỉnh chữ theo giữa điểm\r\n          \"text-offset\": [0, 0], // Định vị trí chữ (tùy chọn)\r\n        },\r\n        paint: {\r\n          \"text-color\": \"#186bf0\", // Màu chữ\r\n          \"text-halo-color\": \"#FFFFFF\", // Màu viền chữ\r\n          \"text-halo-width\": 2, // Độ rộng viền chữ\r\n        },\r\n      });\r\n\r\n      map.addLayer({\r\n        id: \"text-layer-hoang-sa\",\r\n        type: \"symbol\",\r\n        source: {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [\r\n              {\r\n                type: \"Feature\",\r\n                geometry: {\r\n                  type: \"Point\",\r\n                  coordinates: [111.90739, 16.50884],\r\n                },\r\n                properties: {\r\n                  title: \"Quần đảo Hoàng Sa (Việt Nam)\", // Văn bản sẽ hiển thị\r\n                },\r\n              },\r\n            ],\r\n          },\r\n        },\r\n        layout: {\r\n          \"text-field\": [\"get\", \"title\"], // Lấy giá trị từ thuộc tính 'title' để hiển thị\r\n          \"text-size\": [\r\n            \"interpolate\", // Biểu thức interpolate giúp thay đổi kích thước theo zoom\r\n            [\"linear\"], // Mức độ thay đổi là tuyến tính\r\n            [\"zoom\"], // Sử dụng zoom level để điều chỉnh\r\n            5,\r\n            9, // Zoom level 5: 10px (kích thước chữ nhỏ)\r\n            15,\r\n            30, // Zoom level 15: 30px (kích thước chữ lớn)\r\n          ], // Kích thước chữ\r\n          \"text-anchor\": \"center\", // Căn chỉnh chữ theo giữa điểm\r\n          \"text-offset\": [0, 0], // Định vị trí chữ (tùy chọn)\r\n        },\r\n        paint: {\r\n          \"text-color\": \"#186bf0\", // Màu chữ\r\n          \"text-halo-color\": \"#FFFFFF\", // Màu viền chữ\r\n          \"text-halo-width\": 2, // Độ rộng viền chữ\r\n        },\r\n      });\r\n\r\n      map.addLayer({\r\n        id: \"text-layer-bien-dong\",\r\n        type: \"symbol\",\r\n        source: {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [\r\n              {\r\n                type: \"Feature\",\r\n                geometry: {\r\n                  type: \"Point\",\r\n                  coordinates: [113.23996, 13.84156],\r\n                },\r\n                properties: {\r\n                  title: \"Biển Đông\", // Văn bản sẽ hiển thị\r\n                },\r\n              },\r\n            ],\r\n          },\r\n        },\r\n        layout: {\r\n          \"text-field\": [\"get\", \"title\"], // Lấy giá trị từ thuộc tính 'title' để hiển thị\r\n          \"text-size\": [\r\n            \"interpolate\", // Biểu thức interpolate giúp thay đổi kích thước theo zoom\r\n            [\"linear\"], // Mức độ thay đổi là tuyến tính\r\n            [\"zoom\"], // Sử dụng zoom level để điều chỉnh\r\n            14,\r\n            16, // Zoom level 5: 10px (kích thước chữ nhỏ)\r\n            18,\r\n            30, // Zoom level 15: 30px (kích thước chữ lớn)\r\n          ], // Kích thước chữ\r\n          \"text-anchor\": \"center\", // Căn chỉnh chữ theo giữa điểm\r\n          \"text-offset\": [0, 0], // Định vị trí chữ (tùy chọn)\r\n        },\r\n        paint: {\r\n          \"text-color\": \"#186bf0\", // Màu chữ\r\n          \"text-halo-color\": \"#FFFFFF\", // Màu viền chữ\r\n          \"text-halo-width\": 2, // Độ rộng viền chữ\r\n        },\r\n      });\r\n    });\r\n  }\r\n\r\n  createMapbox();\r\n</script>\r\n","runJs":true,"styleCss":"width: 100%;\r\nheight: calc(100vh - 80px);","mounted":false},"ports":[],"children":[]}]}]},{"id":"94708485-8f4f-dbbd-e134-e57d11f48be8","type":"net.noodl.controls.button","parameters":{"position":"absolute","zIndex":1,"label":"YÊU CẦU HỖ TRỢ","backgroundColor":"#EF4444","fontFamily":"fonts/Roboto/Roboto-Bold.ttf","boxShadowEnabled":false,"alignX":"center","alignY":"bottom","useIcon":true,"iconIconSource":{"class":"material-icons","code":"warning","codeAsClass":false},"iconSize":{"value":32,"unit":"px"},"sizeMode":"contentWidth","fontSize":{"value":18,"unit":"px"},"borderRadius":{"value":8,"unit":"px"},"height":{"value":80,"unit":"px"},"width":{"value":100,"unit":"%","isFixed":true},"minWidth":{"value":300,"unit":"px"},"marginBottom":{"value":32,"unit":"px"},"cssClassName":"map"},"stateParameters":{"hover":{"backgroundColor":"#F21313"}},"ports":[],"children":[]}]},{"id":"7c9a05ab-acf7-1557-0363-5c85d620fb41","type":"CSS Definition","parameters":{"style":".noFilter {\r\n    width: 100%;\r\n    height: calc(100vh - 80px);\r\n}\r\n\r\n.withFilter {\r\n    width: 100%;\r\n    height: calc(100vh - 180px);\r\n}"},"ports":[],"children":[]},{"id":"826e1bf2-e5cc-7a11-91c7-430bfba6b50b","type":"/#Logic/CurrentOrganization","parameters":{},"ports":[],"children":[]},{"id":"353a3b9f-a3e2-57a8-04ba-cdd3285a8bd7","type":"/#Logic/GetLocation","parameters":{},"ports":[],"children":[]},{"id":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","type":"States","parameters":{"states":"Open,Closed","currentState":"Closed","values":"Width,Opacity","value-Open-Width":300,"value-Closed-Width":56,"transitiondef-Open":{"curve":[0,0,0.58,1],"dur":300,"delay":0},"type-icon":"string","value-Open-icon":"close","value-Closed-icon":"menu","value-Open-Opacity":1,"value-Closed-Opacity":0},"ports":[],"children":[]},{"id":"82f14e8e-f22e-942a-318e-737bc5be33ee","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"b54f0b70-9f33-b423-eba0-9addd3eaecf4","type":"Switch","parameters":{},"ports":[],"children":[]},{"id":"9fdeaf28-f1ad-3ea6-04ea-a2ffedfe4c8f","type":"/#Logic/GetDisasters","parameters":{},"ports":[],"children":[]},{"id":"8f707ac1-bb88-c749-e8f3-d6e84e2cbc71","type":"Number","parameters":{"value":2},"ports":[],"children":[]},{"id":"d19b1e5e-a82a-1dfd-e78c-758fb6d1d752","type":"JavaScriptFunction","parameters":{"functionScript":"const url = window.location.href;\r\nconst urlParams = new URLSearchParams(window.location.search);\r\nconst disasterId = urlParams.get('disasterId');\r\nconst provinceId = urlParams.get('provinceId');\r\nconst districtId = urlParams.get('districtId');\r\nconst wardId = urlParams.get('wardId');\r\n\r\nif (disasterId) {\r\n    Outputs.DisasterId = disasterId;\r\n    Outputs.Done();\r\n    return;\r\n}\r\n\r\nif(provinceId) {\r\n    Outputs.ProvinceId = provinceId;\r\n    Outputs.Done();\r\n    return;\r\n}\r\n\r\nif(districtId) {\r\n    Outputs.DistrictId = districtId;\r\n    Outputs.Done();\r\n    return;\r\n}\r\n\r\nif(wardId) {\r\n    Outputs.WardId = wardId;\r\n    Outputs.Done();\r\n    return;\r\n}\r\n\r\nOutputs.Done();"},"ports":[{"name":"out-Done","displayName":"Done","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-DisasterId","displayName":"DisasterId","plug":"output","type":"*","group":"Outputs","index":5},{"name":"out-ProvinceId","displayName":"ProvinceId","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-DistrictId","displayName":"DistrictId","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-WardId","displayName":"WardId","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"c494d0c9-1135-7067-a3f2-022fe7d197f4","type":"PageInputs","parameters":{"queryParams":"disasterId,provinceId,districtId,wardId"},"ports":[],"children":[]},{"id":"8a932089-7204-3100-0010-6bc170650522","type":"/#Logic/GetRequests","parameters":{},"ports":[],"children":[]},{"id":"baf41f49-6cba-5ae4-14b8-e073b978e3de","type":"Condition","parameters":{"condition":false},"ports":[],"children":[]},{"id":"174f3032-2fe4-1ca0-6011-a7487b667160","type":"NavigationShowPopup","parameters":{"target":"/Components/Popup/Request Modal"},"ports":[],"children":[]},{"id":"01a9022f-c00d-b290-730b-28f9b7891be7","type":"JavaScriptFunction","parameters":{"functionScript":"localStorage.removeItem(\"provinces\");\r\n\r\nconst Data = Inputs.Data;\r\n\r\nfunction extractProvincesFromObject(data) {\r\n  return data?.Provinces?.map((province) => ({\r\n    name: province.FullName,\r\n    location: {\r\n      lat: parseFloat(province.Latitude) || 0,\r\n      lng: parseFloat(province.Longitude) || 0,\r\n    },\r\n  }));\r\n}\r\n\r\nfunction extractProvincesFromArray(data) {\r\n  const seen = new Set();\r\n  return data\r\n    .flatMap((item) =>\r\n      item.Provinces.map((province) => ({\r\n        name: province.FullName,\r\n        location: {\r\n          lat: parseFloat(province.Latitude) || 0,\r\n          lng: parseFloat(province.Longitude) || 0,\r\n        },\r\n      }))\r\n    )\r\n    .filter((province) => {\r\n      if (seen.has(province.name)) {\r\n        return false;\r\n      } else {\r\n        seen.add(province.name);\r\n        return true;\r\n      }\r\n    });\r\n}\r\n\r\nif (Data) {\r\n  const provinces = Array.isArray(Data)\r\n    ? extractProvincesFromArray(Data)\r\n    : extractProvincesFromObject(Data);\r\n\r\n  if (provinces !== undefined) {\r\n    localStorage.setItem(\"provinces\", JSON.stringify(provinces));\r\n    Outputs.ProvinceList = JSON.stringify(provinces);\r\n    Outputs.Success = true;\r\n    return;\r\n  }\r\n}\r\n\r\nOutputs.Success = false;\r\n"},"ports":[{"name":"in-Data","displayName":"Data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-ProvinceList","displayName":"ProvinceList","plug":"output","type":"*","group":"Outputs","index":5},{"name":"out-Success","displayName":"Success","plug":"output","type":"*","group":"Outputs","index":6}],"children":[]},{"id":"d8778382-e9e4-c208-11f0-af6682e39b8d","type":"JavaScriptFunction","parameters":{"functionScript":"localStorage.removeItem(\"locations\");\r\n\r\nconst Data = Inputs.Data;\r\n\r\nfunction extractLocationsFromObject(data) {\r\n  return {\r\n    description: data.FullName,\r\n    phone: data.PhoneNumber,\r\n    lat: data.Location?.lat ? parseFloat(data.Location.lat) : 0,\r\n    lng: data.Location?.lng ? parseFloat(data.Location.lng) : 0,\r\n  };\r\n}\r\n\r\nfunction extractLocationsFromArray(data) {\r\n  const seen = new Set();\r\n  return data\r\n    .map((item) => ({\r\n      description: item.FullName,\r\n      phone: item.PhoneNumber,\r\n      lat: item.Location?.lat ? parseFloat(item.Location.lat) : 0,\r\n      lng: item.Location?.lng ? parseFloat(item.Location.lng) : 0,\r\n    }))\r\n    .filter((location) => {\r\n      if (seen.has(location.description)) {\r\n        return false;\r\n      } else {\r\n        seen.add(location.description);\r\n        return true;\r\n      }\r\n    })\r\n    .filter((loc) => !(loc.lat === 0 && loc.lng === 0));\r\n}\r\n\r\nif (Data) {\r\n  const locations = Array.isArray(Data)\r\n    ? extractLocationsFromArray(Data)\r\n    : extractLocationsFromObject(Data);\r\n\r\n  if (locations !== undefined) {\r\n    localStorage.setItem(\"locations\", JSON.stringify(locations));\r\n    Outputs.LocationList = JSON.stringify(locations);\r\n    Outputs.Success = true;\r\n    return;\r\n  }\r\n}\r\n\r\nOutputs.Success = false;\r\n"},"ports":[{"name":"in-Data","displayName":"Data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-LocationList","displayName":"LocationList","plug":"output","type":"*","group":"Outputs","index":5},{"name":"out-Success","displayName":"Success","plug":"output","type":"*","group":"Outputs","index":6}],"children":[]},{"id":"3014028f-f206-b39b-4d8c-54910a0618fc","type":"Timer","parameters":{"duration":2000},"ports":[],"children":[]},{"id":"e913fafb-7ea7-45d6-9cf9-5e09f5936076","type":"Expression","parameters":{"expression":"true"},"ports":[],"children":[]},{"id":"981105e2-d272-3be6-80b1-15a57a1d38c9","type":"Inverter","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"975881a3-e3d2-ba31-755a-6c63b54fe66d","sourcePort":"didMount","targetId":"353a3b9f-a3e2-57a8-04ba-cdd3285a8bd7","targetPort":"Do"},{"sourceId":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","sourcePort":"Width","targetId":"515214bd-a79c-3758-a16f-bce03a187a52","targetPort":"width"},{"sourceId":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","sourcePort":"at-Open","targetId":"82f14e8e-f22e-942a-318e-737bc5be33ee","targetPort":"Is Open"},{"sourceId":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","sourcePort":"at-Closed","targetId":"82f14e8e-f22e-942a-318e-737bc5be33ee","targetPort":"Is Closed"},{"sourceId":"47a89711-f7c1-c387-11c9-29e198a8fe45","sourcePort":"onClick","targetId":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","targetPort":"to-Open"},{"sourceId":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","sourcePort":"at-Closed","targetId":"47a89711-f7c1-c387-11c9-29e198a8fe45","targetPort":"mounted"},{"sourceId":"b54f0b70-9f33-b423-eba0-9addd3eaecf4","sourcePort":"state","targetId":"620e4b03-a743-69e9-60c6-2ef67c2c9212","targetPort":"mounted"},{"sourceId":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","sourcePort":"reached-Open","targetId":"b54f0b70-9f33-b423-eba0-9addd3eaecf4","targetPort":"on"},{"sourceId":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","sourcePort":"at-Closed","targetId":"b54f0b70-9f33-b423-eba0-9addd3eaecf4","targetPort":"off"},{"sourceId":"620e4b03-a743-69e9-60c6-2ef67c2c9212","sourcePort":"onClick","targetId":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","targetPort":"to-Closed"},{"sourceId":"515214bd-a79c-3758-a16f-bce03a187a52","sourcePort":"focusLost","targetId":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","targetPort":"to-Closed"},{"sourceId":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","sourcePort":"at-Open","targetId":"a07c3165-465c-7b6e-3382-1432bde121f5","targetPort":"mounted"},{"sourceId":"8f707ac1-bb88-c749-e8f3-d6e84e2cbc71","sourcePort":"savedValue","targetId":"9fdeaf28-f1ad-3ea6-04ea-a2ffedfe4c8f","targetPort":"status"},{"sourceId":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","sourcePort":"at-Open","targetId":"63530ecc-b937-9260-2688-d581d9ff8f39","targetPort":"Visible"},{"sourceId":"f5fb625b-245e-9207-e9ae-1f50c0f8c29b","sourcePort":"at-Open","targetId":"33f9a71c-fc32-073c-1a17-22ca7f5f3cd4","targetPort":"Visible"},{"sourceId":"d19b1e5e-a82a-1dfd-e78c-758fb6d1d752","sourcePort":"out-DisasterId","targetId":"63530ecc-b937-9260-2688-d581d9ff8f39","targetPort":"CurrentDisasterValue"},{"sourceId":"d19b1e5e-a82a-1dfd-e78c-758fb6d1d752","sourcePort":"out-DisasterId","targetId":"33f9a71c-fc32-073c-1a17-22ca7f5f3cd4","targetPort":"CurrentDisasterValue"},{"sourceId":"d19b1e5e-a82a-1dfd-e78c-758fb6d1d752","sourcePort":"out-DisasterId","targetId":"8a932089-7204-3100-0010-6bc170650522","targetPort":"documentId"},{"sourceId":"d19b1e5e-a82a-1dfd-e78c-758fb6d1d752","sourcePort":"out-DistrictId","targetId":"8a932089-7204-3100-0010-6bc170650522","targetPort":"districtId"},{"sourceId":"d19b1e5e-a82a-1dfd-e78c-758fb6d1d752","sourcePort":"out-WardId","targetId":"8a932089-7204-3100-0010-6bc170650522","targetPort":"wardId"},{"sourceId":"d19b1e5e-a82a-1dfd-e78c-758fb6d1d752","sourcePort":"out-ProvinceId","targetId":"8a932089-7204-3100-0010-6bc170650522","targetPort":"provinceId"},{"sourceId":"baf41f49-6cba-5ae4-14b8-e073b978e3de","sourcePort":"result","targetId":"33f9a71c-fc32-073c-1a17-22ca7f5f3cd4","targetPort":"Mounted"},{"sourceId":"baf41f49-6cba-5ae4-14b8-e073b978e3de","sourcePort":"isfalse","targetId":"63530ecc-b937-9260-2688-d581d9ff8f39","targetPort":"Mounted"},{"sourceId":"baf41f49-6cba-5ae4-14b8-e073b978e3de","sourcePort":"isfalse","targetId":"94708485-8f4f-dbbd-e134-e57d11f48be8","targetPort":"mounted"},{"sourceId":"826e1bf2-e5cc-7a11-91c7-430bfba6b50b","sourcePort":"hasOrganization","targetId":"baf41f49-6cba-5ae4-14b8-e073b978e3de","targetPort":"condition"},{"sourceId":"94708485-8f4f-dbbd-e134-e57d11f48be8","sourcePort":"onClick","targetId":"174f3032-2fe4-1ca0-6011-a7487b667160","targetPort":"show"},{"sourceId":"9fdeaf28-f1ad-3ea6-04ea-a2ffedfe4c8f","sourcePort":"Data","targetId":"b01aac4a-cf65-3f72-b47f-d51085538ee2","targetPort":"Data"},{"sourceId":"d19b1e5e-a82a-1dfd-e78c-758fb6d1d752","sourcePort":"out-Done","targetId":"9fdeaf28-f1ad-3ea6-04ea-a2ffedfe4c8f","targetPort":"Do"},{"sourceId":"8a932089-7204-3100-0010-6bc170650522","sourcePort":"Response","targetId":"d8778382-e9e4-c208-11f0-af6682e39b8d","targetPort":"in-Data"},{"sourceId":"d19b1e5e-a82a-1dfd-e78c-758fb6d1d752","sourcePort":"out-Done","targetId":"8a932089-7204-3100-0010-6bc170650522","targetPort":"Fetch"},{"sourceId":"9fdeaf28-f1ad-3ea6-04ea-a2ffedfe4c8f","sourcePort":"Data","targetId":"01a9022f-c00d-b290-730b-28f9b7891be7","targetPort":"in-Data"},{"sourceId":"975881a3-e3d2-ba31-755a-6c63b54fe66d","sourcePort":"didMount","targetId":"3014028f-f206-b39b-4d8c-54910a0618fc","targetPort":"start"},{"sourceId":"3014028f-f206-b39b-4d8c-54910a0618fc","sourcePort":"timerFinished","targetId":"e913fafb-7ea7-45d6-9cf9-5e09f5936076","targetPort":"run"},{"sourceId":"e913fafb-7ea7-45d6-9cf9-5e09f5936076","sourcePort":"result","targetId":"e1d4db28-bb13-1bf5-3a6d-b6109eccffc9","targetPort":"mounted"},{"sourceId":"e913fafb-7ea7-45d6-9cf9-5e09f5936076","sourcePort":"result","targetId":"981105e2-d272-3be6-80b1-15a57a1d38c9","targetPort":"value"},{"sourceId":"981105e2-d272-3be6-80b1-15a57a1d38c9","sourcePort":"result","targetId":"5bf9bd33-6c21-7f47-492d-485a46273e94","targetPort":"mounted"}],"ports":[{"name":"Is Open","type":"boolean","group":"State","plug":"output","index":0},{"name":"Is Closed","type":"boolean","group":"State","plug":"output","index":1}],"roots":["975881a3-e3d2-ba31-755a-6c63b54fe66d"]},{"name":"/Page/home/GuestFilter","nodes":[{"id":"407ea354-7d26-f977-ad0e-d3f9c1a75991","type":"Group","parameters":{"sizeMode":"contentHeight","backgroundColor":"transparent","flexDirection":"column","columnGap":{"value":16,"unit":"px"},"paddingLeft":{"value":16,"unit":"px"},"paddingRight":{"value":16,"unit":"px"},"marginTop":{"value":0,"unit":"px"},"marginBottom":{"value":0,"unit":"px"},"paddingTop":{"value":16,"unit":"px"},"paddingBottom":{"value":16,"unit":"px"},"flexWrap":"nowrap","borderRightColor":"Grey - 600","rowGap":{"value":8,"unit":"px"},"visible":false},"ports":[],"children":[{"id":"ec3fdbc6-b209-015b-e947-a2c5afd86808","type":"Group","parameters":{},"ports":[],"children":[{"id":"ba8caee3-2a36-df4e-0d33-c3c4633473f4","type":"net.noodl.controls.options","parameters":{"items":"[\n    {\"Label\":\"Tất cả\", \"Value\":\"-1\"},\n]","label":"Thiên tai","placeholder":"Chọn thiên tai đang diễn ra"},"ports":[],"children":[]}]},{"id":"c45fed63-0225-dcad-f4f6-2ffdd006f1a6","type":"Group","parameters":{"paddingTop":{"value":4,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"},"flexDirection":"row","columnGap":{"value":8,"unit":"px"}},"ports":[],"children":[{"id":"69092921-6a31-2b68-8f40-405f5ec01e6f","type":"net.noodl.controls.button","parameters":{"height":{"value":32,"unit":"px"},"alignX":"left","label":"Áp dụng","sizeMode":"explicit"},"ports":[],"children":[]},{"id":"7aeb7a77-98fc-8056-f304-53d8a41c75e7","type":"net.noodl.controls.button","parameters":{"height":{"value":32,"unit":"px"},"alignX":"left","label":"Huỷ","backgroundColor":"Danger"},"ports":[],"children":[]}]}]},{"id":"0958b96f-62f9-d263-8f4c-fcef6785664b","type":"/#Logic/GetDisasters","parameters":{},"ports":[],"children":[]},{"id":"1f54e9a7-c34c-e513-594a-b62c98246ffd","type":"JavaScriptFunction","parameters":{"functionScript":"const inputArray = Inputs.ResponseArray;\r\nif(inputArray) {\r\n    Outputs.DropdownOptions = inputArray.map((item, index) => ({\r\n        Label: item.Name,\r\n        Value: item.documentId.toString()\r\n    }));\r\n}"},"ports":[{"name":"in-ResponseArray","displayName":"ResponseArray","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-DropdownOptions","displayName":"DropdownOptions","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"3276e76e-0428-bbb9-4e38-bef93c3fd46d","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"9d3ba748-382e-0235-3180-b6fad0701134","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n  Value: \"string\"\r\n};\r\n\r\nScript.Outputs = {\r\n  NullValue: 'number',\r\n  Value: 'number',\r\n  EmptyArr: 'array',\r\n  Done: \"signal\"\r\n};\r\n\r\nScript.Signals.Clear = function() {\r\n  Script.Outputs.NullValue = null;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nfunction onChange() {\r\n  Script.Outputs.Value = Script.Inputs.Value;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nScript.Setters.Value = onChange;"},"ports":[{"name":"Value","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"Clear","plug":"input","type":{"name":"signal"},"group":"Inputs","index":6},{"name":"NullValue","type":{"name":"number"},"plug":"output","group":"Outputs","index":7},{"name":"Value","type":{"name":"number"},"plug":"output","group":"Outputs","index":8},{"name":"EmptyArr","type":{"name":"array"},"plug":"output","group":"Outputs","index":9},{"name":"Done","type":{"name":"signal"},"plug":"output","group":"Outputs","index":10}],"children":[]},{"id":"720005a9-4020-2502-05d0-e866935dda08","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n  Value: \"string\"\r\n};\r\n\r\nScript.Outputs = {\r\n  NullValue: 'number',\r\n  Value: 'number',\r\n  EmptyArr: 'array',\r\n  Done: \"signal\"\r\n};\r\n\r\nScript.Signals.Clear = function() {\r\n  Script.Outputs.NullValue = null;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nfunction onChange() {\r\n  Script.Outputs.Value = Script.Inputs.Value;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nScript.Setters.Value = onChange;"},"ports":[{"name":"Value","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"Clear","plug":"input","type":{"name":"signal"},"group":"Inputs","index":6},{"name":"NullValue","type":{"name":"number"},"plug":"output","group":"Outputs","index":7},{"name":"Value","type":{"name":"number"},"plug":"output","group":"Outputs","index":8},{"name":"EmptyArr","type":{"name":"array"},"plug":"output","group":"Outputs","index":9},{"name":"Done","type":{"name":"signal"},"plug":"output","group":"Outputs","index":10}],"children":[]},{"id":"54f1ff25-9037-10dc-b972-23fa25749fbc","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n  Value: \"string\"\r\n};\r\n\r\nScript.Outputs = {\r\n  NullValue: 'number',\r\n  Value: 'number',\r\n  EmptyArr: 'array',\r\n  Done: \"signal\"\r\n};\r\n\r\nScript.Signals.Clear = function() {\r\n  Script.Outputs.NullValue = null;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nfunction onChange() {\r\n  Script.Outputs.Value = Script.Inputs.Value;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nScript.Setters.Value = onChange;"},"ports":[{"name":"Value","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"Clear","plug":"input","type":{"name":"signal"},"group":"Inputs","index":6},{"name":"NullValue","type":{"name":"number"},"plug":"output","group":"Outputs","index":7},{"name":"Value","type":{"name":"number"},"plug":"output","group":"Outputs","index":8},{"name":"EmptyArr","type":{"name":"array"},"plug":"output","group":"Outputs","index":9},{"name":"Done","type":{"name":"signal"},"plug":"output","group":"Outputs","index":10}],"children":[]},{"id":"abbb3f5c-9781-4f2c-4721-14d3eac35778","type":"Number","parameters":{"value":2},"ports":[],"children":[]},{"id":"b9420d69-5b98-9a67-fb03-6c3e1b4d3ff1","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"eee8c2a3-ed0d-00dc-1ab9-f754f17206be","type":"RouterNavigate","parameters":{"router":"Main","target":"/Page/home"},"ports":[],"children":[]},{"id":"561f5e20-b209-2d77-82fe-647c2fa5468b","type":"RouterNavigate","parameters":{"router":"Main","target":"/Page/home"},"ports":[],"children":[]}],"connections":[{"sourceId":"1f54e9a7-c34c-e513-594a-b62c98246ffd","sourcePort":"out-DropdownOptions","targetId":"ba8caee3-2a36-df4e-0d33-c3c4633473f4","targetPort":"items"},{"sourceId":"0958b96f-62f9-d263-8f4c-fcef6785664b","sourcePort":"Data","targetId":"1f54e9a7-c34c-e513-594a-b62c98246ffd","targetPort":"in-ResponseArray"},{"sourceId":"3276e76e-0428-bbb9-4e38-bef93c3fd46d","sourcePort":"Width","targetId":"407ea354-7d26-f977-ad0e-d3f9c1a75991","targetPort":"width"},{"sourceId":"3276e76e-0428-bbb9-4e38-bef93c3fd46d","sourcePort":"Visible","targetId":"407ea354-7d26-f977-ad0e-d3f9c1a75991","targetPort":"visible"},{"sourceId":"9d3ba748-382e-0235-3180-b6fad0701134","sourcePort":"EmptyArr","targetId":"ba8caee3-2a36-df4e-0d33-c3c4633473f4","targetPort":"items"},{"sourceId":"7aeb7a77-98fc-8056-f304-53d8a41c75e7","sourcePort":"onClick","targetId":"9d3ba748-382e-0235-3180-b6fad0701134","targetPort":"Clear"},{"sourceId":"ba8caee3-2a36-df4e-0d33-c3c4633473f4","sourcePort":"value","targetId":"720005a9-4020-2502-05d0-e866935dda08","targetPort":"Value"},{"sourceId":"54f1ff25-9037-10dc-b972-23fa25749fbc","sourcePort":"NullValue","targetId":"ba8caee3-2a36-df4e-0d33-c3c4633473f4","targetPort":"value"},{"sourceId":"abbb3f5c-9781-4f2c-4721-14d3eac35778","sourcePort":"savedValue","targetId":"0958b96f-62f9-d263-8f4c-fcef6785664b","targetPort":"status"},{"sourceId":"3276e76e-0428-bbb9-4e38-bef93c3fd46d","sourcePort":"CurrentDisasterValue","targetId":"ba8caee3-2a36-df4e-0d33-c3c4633473f4","targetPort":"value"},{"sourceId":"407ea354-7d26-f977-ad0e-d3f9c1a75991","sourcePort":"didMount","targetId":"0958b96f-62f9-d263-8f4c-fcef6785664b","targetPort":"Do"},{"sourceId":"69092921-6a31-2b68-8f40-405f5ec01e6f","sourcePort":"onClick","targetId":"b9420d69-5b98-9a67-fb03-6c3e1b4d3ff1","targetPort":"ApplyClicked"},{"sourceId":"7aeb7a77-98fc-8056-f304-53d8a41c75e7","sourcePort":"onClick","targetId":"b9420d69-5b98-9a67-fb03-6c3e1b4d3ff1","targetPort":"CancelClicked"},{"sourceId":"7aeb7a77-98fc-8056-f304-53d8a41c75e7","sourcePort":"onClick","targetId":"eee8c2a3-ed0d-00dc-1ab9-f754f17206be","targetPort":"navigate"},{"sourceId":"69092921-6a31-2b68-8f40-405f5ec01e6f","sourcePort":"onClick","targetId":"561f5e20-b209-2d77-82fe-647c2fa5468b","targetPort":"navigate"},{"sourceId":"3276e76e-0428-bbb9-4e38-bef93c3fd46d","sourcePort":"Mounted","targetId":"407ea354-7d26-f977-ad0e-d3f9c1a75991","targetPort":"mounted"},{"sourceId":"ba8caee3-2a36-df4e-0d33-c3c4633473f4","sourcePort":"value","targetId":"561f5e20-b209-2d77-82fe-647c2fa5468b","targetPort":"pm-disasterId"}],"ports":[{"name":"ApplyClicked","type":"signal","plug":"output","index":1},{"name":"Visible","type":"boolean","default":false,"group":"Style","plug":"input","index":1},{"name":"CancelClicked","type":"signal","plug":"output","index":2},{"name":"Width","type":{"name":"dimension","units":["%","px","vw","vh"],"defaultUnit":"%"},"default":100,"group":"Dimensions","plug":"input","index":2},{"name":"CurrentDisasterValue","type":"string","group":"General","plug":"input","index":3},{"name":"Mounted","type":"boolean","default":true,"group":"General","plug":"input","index":4}],"roots":["407ea354-7d26-f977-ad0e-d3f9c1a75991"]},{"name":"/Page/home/OrganizationFilter","nodes":[{"id":"3bdd769d-6974-7863-7469-65c3fd97f08a","type":"Group","parameters":{"sizeMode":"contentHeight","backgroundColor":"transparent","flexDirection":"column","columnGap":{"value":16,"unit":"px"},"paddingLeft":{"value":16,"unit":"px"},"paddingRight":{"value":16,"unit":"px"},"marginTop":{"value":0,"unit":"px"},"marginBottom":{"value":0,"unit":"px"},"paddingTop":{"value":16,"unit":"px"},"paddingBottom":{"value":16,"unit":"px"},"flexWrap":"nowrap","borderRightColor":"Grey - 600","rowGap":{"value":8,"unit":"px"},"visible":false,"mounted":false},"ports":[],"children":[{"id":"1a7691bb-4601-7fdf-58c3-dc832b6b1c63","type":"Group","parameters":{},"ports":[],"children":[{"id":"97f43f06-ffa4-edbf-5016-7d44d632d239","type":"net.noodl.controls.options","parameters":{"items":"[\n    {\"Label\":\"Tất cả\", \"Value\":\"-1\"},\n]","label":"Thiên tai","placeholder":"Chọn thiên tai đang diễn ra"},"ports":[],"children":[]}]},{"id":"264bbb94-15b9-fc0d-9ddb-524478f8836a","type":"Group","parameters":{},"ports":[],"children":[{"id":"814f4615-97ec-bc4e-0e86-0250ef35533f","type":"net.noodl.controls.options","parameters":{"items":"[\n    {\"Label\":\"Option 1\", \"Value\":\"1\"},\n    {\"Label\":\"Option 2\", \"Value\":\"2\"},\n    {\"Label\":\"Option 3\", \"Value\":\"3\"}\n]","placeholder":"Chọn","label":"Tỉnh","width":{"value":100,"unit":"%","isFixed":false},"sizeMode":"explicit"},"ports":[],"children":[]}]},{"id":"76390478-b600-8af5-334f-f42036de6ae5","type":"Group","parameters":{},"ports":[],"children":[{"id":"447d8d70-763c-e71a-c6c9-9d837dc4152d","type":"net.noodl.controls.options","parameters":{"placeholder":"Chọn","label":"Huyện","width":{"value":100,"unit":"%","isFixed":false},"sizeMode":"explicit","enabled":false},"ports":[],"children":[]}]},{"id":"a23693dd-93bf-97d8-fccd-e6b3dfe4e2aa","type":"Group","parameters":{},"ports":[],"children":[{"id":"d4a5d30a-a9b1-736b-89c2-e591ffdcb4c8","type":"net.noodl.controls.options","parameters":{"label":"Xã","placeholder":"Chọn","width":{"value":100,"unit":"%","isFixed":false},"sizeMode":"explicit","enabled":false},"ports":[],"children":[]}]},{"id":"99da02d8-e385-9ab5-e92c-53c4a4a00d54","type":"Group","parameters":{"paddingTop":{"value":4,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"},"flexDirection":"row","columnGap":{"value":8,"unit":"px"}},"ports":[],"children":[{"id":"49c3082c-c980-f8e9-03e7-7f0ce9f57d54","type":"net.noodl.controls.button","parameters":{"height":{"value":32,"unit":"px"},"alignX":"left","label":"Áp dụng","sizeMode":"explicit"},"ports":[],"children":[]},{"id":"1c1d4b30-9a5e-dd0b-65ec-57ba2d623656","type":"net.noodl.controls.button","parameters":{"height":{"value":32,"unit":"px"},"alignX":"left","label":"Huỷ","backgroundColor":"Danger"},"ports":[],"children":[]}]}]},{"id":"597109ce-d4c4-fdae-ca70-ffe737420f4c","type":"/#Logic/GetDisasters","parameters":{},"ports":[],"children":[]},{"id":"2adb67ad-adb0-1950-a300-55bdbf618f8c","type":"JavaScriptFunction","parameters":{"functionScript":"const inputArray = Inputs.ResponseArray;\r\nif(inputArray) {\r\n    Outputs.DropdownOptions = inputArray.map((item, index) => ({\r\n        Label: item.Name,\r\n        Value: item.documentId.toString()\r\n    }));\r\n}"},"ports":[{"name":"in-ResponseArray","displayName":"ResponseArray","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-DropdownOptions","displayName":"DropdownOptions","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"ec25e0f2-0105-ab11-f901-538c98e155ba","type":"/#Logic/GetProvinces","parameters":{},"ports":[],"children":[]},{"id":"b851a8e6-e443-0c7a-91bf-c3941484c3da","type":"JavaScriptFunction","parameters":{"functionScript":"const response = Inputs.Response;\r\n\r\nif (Array.isArray(response)) {\r\n    const options = response.map((item, index) => ({\r\n        Label: item.FullName,\r\n        Value: item.id.toString()\r\n    }));\r\n    Outputs.Options = options;\r\n} else {\r\n    Outputs.Options = [];\r\n}\r\n"},"ports":[{"name":"in-Response","displayName":"Response","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Options","displayName":"Options","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"1aae4b11-9a45-2e4c-1973-e7ac787cf5fa","type":"/#Logic/GetDistricts","parameters":{},"ports":[],"children":[]},{"id":"2d2b1cb3-5da8-1485-72fd-a8987f361e6a","type":"JavaScriptFunction","parameters":{"functionScript":"const response = Inputs.Response;\r\n\r\nif (Array.isArray(response)) {\r\n    const options = response.map((item, index) => ({\r\n        Label: item.FullName,\r\n        Value: item.id.toString() \r\n    }));\r\n    Outputs.Options = options;\r\n} else {\r\n    Outputs.Options = [];\r\n}\r\n"},"ports":[{"name":"in-Response","displayName":"Response","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Options","displayName":"Options","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"e8e65a3e-0ba3-fdf3-e823-ba8d8ee34a4f","type":"/#Logic/GetWards","parameters":{},"ports":[],"children":[]},{"id":"9924d412-842c-c930-9181-f86d1c8a2b41","type":"JavaScriptFunction","parameters":{"functionScript":"const response = Inputs.Response;\r\n\r\nif (Array.isArray(response)) {\r\n    const options = response.map((item, index) => ({\r\n        Label: item.FullName,\r\n        Value: item.id.toString() \r\n    }));\r\n    Outputs.Options = options;\r\n} else {\r\n    Outputs.Options = [];\r\n}\r\n"},"ports":[{"name":"in-Response","displayName":"Response","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Options","displayName":"Options","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"72f14a76-e880-341f-7a9d-fd40171c3870","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"418d5121-255f-0a97-e838-cc7ab42b9ecd","type":"JavaScriptFunction","parameters":{"functionScript":"Outputs.Dang = 2"},"ports":[{"name":"out-Dang","displayName":"Dang","plug":"output","type":"*","group":"Outputs","index":4}],"children":[]},{"id":"0b5c8883-0087-9997-09a0-e1fcf237785f","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n  Value: \"string\"\r\n};\r\n\r\nScript.Outputs = {\r\n  NullValue: 'number',\r\n  Value: 'number',\r\n  EmptyArr: 'array',\r\n  Done: \"signal\"\r\n};\r\n\r\nScript.Signals.Clear = function() {\r\n  Script.Outputs.NullValue = null;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nfunction onChange() {\r\n  Script.Outputs.Value = Script.Inputs.Value;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nScript.Setters.Value = onChange;"},"ports":[{"name":"Value","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"Clear","plug":"input","type":{"name":"signal"},"group":"Inputs","index":6},{"name":"NullValue","type":{"name":"number"},"plug":"output","group":"Outputs","index":7},{"name":"Value","type":{"name":"number"},"plug":"output","group":"Outputs","index":8},{"name":"EmptyArr","type":{"name":"array"},"plug":"output","group":"Outputs","index":9},{"name":"Done","type":{"name":"signal"},"plug":"output","group":"Outputs","index":10}],"children":[]},{"id":"4e56234b-c91a-795c-3235-1021af4239a7","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n  Value: \"string\"\r\n};\r\n\r\nScript.Outputs = {\r\n  NullValue: 'number',\r\n  Value: 'number',\r\n  EmptyArr: 'array',\r\n  Done: \"signal\"\r\n};\r\n\r\nScript.Signals.Clear = function() {\r\n  Script.Outputs.NullValue = null;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nfunction onChange() {\r\n  Script.Outputs.Value = Script.Inputs.Value;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nScript.Setters.Value = onChange;"},"ports":[{"name":"Value","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"Clear","plug":"input","type":{"name":"signal"},"group":"Inputs","index":6},{"name":"NullValue","type":{"name":"number"},"plug":"output","group":"Outputs","index":7},{"name":"Value","type":{"name":"number"},"plug":"output","group":"Outputs","index":8},{"name":"EmptyArr","type":{"name":"array"},"plug":"output","group":"Outputs","index":9},{"name":"Done","type":{"name":"signal"},"plug":"output","group":"Outputs","index":10}],"children":[]},{"id":"71034a57-01c1-4cf4-7e4a-3fa4a6640373","type":"RouterNavigate","parameters":{"router":"Main","target":"/Page/home"},"ports":[],"children":[]},{"id":"31ecf2b3-caba-94ca-0ea3-90af0e8b8e88","type":"RouterNavigate","parameters":{"router":"Main","target":"/Page/home"},"ports":[],"children":[]},{"id":"16cbd52d-d11f-4cf4-ca5c-766a9a49a47c","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n  Value: \"string\"\r\n};\r\n\r\nScript.Outputs = {\r\n  NullValue: 'number',\r\n  Value: 'number',\r\n  EmptyArr: 'array',\r\n  Done: \"signal\"\r\n};\r\n\r\nScript.Signals.Clear = function() {\r\n  Script.Outputs.NullValue = null;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nfunction onChange() {\r\n  Script.Outputs.Value = Script.Inputs.Value;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nScript.Setters.Value = onChange;"},"ports":[{"name":"Value","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"Clear","plug":"input","type":{"name":"signal"},"group":"Inputs","index":6},{"name":"NullValue","type":{"name":"number"},"plug":"output","group":"Outputs","index":7},{"name":"Value","type":{"name":"number"},"plug":"output","group":"Outputs","index":8},{"name":"EmptyArr","type":{"name":"array"},"plug":"output","group":"Outputs","index":9},{"name":"Done","type":{"name":"signal"},"plug":"output","group":"Outputs","index":10}],"children":[]}],"connections":[{"sourceId":"ec25e0f2-0105-ab11-f901-538c98e155ba","sourcePort":"Response","targetId":"b851a8e6-e443-0c7a-91bf-c3941484c3da","targetPort":"in-Response"},{"sourceId":"1aae4b11-9a45-2e4c-1973-e7ac787cf5fa","sourcePort":"Response","targetId":"2d2b1cb3-5da8-1485-72fd-a8987f361e6a","targetPort":"in-Response"},{"sourceId":"e8e65a3e-0ba3-fdf3-e823-ba8d8ee34a4f","sourcePort":"Response","targetId":"9924d412-842c-c930-9181-f86d1c8a2b41","targetPort":"in-Response"},{"sourceId":"2adb67ad-adb0-1950-a300-55bdbf618f8c","sourcePort":"out-DropdownOptions","targetId":"97f43f06-ffa4-edbf-5016-7d44d632d239","targetPort":"items"},{"sourceId":"3bdd769d-6974-7863-7469-65c3fd97f08a","sourcePort":"didMount","targetId":"ec25e0f2-0105-ab11-f901-538c98e155ba","targetPort":"Fetch"},{"sourceId":"814f4615-97ec-bc4e-0e86-0250ef35533f","sourcePort":"value","targetId":"1aae4b11-9a45-2e4c-1973-e7ac787cf5fa","targetPort":"ProvinceId"},{"sourceId":"b851a8e6-e443-0c7a-91bf-c3941484c3da","sourcePort":"out-Options","targetId":"814f4615-97ec-bc4e-0e86-0250ef35533f","targetPort":"items"},{"sourceId":"2d2b1cb3-5da8-1485-72fd-a8987f361e6a","sourcePort":"out-Options","targetId":"447d8d70-763c-e71a-c6c9-9d837dc4152d","targetPort":"items"},{"sourceId":"9924d412-842c-c930-9181-f86d1c8a2b41","sourcePort":"out-Options","targetId":"d4a5d30a-a9b1-736b-89c2-e591ffdcb4c8","targetPort":"items"},{"sourceId":"447d8d70-763c-e71a-c6c9-9d837dc4152d","sourcePort":"value","targetId":"e8e65a3e-0ba3-fdf3-e823-ba8d8ee34a4f","targetPort":"DistrictsId"},{"sourceId":"2d2b1cb3-5da8-1485-72fd-a8987f361e6a","sourcePort":"out-Options","targetId":"447d8d70-763c-e71a-c6c9-9d837dc4152d","targetPort":"enabled"},{"sourceId":"9924d412-842c-c930-9181-f86d1c8a2b41","sourcePort":"out-Options","targetId":"d4a5d30a-a9b1-736b-89c2-e591ffdcb4c8","targetPort":"enabled"},{"sourceId":"3bdd769d-6974-7863-7469-65c3fd97f08a","sourcePort":"didMount","targetId":"597109ce-d4c4-fdae-ca70-ffe737420f4c","targetPort":"Do"},{"sourceId":"597109ce-d4c4-fdae-ca70-ffe737420f4c","sourcePort":"Data","targetId":"2adb67ad-adb0-1950-a300-55bdbf618f8c","targetPort":"in-ResponseArray"},{"sourceId":"418d5121-255f-0a97-e838-cc7ab42b9ecd","sourcePort":"out-Dang","targetId":"597109ce-d4c4-fdae-ca70-ffe737420f4c","targetPort":"status"},{"sourceId":"72f14a76-e880-341f-7a9d-fd40171c3870","sourcePort":"Width","targetId":"3bdd769d-6974-7863-7469-65c3fd97f08a","targetPort":"width"},{"sourceId":"72f14a76-e880-341f-7a9d-fd40171c3870","sourcePort":"Visible","targetId":"3bdd769d-6974-7863-7469-65c3fd97f08a","targetPort":"visible"},{"sourceId":"0b5c8883-0087-9997-09a0-e1fcf237785f","sourcePort":"NullValue","targetId":"447d8d70-763c-e71a-c6c9-9d837dc4152d","targetPort":"value"},{"sourceId":"0b5c8883-0087-9997-09a0-e1fcf237785f","sourcePort":"EmptyArr","targetId":"814f4615-97ec-bc4e-0e86-0250ef35533f","targetPort":"items"},{"sourceId":"0b5c8883-0087-9997-09a0-e1fcf237785f","sourcePort":"EmptyArr","targetId":"97f43f06-ffa4-edbf-5016-7d44d632d239","targetPort":"items"},{"sourceId":"0b5c8883-0087-9997-09a0-e1fcf237785f","sourcePort":"EmptyArr","targetId":"d4a5d30a-a9b1-736b-89c2-e591ffdcb4c8","targetPort":"items"},{"sourceId":"0b5c8883-0087-9997-09a0-e1fcf237785f","sourcePort":"EmptyArr","targetId":"447d8d70-763c-e71a-c6c9-9d837dc4152d","targetPort":"items"},{"sourceId":"0b5c8883-0087-9997-09a0-e1fcf237785f","sourcePort":"NullValue","targetId":"814f4615-97ec-bc4e-0e86-0250ef35533f","targetPort":"value"},{"sourceId":"1c1d4b30-9a5e-dd0b-65ec-57ba2d623656","sourcePort":"onClick","targetId":"0b5c8883-0087-9997-09a0-e1fcf237785f","targetPort":"Clear"},{"sourceId":"814f4615-97ec-bc4e-0e86-0250ef35533f","sourcePort":"onFocus","targetId":"ec25e0f2-0105-ab11-f901-538c98e155ba","targetPort":"Fetch"},{"sourceId":"4e56234b-c91a-795c-3235-1021af4239a7","sourcePort":"EmptyArr","targetId":"d4a5d30a-a9b1-736b-89c2-e591ffdcb4c8","targetPort":"items"},{"sourceId":"4e56234b-c91a-795c-3235-1021af4239a7","sourcePort":"NullValue","targetId":"d4a5d30a-a9b1-736b-89c2-e591ffdcb4c8","targetPort":"value"},{"sourceId":"4e56234b-c91a-795c-3235-1021af4239a7","sourcePort":"Value","targetId":"e8e65a3e-0ba3-fdf3-e823-ba8d8ee34a4f","targetPort":"DistrictsId"},{"sourceId":"447d8d70-763c-e71a-c6c9-9d837dc4152d","sourcePort":"value","targetId":"4e56234b-c91a-795c-3235-1021af4239a7","targetPort":"Value"},{"sourceId":"72f14a76-e880-341f-7a9d-fd40171c3870","sourcePort":"CurrentDisasterValue","targetId":"97f43f06-ffa4-edbf-5016-7d44d632d239","targetPort":"value"},{"sourceId":"49c3082c-c980-f8e9-03e7-7f0ce9f57d54","sourcePort":"onClick","targetId":"71034a57-01c1-4cf4-7e4a-3fa4a6640373","targetPort":"navigate"},{"sourceId":"97f43f06-ffa4-edbf-5016-7d44d632d239","sourcePort":"value","targetId":"71034a57-01c1-4cf4-7e4a-3fa4a6640373","targetPort":"pm-disasterId"},{"sourceId":"1c1d4b30-9a5e-dd0b-65ec-57ba2d623656","sourcePort":"onClick","targetId":"31ecf2b3-caba-94ca-0ea3-90af0e8b8e88","targetPort":"navigate"},{"sourceId":"72f14a76-e880-341f-7a9d-fd40171c3870","sourcePort":"Mounted","targetId":"3bdd769d-6974-7863-7469-65c3fd97f08a","targetPort":"mounted"},{"sourceId":"814f4615-97ec-bc4e-0e86-0250ef35533f","sourcePort":"value","targetId":"71034a57-01c1-4cf4-7e4a-3fa4a6640373","targetPort":"pm-provinceId"},{"sourceId":"447d8d70-763c-e71a-c6c9-9d837dc4152d","sourcePort":"value","targetId":"71034a57-01c1-4cf4-7e4a-3fa4a6640373","targetPort":"pm-districtId"},{"sourceId":"d4a5d30a-a9b1-736b-89c2-e591ffdcb4c8","sourcePort":"value","targetId":"71034a57-01c1-4cf4-7e4a-3fa4a6640373","targetPort":"pm-wardId"},{"sourceId":"4e56234b-c91a-795c-3235-1021af4239a7","sourcePort":"Done","targetId":"e8e65a3e-0ba3-fdf3-e823-ba8d8ee34a4f","targetPort":"Fetch"},{"sourceId":"814f4615-97ec-bc4e-0e86-0250ef35533f","sourcePort":"value","targetId":"16cbd52d-d11f-4cf4-ca5c-766a9a49a47c","targetPort":"Value"},{"sourceId":"16cbd52d-d11f-4cf4-ca5c-766a9a49a47c","sourcePort":"NullValue","targetId":"447d8d70-763c-e71a-c6c9-9d837dc4152d","targetPort":"value"},{"sourceId":"16cbd52d-d11f-4cf4-ca5c-766a9a49a47c","sourcePort":"EmptyArr","targetId":"447d8d70-763c-e71a-c6c9-9d837dc4152d","targetPort":"items"},{"sourceId":"16cbd52d-d11f-4cf4-ca5c-766a9a49a47c","sourcePort":"Done","targetId":"1aae4b11-9a45-2e4c-1973-e7ac787cf5fa","targetPort":"Fetch"}],"ports":[{"name":"Visible","type":"boolean","default":false,"group":"Style","plug":"input","index":1},{"name":"Width","type":{"name":"dimension","units":["%","px","vw","vh"],"defaultUnit":"%"},"default":100,"group":"Dimensions","plug":"input","index":2},{"name":"CurrentDisasterValue","type":"string","group":"General","plug":"input","index":3},{"name":"Mounted","type":"boolean","default":false,"group":"General","plug":"input","index":4}],"roots":["3bdd769d-6974-7863-7469-65c3fd97f08a"]},{"name":"/Page/home/CurrentDisaster","nodes":[{"id":"40ac6488-f86c-ec3f-7e56-9658e3f5a2cd","type":"Group","parameters":{"position":"absolute","zIndex":1,"paddingTop":{"value":8,"unit":"px"},"paddingRight":{"value":16,"unit":"px"},"paddingLeft":{"value":16,"unit":"px"},"marginBottom":{"value":16,"unit":"px"},"paddingBottom":{"value":8,"unit":"px"},"transformX":{"value":16,"unit":"px"},"transformY":{"value":16,"unit":"px"},"mounted":true,"flexDirection":"column","rowGap":{"value":16,"unit":"px"},"sizeMode":"contentSize"},"ports":[],"children":[{"id":"8949bc2e-3408-e8ea-52ee-1f516af1a1e5","type":"Group","parameters":{"sizeMode":"contentSize","flexDirection":"row","columnGap":{"value":8,"unit":"px"},"flexWrap":"wrap-reverse","rowGap":{"value":8,"unit":"px"}},"ports":[],"children":[{"id":"72516701-3c07-e366-16ee-478d111df53d","type":"For Each","parameters":{"template":"/Page/home/CurrentDisaster/DisasterList"},"ports":[],"children":[]}]},{"id":"bd64d3d1-016d-eacc-d066-e4b9ff74f7b1","type":"Group","parameters":{"paddingTop":{"value":16,"unit":"px"},"paddingLeft":{"value":16,"unit":"px"},"paddingRight":{"value":16,"unit":"px"},"paddingBottom":{"value":16,"unit":"px"},"backgroundColor":"#FFFFFFB2","borderRadius":{"value":8,"unit":"px"},"sizeMode":"contentSize","rowGap":{"value":4,"unit":"px"}},"ports":[],"children":[{"id":"b3e10f57-93cf-2522-bc72-eab2a9e2c49d","type":"Text","parameters":{"fontSize":{"value":18,"unit":"px"},"fontFamily":"build/fonts/Roboto/Roboto-Bold.ttf","color":"Danger","sizeMode":"contentSize","text":""},"ports":[],"children":[]},{"id":"643cb271-2453-6434-4876-8c3cd84e8590","type":"For Each","parameters":{"template":"/Page/home/CurrentDisaster/ProvinceList"},"ports":[],"children":[]}]}]},{"id":"7600672b-924e-5d72-016a-9297fc98fdbd","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"37a052ec-ad31-3d09-8800-30aaeef999fb","type":"JavaScriptFunction","parameters":{"functionScript":"const data = Inputs.Data;\r\n\r\nif(data && Array.isArray(data) && data.length > 0) {\r\n    const provinceList = data.length === 1 \r\n        ? data[0].Provinces.map(province => ({\r\n            id: province.id,\r\n            Name: province.Name,\r\n            NameEn: province.NameEn,\r\n            FullName: province.FullName,\r\n            FullNameEn: province.FullNameEn,\r\n            Latitude: province.Latitude,\r\n            Longitude: province.Longitude\r\n        }))\r\n        : data.reduce((acc, item) => [...acc, ...item?.Provinces], [])\r\n          .map(province => ({\r\n              id: province.id,\r\n              Name: province.Name,\r\n              NameEn: province.NameEn,\r\n              FullName: province.FullName,\r\n              FullNameEn: province.FullNameEn,\r\n              Latitude: province.Latitude,\r\n              Longitude: province.Longitude\r\n          }));\r\n    Outputs.Data = data;\r\n    Outputs.ProvinceList = provinceList;\r\n} \r\n\r\nif(data && typeof data === 'object' && !Array.isArray(data)) {\r\n    Outputs.Data = [data];\r\n    Outputs.ProvinceList = data.Provinces || [];\r\n}\r\n\r\nif(data === []) {\r\n    Outputs.Message = 'Hiện không có thiên tai';\r\n} else {\r\n    Outputs.Message = 'Các tỉnh đang bị ảnh hưởng';\r\n}"},"ports":[{"name":"in-Data","displayName":"Data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Data","displayName":"Data","plug":"output","type":"*","group":"Outputs","index":5},{"name":"out-ProvinceList","displayName":"ProvinceList","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-Message","displayName":"Message","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]}],"connections":[{"sourceId":"37a052ec-ad31-3d09-8800-30aaeef999fb","sourcePort":"out-ProvinceList","targetId":"643cb271-2453-6434-4876-8c3cd84e8590","targetPort":"items"},{"sourceId":"37a052ec-ad31-3d09-8800-30aaeef999fb","sourcePort":"out-Data","targetId":"72516701-3c07-e366-16ee-478d111df53d","targetPort":"items"},{"sourceId":"37a052ec-ad31-3d09-8800-30aaeef999fb","sourcePort":"out-Message","targetId":"b3e10f57-93cf-2522-bc72-eab2a9e2c49d","targetPort":"text"},{"sourceId":"7600672b-924e-5d72-016a-9297fc98fdbd","sourcePort":"Data","targetId":"37a052ec-ad31-3d09-8800-30aaeef999fb","targetPort":"in-Data"}],"ports":[{"name":"Data","type":"*","group":"Inputs","plug":"input","index":1}],"roots":["40ac6488-f86c-ec3f-7e56-9658e3f5a2cd"]},{"name":"/Page/home/CurrentDisaster/DisasterList","nodes":[{"id":"00ba8bed-9e45-5186-3c9a-5836c402a7a1","type":"Group","parameters":{"flexDirection":"row","alignContent":"flex-start","rowGap":{"value":4,"unit":"px"},"columnGap":{"value":4,"unit":"px"},"backgroundColor":"Danger","sizeMode":"contentSize","paddingTop":{"value":8,"unit":"px"},"paddingBottom":{"value":8,"unit":"px"},"paddingLeft":{"value":16,"unit":"px"},"paddingRight":{"value":16,"unit":"px"},"alignItems":"center","borderRadius":{"value":9999,"unit":"px"}},"ports":[],"children":[{"id":"d59b5317-0870-7b5a-f57e-a3b1b4840dfc","type":"net.noodl.visual.icon","parameters":{"iconIconSource":{"class":"material-icons","code":"warning","codeAsClass":false},"iconSize":{"value":12,"unit":"px"}},"ports":[],"children":[]},{"id":"54c4863f-9d78-6366-a5dd-51fe549282b4","type":"Text","parameters":{"text":"Thiên tai hiện tại","sizeMode":"contentSize","color":"Grey - 200","fontFamily":"build/fonts/Roboto/Roboto-Black.ttf","fontSize":{"value":12,"unit":"px"}},"ports":[],"children":[]}]},{"id":"2426954a-d730-c5ab-48b2-08d967671bb4","type":"Model2","parameters":{"properties":"Name","idSource":"foreach"},"ports":[],"children":[]}],"connections":[{"sourceId":"2426954a-d730-c5ab-48b2-08d967671bb4","sourcePort":"prop-Name","targetId":"54c4863f-9d78-6366-a5dd-51fe549282b4","targetPort":"text"}],"ports":[],"roots":["00ba8bed-9e45-5186-3c9a-5836c402a7a1"]},{"name":"/Page/home/CurrentDisaster/ProvinceList","nodes":[{"id":"a8af4ed7-6aa2-3856-8f2d-81b0291574f3","type":"Group","parameters":{},"ports":[],"children":[{"id":"445ee02c-1e1b-b442-ab96-f5a13f1e8bf6","type":"Text","parameters":{"text":"","fontFamily":"build/fonts/Roboto/Roboto-Medium.ttf"},"ports":[],"children":[]}]},{"id":"455b64d2-03ef-884f-47d2-86bfc9a0ff91","type":"Model2","parameters":{"idSource":"foreach","properties":"FullName,fullName"},"ports":[],"children":[]}],"connections":[{"sourceId":"455b64d2-03ef-884f-47d2-86bfc9a0ff91","sourcePort":"prop-FullName","targetId":"445ee02c-1e1b-b442-ab96-f5a13f1e8bf6","targetPort":"text"},{"sourceId":"455b64d2-03ef-884f-47d2-86bfc9a0ff91","sourcePort":"prop-fullName","targetId":"445ee02c-1e1b-b442-ab96-f5a13f1e8bf6","targetPort":"text"}],"ports":[],"roots":["a8af4ed7-6aa2-3856-8f2d-81b0291574f3"]},{"name":"/#Logic/GetRequests","nodes":[{"id":"225df4cd-02cf-d483-2c6f-72b0d6b18d83","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"82615272-4897-7ee2-d318-afc6553697d3","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"f802a876-375e-c6f5-fc82-0fbf34015a26","type":"REST2","parameters":{"responseScript":"Outputs.Response = Response.content.data;","requestScript":"//Add custom code to setup the request object before the request\n//is made.\n//\n//*Request.resource     contains the resource path of the request.\n//*Request.method       contains the method, GET, POST, PUT or DELETE.\n//*Request.headers      is a map where you can add additional headers.\n//*Request.parameters   is a map the parameters that will be appended\n//                      to the url.\n//*Request.content      contains the content of the request as a javascript\n//                      object.\n//\nconst tokenInfo = Inputs.token\n\nRequest.headers = {\n    Authorization: `Bearer ${tokenInfo}`,\n}"},"ports":[],"children":[]},{"id":"aebedf8a-c1f5-abb0-262e-f2c2b117bac8","type":"JavaScriptFunction","parameters":{"functionScript":"const API_URL = Inputs.API_URL;\r\nconst status = Inputs.status;\r\nconst documentId = Inputs.documentId;\r\nconst provinceId = Inputs.provinceId;\r\nconst districtId = Inputs.districtId;\r\nconst wardId = Inputs.wardId;\r\n\r\nlet API = API_URL + `/sos-requests?populate=*`;\r\n\r\nif(documentId && documentId !== 'undefined') {\r\n    API += `&filters[Disaster][documentId]=${documentId}`;\r\n}\r\nelse {\r\n    let filters = [\r\n      `filters[Disaster][StartDate][$lte]=${new Date().toISOString()}`,\r\n      `filters[$or][0][Disaster][EndDate][$null]=true`,\r\n      `filters[$or][1][Disaster][EndDate][$gte]=${new Date().toISOString()}`,\r\n    ];\r\n    API += `&${filters.join(\"&\")}`;\r\n}\r\n\r\nif(provinceId && provinceId !== 'undefined') {\r\n  API += `&filters[Province]=${provinceId}`;\r\n}\r\n\r\nif(districtId && districtId !== 'undefined') {\r\n  API += `&filters[District]=${districtId}`;\r\n}\r\n\r\nif(wardId && wardId !== 'undefined') {\r\n  API += `&filters[Ward]=${wardId}`;\r\n}\r\n\r\nOutputs.API = API;"},"ports":[{"name":"in-API_URL","displayName":"API_URL","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-status","displayName":"status","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-documentId","displayName":"documentId","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-provinceId","displayName":"provinceId","plug":"input","type":"*","group":"Inputs","index":7},{"name":"in-districtId","displayName":"districtId","plug":"input","type":"*","group":"Inputs","index":8},{"name":"in-wardId","displayName":"wardId","plug":"input","type":"*","group":"Inputs","index":9},{"name":"out-API","displayName":"API","plug":"output","type":"*","group":"Outputs","index":10}],"children":[]},{"id":"0800eb1f-c27a-05db-74b3-d51dd828078e","type":"/#Logic/Environment","parameters":{},"ports":[],"children":[]},{"id":"b688af90-f6d0-b620-7d55-a9fd8c1f671f","type":"/#Logic/CurrentUser","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"225df4cd-02cf-d483-2c6f-72b0d6b18d83","sourcePort":"documentId","targetId":"aebedf8a-c1f5-abb0-262e-f2c2b117bac8","targetPort":"in-documentId"},{"sourceId":"aebedf8a-c1f5-abb0-262e-f2c2b117bac8","sourcePort":"out-API","targetId":"f802a876-375e-c6f5-fc82-0fbf34015a26","targetPort":"resource"},{"sourceId":"f802a876-375e-c6f5-fc82-0fbf34015a26","sourcePort":"out-Response","targetId":"82615272-4897-7ee2-d318-afc6553697d3","targetPort":"Response"},{"sourceId":"f802a876-375e-c6f5-fc82-0fbf34015a26","sourcePort":"failure","targetId":"82615272-4897-7ee2-d318-afc6553697d3","targetPort":"Failure"},{"sourceId":"f802a876-375e-c6f5-fc82-0fbf34015a26","sourcePort":"success","targetId":"82615272-4897-7ee2-d318-afc6553697d3","targetPort":"Success"},{"sourceId":"0800eb1f-c27a-05db-74b3-d51dd828078e","sourcePort":"API_URL","targetId":"aebedf8a-c1f5-abb0-262e-f2c2b117bac8","targetPort":"in-API_URL"},{"sourceId":"b688af90-f6d0-b620-7d55-a9fd8c1f671f","sourcePort":"token","targetId":"f802a876-375e-c6f5-fc82-0fbf34015a26","targetPort":"in-token"},{"sourceId":"b688af90-f6d0-b620-7d55-a9fd8c1f671f","sourcePort":"token","targetId":"f802a876-375e-c6f5-fc82-0fbf34015a26","targetPort":"fetch"},{"sourceId":"225df4cd-02cf-d483-2c6f-72b0d6b18d83","sourcePort":"provinceId","targetId":"aebedf8a-c1f5-abb0-262e-f2c2b117bac8","targetPort":"in-provinceId"},{"sourceId":"225df4cd-02cf-d483-2c6f-72b0d6b18d83","sourcePort":"wardId","targetId":"aebedf8a-c1f5-abb0-262e-f2c2b117bac8","targetPort":"in-wardId"},{"sourceId":"225df4cd-02cf-d483-2c6f-72b0d6b18d83","sourcePort":"Fetch","targetId":"f802a876-375e-c6f5-fc82-0fbf34015a26","targetPort":"fetch"},{"sourceId":"225df4cd-02cf-d483-2c6f-72b0d6b18d83","sourcePort":"districtId","targetId":"aebedf8a-c1f5-abb0-262e-f2c2b117bac8","targetPort":"in-districtId"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Fetch","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"documentId","type":"*","group":"Inputs","plug":"input","index":1},{"name":"Response","type":"*","plug":"output","index":2},{"name":"provinceId","type":"*","group":"Inputs","plug":"input","index":2},{"name":"districtId","type":"*","group":"Inputs","plug":"input","index":3},{"name":"wardId","type":"*","group":"Inputs","plug":"input","index":4}],"roots":[]},{"name":"/Components/Popup/Request Modal","nodes":[{"id":"39c647c6-36e1-4270-fe95-3427c0050513","type":"NavigationClosePopup","parameters":{"closeActions":"Confirmed"},"ports":[],"children":[]},{"id":"6415b6d3-80af-3683-1334-91a272960a00","type":"Group","parameters":{"visible":true,"scrollEnabled":true,"sizeMode":"explicit","width":{"value":100,"unit":"%","isFixed":false},"height":{"value":100,"unit":"%","isFixed":false},"position":"relative"},"ports":[],"children":[{"id":"b244469c-0e1d-ef52-6c6c-f4fe4e6c3611","type":"Group","parameters":{"backgroundColor":"Grey - 100","boxShadowEnabled":true,"blockTouch":true,"borderRadius":{"value":12,"unit":"px"},"boxShadowBlurRadius":{"value":8,"unit":"px"},"boxShadowSpreadRadius":{"value":0,"unit":"px"},"boxShadowOffsetY":{"value":4,"unit":"px"},"boxShadowColor":"#00000026","zIndex":3,"visible":true,"clip":false,"position":"absolute","sizeMode":"contentHeight","width":{"value":100,"unit":"%"},"minWidth":{"value":320,"unit":"px"},"maxWidth":{"value":700,"unit":"px"},"alignX":"center","alignY":"top","paddingBottom":{"value":24,"unit":"px"},"paddingTop":{"value":24,"unit":"px"},"paddingLeft":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"marginTop":{"value":32,"unit":"px"}},"ports":[],"children":[{"id":"af0e669b-a210-91a1-1c57-e4d5523a8e21","type":"net.noodl.controls.button","parameters":{"position":"absolute","alignX":"right","alignY":"top","backgroundColor":"#5836F500","useIcon":true,"useLabel":false,"iconColor":"Grey - 700","iconIconSource":{"class":"material-icons","code":"close"},"iconSize":{"value":24,"unit":"px"},"paddingLeft":{"value":4,"unit":"px"},"paddingRight":{"value":4,"unit":"px"},"iconSpacing":{"value":0,"unit":"px"},"minWidth":{"value":0,"unit":"px"},"sizeMode":"contentSize","paddingTop":{"value":4,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"},"marginRight":{"value":12,"unit":"px"},"marginTop":{"value":12,"unit":"px"}},"ports":[],"children":[]},{"id":"06149b48-f0c1-7518-122c-945cb291e396","type":"Text","parameters":{"textStyle":"Title Medium","text":"Gửi yêu cầu","marginRight":{"value":24,"unit":"px"}},"ports":[],"children":[]},{"id":"fe384eeb-6c36-eaf6-7a85-102cfd1a2146","type":"net.noodl.visual.columns","parameters":{"layoutString":"1 1"},"ports":[],"children":[{"id":"9e5f66a5-9deb-67af-8a40-8beb36699c5a","type":"Group","parameters":{"flexDirection":"column","rowGap":{"value":12,"unit":"px"},"paddingTop":{"value":12,"unit":"px"}},"ports":[],"children":[{"id":"c7f01474-36d0-a80e-b972-8853637c35f1","type":"net.noodl.controls.options","parameters":{"items":"[\n    {\"Label\":\"Option 1\", \"Value\":\"1\"},\n    {\"Label\":\"Option 2\", \"Value\":\"2\"},\n    {\"Label\":\"Option 3\", \"Value\":\"3\"}\n]","label":"Yêu cầu hỗ trợ cho*","placeholder":"Chọn thiên tai đang diễn ra"},"ports":[],"children":[]},{"id":"92b11fa8-85f5-daeb-bdfb-8a82f6fb1f6f","type":"/Components/Form","parameters":{"Controls":"[\n    {\n        Type:\"Text Input\",\n        Label:\"Họ và tên*\",\n        Property:\"FullName\",\n    },\n    {\n        Type:\"Text Input\",\n        Label:\"Số điện thoại*\",\n        Property:\"PhoneNumber\",\n    },\n    {\n        Type:\"Text Input\",\n        Label:\"Email (nếu có)\",\n        Property:\"Email\",\n        InputType: \"Email\",\n    },\n    {\n        Type:\"Text Input\",\n        Label:\"Số người cần hỗ trợ (nếu có)\",\n        Property:\"PeopleCount\",\n    },\n]"},"ports":[],"children":[]},{"id":"02306700-a947-f2ca-b1e8-ce87b7d9ff73","type":"Group","parameters":{"flexDirection":"column","columnGap":{"value":8,"unit":"px"},"width":{"value":100,"unit":"%","isFixed":true}},"ports":[],"children":[{"id":"9365fa12-b9d2-9c04-2a36-05fba51de8d0","type":"Text","parameters":{"text":"Nhu cầu","sizeMode":"contentHeight","fontSize":{"value":14,"unit":"px"}},"ports":[],"children":[]},{"id":"1a89caf9-ce3e-a73c-84ae-04be5b6ae81c","type":"Group","parameters":{},"ports":[],"children":[{"id":"02c64d63-9c06-d39d-6ece-3f9a13812cfe","type":"net.noodl.visual.columns","parameters":{},"ports":[],"children":[{"id":"253b5ca3-b957-3ea1-ecde-8d313ba1ae05","type":"net.noodl.controls.checkbox","parameters":{"label":"Nước"},"ports":[],"children":[]},{"id":"066360ac-0bf4-84bc-f2ee-f6a316942a8c","type":"net.noodl.controls.checkbox","parameters":{"label":"Đồ ăn"},"ports":[],"children":[]},{"id":"de5c7e80-01d6-4d89-9d7c-bcd780427144","type":"net.noodl.controls.checkbox","parameters":{"label":"Y tế"},"ports":[],"children":[]},{"id":"e7a71da5-a73e-1ee0-0986-1e36aa6af5dd","type":"net.noodl.controls.checkbox","parameters":{"label":"Khác"},"ports":[],"children":[]}]}]}]}]},{"id":"c9c7f4ee-b717-ba54-61da-97f2487281fa","type":"Group","parameters":{"flexDirection":"column","rowGap":{"value":12,"unit":"px"},"paddingTop":{"value":12,"unit":"px"}},"ports":[],"children":[{"id":"516b5985-63ae-6b96-8ac0-e94aace3e5ea","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":16,"unit":"px"},"width":{"value":100,"unit":"%","isFixed":true}},"ports":[],"children":[{"id":"64d93c97-3261-7565-9efc-fe1b96bd534c","type":"net.noodl.visual.columns","parameters":{},"ports":[],"children":[{"id":"2cb9c5d5-e661-975d-c66f-f2ea44ce475d","type":"net.noodl.controls.options","parameters":{"value":"1","items":"[\n    {\"Label\":\"Option 1\", \"Value\":\"1\"},\n    {\"Label\":\"Option 2\", \"Value\":\"2\"},\n    {\"Label\":\"Option 3\", \"Value\":\"3\"}\n]","placeholder":"Chọn","label":"Tỉnh","width":{"value":100,"unit":"%","isFixed":false},"sizeMode":"explicit"},"ports":[],"children":[]},{"id":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","type":"net.noodl.controls.options","parameters":{"placeholder":"Chọn","label":"Huyện","width":{"value":100,"unit":"%","isFixed":false},"sizeMode":"explicit","enabled":false},"ports":[],"children":[]},{"id":"bf3fe88c-3df6-02b6-890c-b37abda91b77","type":"net.noodl.controls.options","parameters":{"label":"Xã","placeholder":"Chọn","width":{"value":100,"unit":"%","isFixed":false},"sizeMode":"explicit","enabled":false},"ports":[],"children":[]}]}]},{"id":"d76150a7-9956-ac1b-ee47-71b1f455b1bf","type":"Group","parameters":{},"ports":[],"children":[{"id":"bbf05d05-1485-e073-c238-82290fb9f52b","type":"Image","parameters":{"minWidth":{"value":100,"unit":"%"},"minHeight":{"value":200,"unit":"px"},"maxWidth":{"value":100,"unit":"%"},"maxHeight":{"value":200,"unit":"px"},"styleCss":"background-color: #CECECE;\r\nobject-fit: cover","borderRadius":{"value":8,"unit":"px"},"src":"https://placehold.co/100x100/38BCF8/FFF?text=UniHand","borderStyle":"solid","borderWidth":{"value":1,"unit":"px"},"borderColor":"Border"},"ports":[],"children":[]},{"id":"f359b4b9-c112-2929-937a-c63d655fe794","type":"Group","parameters":{"position":"absolute","visible":false,"zIndex":2},"ports":[],"children":[{"id":"748f4904-69a7-2512-7562-f769e4e86e08","type":"net.noodl.controls.button","parameters":{"label":"Chọn ảnh","borderStyle":"solid","backgroundColor":"#00000000","borderWidth":{"value":1,"unit":"px"},"color":"#000000","sizeMode":"explicit","useIcon":true,"iconIconSource":{"class":"material-icons","code":"image","codeAsClass":false},"iconColor":"#000000","height":{"value":100,"unit":"%"}},"stateParameters":{"hover":{"backgroundColor":"#00000035"}},"ports":[],"children":[]},{"id":"1d481d57-5c7d-5593-0b7e-5e6fc07fa924","type":"net.noodl.controls.button","parameters":{"label":"","backgroundColor":"#FFFFFF7F","mounted":true,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"delete_outline","codeAsClass":false},"paddingLeft":{"value":8,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"iconColor":"White","borderStyle":"none","borderColor":"Grey - 400","color":"#1666FF","borderWidth":{"value":1.3,"unit":"px"},"height":{"value":36,"unit":"px"},"useLabel":false,"minWidth":{"value":0,"unit":"px"},"borderRadius":{"value":50,"unit":"%"},"iconSize":{"value":22,"unit":"px"},"position":"absolute","marginTop":{"value":12,"unit":"px"},"marginLeft":{"value":12,"unit":"px"},"styleCss":"/* background-color: red; */\r\n\r\nright: 12px;\r\ntop: 0;","sizeMode":"contentSize","paddingTop":{"value":8,"unit":"px"},"paddingBottom":{"value":8,"unit":"px"},"alignX":"right","marginRight":{"value":12,"unit":"px"},"zIndex":3},"stateParameters":{"disabled":{"opacity":0},"hover":{"opacity":0.8,"backgroundColor":"#FFFFFF7F"}},"ports":[],"children":[]}]}]},{"id":"98beac46-0577-6fd9-bca5-385a3f3c73de","type":"net.noodl.controls.textinput","parameters":{"label":"Mô tả","type":"textArea","height":{"value":100,"unit":"px"},"paddingTop":{"value":8,"unit":"px"}},"ports":[],"children":[]},{"id":"6ef3f7c0-751c-cfcb-1c66-9f494aab2dec","type":"net.noodl.controls.button","parameters":{"label":"Gửi yêu cầu","sizeMode":"contentWidth","alignX":"center","minWidth":{"value":100,"unit":"%"},"enabled":false},"ports":[],"children":[]}]}]}]}]},{"id":"d0611b56-b3ca-637b-5efe-154ef7767c1c","type":"States","parameters":{"states":"hide,show","values":"size,opacity,visible","value-hide-size":0,"value-show-size":1,"value-hide-opacity":0,"value-show-opacity":1,"currentState":"hide","transitiondef-hide":{"curve":[0,0,0.58,1],"dur":150,"delay":0},"transitiondef-show":{"curve":[0,0,0.58,1],"dur":150,"delay":0},"value-hide-z-index":-1,"value-show-z-index":3,"type-mount":"boolean","value-hide-mount":false,"value-show-mount":true,"type-visible":"boolean","value-hide-visible":false,"value-show-visible":2},"ports":[],"children":[]},{"id":"9aa98ad2-e2dc-f426-f0a5-6d36f09022c7","type":"/Components/Show Toast","parameters":{"Message":"Gửi yêu cầu thành công","Type":"Success"},"ports":[],"children":[]},{"id":"b0d07aa4-5adc-5fb5-c2a8-4d3746c5b931","type":"/Components/Show Toast","parameters":{"Message":"Gửi yêu cầu không thành công, vui lòng thử lại","Type":"Error"},"ports":[],"children":[]},{"id":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","type":"/#Logic/SOS","parameters":{},"ports":[],"children":[]},{"id":"f7690a33-00b3-e769-e6b0-71f9f0c7d4f0","type":"/#Logic/GetDisasters","parameters":{},"ports":[],"children":[]},{"id":"31d77b1f-e18d-43f9-ba3f-45c2951320a2","type":"JavaScriptFunction","parameters":{"functionScript":"const inputArray = Inputs.ResponseArray;\r\nif(inputArray) {\r\n    Outputs.DropdownOptions = inputArray.map((item, index) => ({\r\n    Label: item.Name,\r\n    Value: item.id.toString()\r\n    }));\r\n}"},"ports":[{"name":"in-ResponseArray","displayName":"ResponseArray","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-DropdownOptions","displayName":"DropdownOptions","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"ecad2343-e5bb-64ce-8eff-e886172a2613","type":"Model2","parameters":{"properties":"FullName,PhoneNumber,Email"},"ports":[],"children":[]},{"id":"472c54b2-433e-f84f-c7d4-61de87f938cd","type":"JavaScriptFunction","parameters":{"functionScript":"const errors = [];\r\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\nif (!Inputs.FullName || Inputs.FullName.trim() === '') {\r\n  errors.push({\r\n    Property: 'FullName',\r\n    Error: 'Vui lòng nhập tên của bạn',\r\n  });\r\n}\r\n\r\nif (!Inputs.PhoneNumber || Inputs.PhoneNumber.trim() === '') {\r\n  errors.push({\r\n    Property: 'PhoneNumber',\r\n    Error: 'Vui lòng nhập số điện thoại',\r\n  });\r\n} else if (!/^\\d+$/.test(Inputs.PhoneNumber.trim())) {\r\n  errors.push({\r\n    Property: 'PhoneNumber', \r\n    Error: 'Số điện thoại chỉ được nhập số',\r\n  });\r\n}\r\n\r\nif(Inputs.Email) {\r\n  if (!emailRegex.test(Inputs.Email)) {\r\n  errors.push({\r\n    Property: 'Email',\r\n    Error: 'Email không hợp lệ.',\r\n  });\r\n}\r\n}\r\n\r\nOutputs.IsError = errors.length === 0;\r\nOutputs.Errors = errors;"},"ports":[{"name":"in-FullName","displayName":"FullName","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-PhoneNumber","displayName":"PhoneNumber","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Email","displayName":"Email","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-IsError","displayName":"IsError","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-Errors","displayName":"Errors","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"b16b0ceb-5007-4e3e-a8e7-51ceb6770c9d","type":"Model2","parameters":{"properties":"FullName,PhoneNumber,Email,PeopleCount"},"ports":[],"children":[]},{"id":"e6b4c1bc-1c21-2584-59a1-d42e8497310b","type":"/#Logic/GetProvinces","parameters":{},"ports":[],"children":[]},{"id":"fc72403a-a0a7-e767-0733-177c2b025940","type":"JavaScriptFunction","parameters":{"functionScript":"const response = Inputs.Response;\r\n\r\nif (Array.isArray(response)) {\r\n    const options = response.map((item, index) => ({\r\n        Label: item.FullName,\r\n        Value: item.id.toString()\r\n    }));\r\n    Outputs.Options = options;\r\n} else {\r\n    Outputs.Options = [];\r\n}\r\n"},"ports":[{"name":"in-Response","displayName":"Response","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Options","displayName":"Options","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"292046a0-6a17-f5bd-d553-2e56b0f1d935","type":"Model2","parameters":{"modelId":"Location","properties":"lat,lng"},"ports":[],"children":[]},{"id":"36164f65-29c7-8436-27fc-1ad789a38b2b","type":"/#Logic/ConvertLocation","parameters":{},"ports":[],"children":[]},{"id":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","type":"JavaScriptFunction","parameters":{"functionScript":"const response = Inputs.Response;\r\n\r\nif (response && response.Province && response.District && response.Ward) {\r\n    Outputs.ProvinceId = response.Province.id;\r\n    Outputs.DistrictId = response.District.id;\r\n    Outputs.WardId = response.Ward.id;\r\n} else {\r\n    Outputs.ProvinceId = null;\r\n    Outputs.DistrictId = null;\r\n    Outputs.WardId = null;\r\n}"},"ports":[{"name":"in-Response","displayName":"Response","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-ProvinceId","displayName":"ProvinceId","plug":"output","type":"*","group":"Outputs","index":5},{"name":"out-DistrictId","displayName":"DistrictId","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-WardId","displayName":"WardId","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"81a453ef-0ad4-9561-0d69-d1d59533cf54","type":"/#Logic/GetDistricts","parameters":{},"ports":[],"children":[]},{"id":"41fba4c8-cf9e-8c45-5851-8261d8da563a","type":"JavaScriptFunction","parameters":{"functionScript":"const response = Inputs.Response;\r\n\r\nif (Array.isArray(response)) {\r\n    const options = response.map((item, index) => ({\r\n        Label: item.FullName,\r\n        Value: item.id.toString() \r\n    }));\r\n    Outputs.Options = options;\r\n} else {\r\n    Outputs.Options = [];\r\n}\r\n"},"ports":[{"name":"in-Response","displayName":"Response","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Options","displayName":"Options","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"dbc14437-ad2a-d73c-f99d-276bf6e2cc20","type":"/#Logic/GetWards","parameters":{},"ports":[],"children":[]},{"id":"d7e369f3-6f04-3a82-6334-206f4d15acc2","type":"JavaScriptFunction","parameters":{"functionScript":"const response = Inputs.Response;\r\n\r\nif (Array.isArray(response)) {\r\n    const options = response.map((item, index) => ({\r\n        Label: item.FullName,\r\n        Value: item.id.toString() \r\n    }));\r\n    Outputs.Options = options;\r\n} else {\r\n    Outputs.Options = [];\r\n}\r\n"},"ports":[{"name":"in-Response","displayName":"Response","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Options","displayName":"Options","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"841556ac-0007-5b30-1139-4cecb0ad63d2","type":"Expression","parameters":{"expression":"width > 400"},"ports":[],"children":[]},{"id":"98122e7f-dfd2-d7b0-df5a-e5e33eb2fc0c","type":"States","parameters":{"values":"Layout String","states":"Is Single Column,Is Double Column","useTransitions":false,"type-Layout String":"string","value-Is Single Column-Layout String":"1 1","value-Is Double Column-Layout String":"1 1 1 1"},"ports":[],"children":[]},{"id":"e9197062-55d0-49da-b3f1-d87de892c236","type":"Expression","parameters":{"expression":"width > 400\r\n"},"ports":[],"children":[]},{"id":"9d680b28-5648-c85b-9b60-79719a0e3251","type":"States","parameters":{"values":"Layout String","states":"Is Single Column,Is Tripble Column","useTransitions":false,"type-Layout String":"string","value-Is Single Column-Layout String":"1","value-Is Tripble Column-Layout String":"1 1 1"},"ports":[],"children":[]},{"id":"c31361df-88e8-9109-a4eb-5752ad78abca","type":"JavaScriptFunction","parameters":{"functionScript":"const file = Inputs.file\r\nconst API_URL = Inputs.API_URL;\r\nconst url = API_URL + '/upload';\r\n\r\nif (file) {\r\n    const formData = new FormData();\r\n\r\n    formData.append(\"files\", file);\r\n\r\n    fetch(url, {\r\n        method: \"POST\",\r\n        body: formData,\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n        if (Array.isArray(data)) {\r\n            const ids = data.map(item => item.id);\r\n            Outputs.Ids = ids;\r\n        } else {\r\n            Outputs.Ids = [];\r\n        }\r\n        Outputs.Success()\r\n    })\r\n    .catch((error) => {\r\n        Outputs.Failute()\r\n    });\r\n}\r\nelse {\r\n    Outputs.Cancel();\r\n}"},"ports":[{"name":"in-file","displayName":"file","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-API_URL","displayName":"API_URL","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Failute","displayName":"Failute","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Cancel","displayName":"Cancel","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-Ids","displayName":"Ids","plug":"output","type":"*","group":"Outputs","index":9}],"children":[]},{"id":"545dd7c8-1e23-8b49-e671-eed0d282a465","type":"Open File Picker","parameters":{"acceptedFileTypes":"image/*"},"ports":[],"children":[]},{"id":"9c3896e5-fbf3-6ac1-1569-ba3e71f73951","type":"Expression","parameters":{"expression":"width > 700"},"ports":[],"children":[]},{"id":"124d8875-3048-a16c-c1a1-f06abedfc125","type":"States","parameters":{"values":"Layout String","states":"Is Single Column,Is Double Column","useTransitions":false,"type-Layout String":"string","value-Is Single Column-Layout String":"1","value-Is Double Column-Layout String":"1 1"},"ports":[],"children":[]},{"id":"951da391-a2a2-822f-61bf-1386e9533f03","type":"JavaScriptFunction","parameters":{"functionScript":"const file = Inputs.file\r\n\r\nif(file) {\r\n    const imageUrl = URL.createObjectURL(file);\r\n    Outputs.ImageUrl = imageUrl;\r\n}"},"ports":[{"name":"in-file","displayName":"file","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-ImageUrl","displayName":"ImageUrl","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"def0dce8-d480-65fe-2c93-00d906cddd21","type":"JavaScriptFunction","parameters":{"functionScript":"const inputArray = Inputs.ResponseArray;\r\nif (inputArray && inputArray.length > 0) {\r\n    const lastItem = inputArray[inputArray.length - 1];\r\n    Outputs.DefautValue = lastItem.id.toString();\r\n}\r\n"},"ports":[{"name":"in-ResponseArray","displayName":"ResponseArray","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-DefautValue","displayName":"DefautValue","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"24d977e1-5351-413a-4b4a-616010709e27","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n  Value: \"string\"\r\n};\r\n\r\nScript.Outputs = {\r\n  Done: \"signal\",\r\n  Value: \"string\",\r\n  NullValue: 'number',\r\n  EmptyArr: 'array',\r\n};\r\n\r\nfunction onChange() {\r\n  Script.Outputs.Value = Script.Inputs.Value;\r\n  Script.Outputs.NullValue = null;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nScript.Setters.Value = onChange;"},"ports":[{"name":"Value","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"Done","type":{"name":"signal"},"plug":"output","group":"Outputs","index":6},{"name":"Value","type":{"name":"string"},"plug":"output","group":"Outputs","index":7},{"name":"NullValue","type":{"name":"number"},"plug":"output","group":"Outputs","index":8},{"name":"EmptyArr","type":{"name":"array"},"plug":"output","group":"Outputs","index":9}],"children":[]},{"id":"65be63b7-3188-5fb3-d069-48f1f77c1b11","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n  Value: \"string\"\r\n};\r\n\r\nScript.Outputs = {\r\n  Done: \"signal\",\r\n  Value: \"string\",\r\n  NullValue: 'number',\r\n  EmptyArr: 'array',\r\n};\r\n\r\nfunction onChange() {\r\n  Script.Outputs.Value = Script.Inputs.Value;\r\n  Script.Outputs.NullValue = null;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nScript.Setters.Value = onChange;"},"ports":[{"name":"Value","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"Done","type":{"name":"signal"},"plug":"output","group":"Outputs","index":6},{"name":"Value","type":{"name":"string"},"plug":"output","group":"Outputs","index":7},{"name":"NullValue","type":{"name":"number"},"plug":"output","group":"Outputs","index":8},{"name":"EmptyArr","type":{"name":"array"},"plug":"output","group":"Outputs","index":9}],"children":[]},{"id":"fc5e74ed-a969-aab7-bd6c-d735186dd28d","type":"States","parameters":{"states":"onLoadding,Default","values":"Label","type-Enabaled":"boolean","type-Label":"string","currentState":"Default","value-onLoadding-Label":"Đang gửi ...","value-Default-Label":"Gửi yêu cầu"},"ports":[],"children":[]},{"id":"326366e8-bc7a-86cf-cd11-57ed393f250e","type":"JavaScriptFunction","parameters":{"functionScript":"Outputs.Dang = 2"},"ports":[{"name":"out-Dang","displayName":"Dang","plug":"output","type":"*","group":"Outputs","index":4}],"children":[]},{"id":"5f39b2d0-5156-a835-4058-6477fc375468","type":"/#Logic/Environment","parameters":{},"ports":[],"children":[]},{"id":"cb909cc1-e63a-7e45-033f-0eefdd551cf7","type":"States","parameters":{"states":"open,close"},"ports":[],"children":[]},{"id":"14604613-214f-4748-80f2-3b69c234c95f","type":"JavaScriptFunction","parameters":{"functionScript":"function clearOutputs() {\r\n  Outputs.file = {};\r\n  Outputs.image = 'https://placehold.co/100x100/38BCF8/FFF?text=UniHand'\r\n}\r\n\r\nclearOutputs();"},"ports":[{"name":"out-file","displayName":"file","plug":"output","type":"*","group":"Outputs","index":4},{"name":"out-image","displayName":"image","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"937b049a-6c54-073c-757b-f9278962407c","type":"JavaScriptFunction","parameters":{"functionScript":"const file = Inputs.file;\r\n\r\nconst placeholderImage = 'https://placehold.co/100x100/38BCF8/FFF?text=UniHand';\r\nconst validImageTypes = ['image/gif', 'image/jpeg', 'image/png'];\r\n\r\nif (file && validImageTypes.includes(file.type)) {\r\n  const imageUrl = URL.createObjectURL(file);\r\n  Outputs.image = imageUrl;\r\n  Outputs.file = file;\r\n} else {\r\n  Outputs.image = placeholderImage;\r\n  Outputs.file = null;\r\n}\r\n"},"ports":[{"name":"in-file","displayName":"file","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-image","displayName":"image","plug":"output","type":"*","group":"Outputs","index":5},{"name":"out-file","displayName":"file","plug":"output","type":"*","group":"Outputs","index":6}],"children":[]}],"connections":[{"sourceId":"6415b6d3-80af-3683-1334-91a272960a00","sourcePort":"didMount","targetId":"d0611b56-b3ca-637b-5efe-154ef7767c1c","targetPort":"to-show"},{"sourceId":"d0611b56-b3ca-637b-5efe-154ef7767c1c","sourcePort":"size","targetId":"b244469c-0e1d-ef52-6c6c-f4fe4e6c3611","targetPort":"transformScale"},{"sourceId":"d0611b56-b3ca-637b-5efe-154ef7767c1c","sourcePort":"opacity","targetId":"b244469c-0e1d-ef52-6c6c-f4fe4e6c3611","targetPort":"opacity"},{"sourceId":"31d77b1f-e18d-43f9-ba3f-45c2951320a2","sourcePort":"out-DropdownOptions","targetId":"c7f01474-36d0-a80e-b972-8853637c35f1","targetPort":"items"},{"sourceId":"c7f01474-36d0-a80e-b972-8853637c35f1","sourcePort":"value","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Disaster"},{"sourceId":"98beac46-0577-6fd9-bca5-385a3f3c73de","sourcePort":"onTextChanged","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"RequestDescription"},{"sourceId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","sourcePort":"Success","targetId":"9aa98ad2-e2dc-f426-f0a5-6d36f09022c7","targetPort":"Do"},{"sourceId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","sourcePort":"Failure","targetId":"b0d07aa4-5adc-5fb5-c2a8-4d3746c5b931","targetPort":"Do"},{"sourceId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","sourcePort":"Success","targetId":"39c647c6-36e1-4270-fe95-3427c0050513","targetPort":"closeAction-Confirmed"},{"sourceId":"92b11fa8-85f5-daeb-bdfb-8a82f6fb1f6f","sourcePort":"Object Id","targetId":"ecad2343-e5bb-64ce-8eff-e886172a2613","targetPort":"modelId"},{"sourceId":"ecad2343-e5bb-64ce-8eff-e886172a2613","sourcePort":"prop-PhoneNumber","targetId":"472c54b2-433e-f84f-c7d4-61de87f938cd","targetPort":"in-PhoneNumber"},{"sourceId":"472c54b2-433e-f84f-c7d4-61de87f938cd","sourcePort":"out-Errors","targetId":"92b11fa8-85f5-daeb-bdfb-8a82f6fb1f6f","targetPort":"Errors"},{"sourceId":"92b11fa8-85f5-daeb-bdfb-8a82f6fb1f6f","sourcePort":"Object Id","targetId":"b16b0ceb-5007-4e3e-a8e7-51ceb6770c9d","targetPort":"modelId"},{"sourceId":"b16b0ceb-5007-4e3e-a8e7-51ceb6770c9d","sourcePort":"prop-FullName","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"FullName"},{"sourceId":"b16b0ceb-5007-4e3e-a8e7-51ceb6770c9d","sourcePort":"prop-PhoneNumber","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"PhoneNumber"},{"sourceId":"ecad2343-e5bb-64ce-8eff-e886172a2613","sourcePort":"prop-FullName","targetId":"472c54b2-433e-f84f-c7d4-61de87f938cd","targetPort":"in-FullName"},{"sourceId":"ecad2343-e5bb-64ce-8eff-e886172a2613","sourcePort":"prop-Email","targetId":"472c54b2-433e-f84f-c7d4-61de87f938cd","targetPort":"in-Email"},{"sourceId":"b16b0ceb-5007-4e3e-a8e7-51ceb6770c9d","sourcePort":"prop-Email","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Email"},{"sourceId":"b16b0ceb-5007-4e3e-a8e7-51ceb6770c9d","sourcePort":"prop-PeopleCount","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"PeopleCount"},{"sourceId":"e6b4c1bc-1c21-2584-59a1-d42e8497310b","sourcePort":"Response","targetId":"fc72403a-a0a7-e767-0733-177c2b025940","targetPort":"in-Response"},{"sourceId":"fc72403a-a0a7-e767-0733-177c2b025940","sourcePort":"out-Options","targetId":"2cb9c5d5-e661-975d-c66f-f2ea44ce475d","targetPort":"items"},{"sourceId":"6415b6d3-80af-3683-1334-91a272960a00","sourcePort":"didMount","targetId":"e6b4c1bc-1c21-2584-59a1-d42e8497310b","targetPort":"Fetch"},{"sourceId":"292046a0-6a17-f5bd-d553-2e56b0f1d935","sourcePort":"prop-lat","targetId":"36164f65-29c7-8436-27fc-1ad789a38b2b","targetPort":"lat"},{"sourceId":"292046a0-6a17-f5bd-d553-2e56b0f1d935","sourcePort":"prop-lng","targetId":"36164f65-29c7-8436-27fc-1ad789a38b2b","targetPort":"lng"},{"sourceId":"36164f65-29c7-8436-27fc-1ad789a38b2b","sourcePort":"Response","targetId":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","targetPort":"in-Response"},{"sourceId":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","sourcePort":"out-ProvinceId","targetId":"2cb9c5d5-e661-975d-c66f-f2ea44ce475d","targetPort":"value"},{"sourceId":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","sourcePort":"out-DistrictId","targetId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","targetPort":"value"},{"sourceId":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","sourcePort":"out-WardId","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"value"},{"sourceId":"2cb9c5d5-e661-975d-c66f-f2ea44ce475d","sourcePort":"value","targetId":"81a453ef-0ad4-9561-0d69-d1d59533cf54","targetPort":"ProvinceId"},{"sourceId":"81a453ef-0ad4-9561-0d69-d1d59533cf54","sourcePort":"Response","targetId":"41fba4c8-cf9e-8c45-5851-8261d8da563a","targetPort":"in-Response"},{"sourceId":"41fba4c8-cf9e-8c45-5851-8261d8da563a","sourcePort":"out-Options","targetId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","targetPort":"items"},{"sourceId":"6415b6d3-80af-3683-1334-91a272960a00","sourcePort":"didMount","targetId":"36164f65-29c7-8436-27fc-1ad789a38b2b","targetPort":"Fetch"},{"sourceId":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","sourcePort":"out-ProvinceId","targetId":"81a453ef-0ad4-9561-0d69-d1d59533cf54","targetPort":"Fetch"},{"sourceId":"dbc14437-ad2a-d73c-f99d-276bf6e2cc20","sourcePort":"Response","targetId":"d7e369f3-6f04-3a82-6334-206f4d15acc2","targetPort":"in-Response"},{"sourceId":"d7e369f3-6f04-3a82-6334-206f4d15acc2","sourcePort":"out-Options","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"items"},{"sourceId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","sourcePort":"value","targetId":"dbc14437-ad2a-d73c-f99d-276bf6e2cc20","targetPort":"DistrictsId"},{"sourceId":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","sourcePort":"out-DistrictId","targetId":"dbc14437-ad2a-d73c-f99d-276bf6e2cc20","targetPort":"Fetch"},{"sourceId":"af0e669b-a210-91a1-1c57-e4d5523a8e21","sourcePort":"onClick","targetId":"39c647c6-36e1-4270-fe95-3427c0050513","targetPort":"close"},{"sourceId":"de5c7e80-01d6-4d89-9d7c-bcd780427144","sourcePort":"checked","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"NeedMedical"},{"sourceId":"066360ac-0bf4-84bc-f2ee-f6a316942a8c","sourcePort":"checked","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"NeedFood"},{"sourceId":"253b5ca3-b957-3ea1-ecde-8d313ba1ae05","sourcePort":"checked","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"NeedWater"},{"sourceId":"841556ac-0007-5b30-1139-4cecb0ad63d2","sourcePort":"isTrueEv","targetId":"98122e7f-dfd2-d7b0-df5a-e5e33eb2fc0c","targetPort":"to-Is Double Column"},{"sourceId":"841556ac-0007-5b30-1139-4cecb0ad63d2","sourcePort":"isFalseEv","targetId":"98122e7f-dfd2-d7b0-df5a-e5e33eb2fc0c","targetPort":"to-Is Single Column"},{"sourceId":"1a89caf9-ce3e-a73c-84ae-04be5b6ae81c","sourcePort":"boundingWidth","targetId":"841556ac-0007-5b30-1139-4cecb0ad63d2","targetPort":"width"},{"sourceId":"98122e7f-dfd2-d7b0-df5a-e5e33eb2fc0c","sourcePort":"Layout String","targetId":"02c64d63-9c06-d39d-6ece-3f9a13812cfe","targetPort":"layoutString"},{"sourceId":"516b5985-63ae-6b96-8ac0-e94aace3e5ea","sourcePort":"boundingWidth","targetId":"e9197062-55d0-49da-b3f1-d87de892c236","targetPort":"width"},{"sourceId":"9d680b28-5648-c85b-9b60-79719a0e3251","sourcePort":"Layout String","targetId":"64d93c97-3261-7565-9efc-fe1b96bd534c","targetPort":"layoutString"},{"sourceId":"e9197062-55d0-49da-b3f1-d87de892c236","sourcePort":"isFalseEv","targetId":"9d680b28-5648-c85b-9b60-79719a0e3251","targetPort":"to-Is Single Column"},{"sourceId":"e9197062-55d0-49da-b3f1-d87de892c236","sourcePort":"isTrueEv","targetId":"9d680b28-5648-c85b-9b60-79719a0e3251","targetPort":"to-Is Tripble Column"},{"sourceId":"292046a0-6a17-f5bd-d553-2e56b0f1d935","sourcePort":"prop-lat","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Latitude"},{"sourceId":"292046a0-6a17-f5bd-d553-2e56b0f1d935","sourcePort":"prop-lng","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Longitude"},{"sourceId":"9c3896e5-fbf3-6ac1-1569-ba3e71f73951","sourcePort":"isTrue","targetId":"124d8875-3048-a16c-c1a1-f06abedfc125","targetPort":"to-Is Double Column"},{"sourceId":"9c3896e5-fbf3-6ac1-1569-ba3e71f73951","sourcePort":"isFalseEv","targetId":"124d8875-3048-a16c-c1a1-f06abedfc125","targetPort":"to-Is Single Column"},{"sourceId":"124d8875-3048-a16c-c1a1-f06abedfc125","sourcePort":"Layout String","targetId":"fe384eeb-6c36-eaf6-7a85-102cfd1a2146","targetPort":"layoutString"},{"sourceId":"6415b6d3-80af-3683-1334-91a272960a00","sourcePort":"boundingWidth","targetId":"9c3896e5-fbf3-6ac1-1569-ba3e71f73951","targetPort":"width"},{"sourceId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","sourcePort":"Failure","targetId":"39c647c6-36e1-4270-fe95-3427c0050513","targetPort":"close"},{"sourceId":"2cb9c5d5-e661-975d-c66f-f2ea44ce475d","sourcePort":"value","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Province"},{"sourceId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","sourcePort":"value","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"District"},{"sourceId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","sourcePort":"value","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Ward"},{"sourceId":"6ef3f7c0-751c-cfcb-1c66-9f494aab2dec","sourcePort":"onClick","targetId":"c31361df-88e8-9109-a4eb-5752ad78abca","targetPort":"run"},{"sourceId":"c31361df-88e8-9109-a4eb-5752ad78abca","sourcePort":"out-Success","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Fetch"},{"sourceId":"c31361df-88e8-9109-a4eb-5752ad78abca","sourcePort":"out-Failute","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Fetch"},{"sourceId":"c31361df-88e8-9109-a4eb-5752ad78abca","sourcePort":"out-Ids","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"DamageImage"},{"sourceId":"545dd7c8-1e23-8b49-e671-eed0d282a465","sourcePort":"file","targetId":"c31361df-88e8-9109-a4eb-5752ad78abca","targetPort":"in-file"},{"sourceId":"545dd7c8-1e23-8b49-e671-eed0d282a465","sourcePort":"file","targetId":"951da391-a2a2-822f-61bf-1386e9533f03","targetPort":"in-file"},{"sourceId":"def0dce8-d480-65fe-2c93-00d906cddd21","sourcePort":"out-DefautValue","targetId":"c7f01474-36d0-a80e-b972-8853637c35f1","targetPort":"value"},{"sourceId":"c31361df-88e8-9109-a4eb-5752ad78abca","sourcePort":"out-Cancel","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Fetch"},{"sourceId":"41fba4c8-cf9e-8c45-5851-8261d8da563a","sourcePort":"out-Options","targetId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","targetPort":"enabled"},{"sourceId":"d7e369f3-6f04-3a82-6334-206f4d15acc2","sourcePort":"out-Options","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"enabled"},{"sourceId":"2cb9c5d5-e661-975d-c66f-f2ea44ce475d","sourcePort":"value","targetId":"24d977e1-5351-413a-4b4a-616010709e27","targetPort":"Value"},{"sourceId":"24d977e1-5351-413a-4b4a-616010709e27","sourcePort":"NullValue","targetId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","targetPort":"value"},{"sourceId":"24d977e1-5351-413a-4b4a-616010709e27","sourcePort":"NullValue","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"value"},{"sourceId":"24d977e1-5351-413a-4b4a-616010709e27","sourcePort":"EmptyArr","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"items"},{"sourceId":"24d977e1-5351-413a-4b4a-616010709e27","sourcePort":"EmptyArr","targetId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","targetPort":"items"},{"sourceId":"24d977e1-5351-413a-4b4a-616010709e27","sourcePort":"Done","targetId":"81a453ef-0ad4-9561-0d69-d1d59533cf54","targetPort":"Fetch"},{"sourceId":"65be63b7-3188-5fb3-d069-48f1f77c1b11","sourcePort":"Done","targetId":"dbc14437-ad2a-d73c-f99d-276bf6e2cc20","targetPort":"Fetch"},{"sourceId":"65be63b7-3188-5fb3-d069-48f1f77c1b11","sourcePort":"EmptyArr","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"items"},{"sourceId":"65be63b7-3188-5fb3-d069-48f1f77c1b11","sourcePort":"NullValue","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"value"},{"sourceId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","sourcePort":"value","targetId":"65be63b7-3188-5fb3-d069-48f1f77c1b11","targetPort":"Value"},{"sourceId":"6ef3f7c0-751c-cfcb-1c66-9f494aab2dec","sourcePort":"onClick","targetId":"fc5e74ed-a969-aab7-bd6c-d735186dd28d","targetPort":"to-onLoadding"},{"sourceId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","sourcePort":"Success","targetId":"fc5e74ed-a969-aab7-bd6c-d735186dd28d","targetPort":"to-Default"},{"sourceId":"326366e8-bc7a-86cf-cd11-57ed393f250e","sourcePort":"out-Dang","targetId":"f7690a33-00b3-e769-e6b0-71f9f0c7d4f0","targetPort":"status"},{"sourceId":"6415b6d3-80af-3683-1334-91a272960a00","sourcePort":"didMount","targetId":"f7690a33-00b3-e769-e6b0-71f9f0c7d4f0","targetPort":"Do"},{"sourceId":"f7690a33-00b3-e769-e6b0-71f9f0c7d4f0","sourcePort":"Data","targetId":"31d77b1f-e18d-43f9-ba3f-45c2951320a2","targetPort":"in-ResponseArray"},{"sourceId":"f7690a33-00b3-e769-e6b0-71f9f0c7d4f0","sourcePort":"Data","targetId":"def0dce8-d480-65fe-2c93-00d906cddd21","targetPort":"in-ResponseArray"},{"sourceId":"5f39b2d0-5156-a835-4058-6477fc375468","sourcePort":"API_URL","targetId":"c31361df-88e8-9109-a4eb-5752ad78abca","targetPort":"in-API_URL"},{"sourceId":"472c54b2-433e-f84f-c7d4-61de87f938cd","sourcePort":"out-IsError","targetId":"6ef3f7c0-751c-cfcb-1c66-9f494aab2dec","targetPort":"enabled"},{"sourceId":"fc5e74ed-a969-aab7-bd6c-d735186dd28d","sourcePort":"Label","targetId":"6ef3f7c0-751c-cfcb-1c66-9f494aab2dec","targetPort":"label"},{"sourceId":"951da391-a2a2-822f-61bf-1386e9533f03","sourcePort":"out-ImageUrl","targetId":"937b049a-6c54-073c-757b-f9278962407c","targetPort":"in-file"},{"sourceId":"14604613-214f-4748-80f2-3b69c234c95f","sourcePort":"out-file","targetId":"937b049a-6c54-073c-757b-f9278962407c","targetPort":"in-file"},{"sourceId":"1d481d57-5c7d-5593-0b7e-5e6fc07fa924","sourcePort":"onClick","targetId":"14604613-214f-4748-80f2-3b69c234c95f","targetPort":"run"},{"sourceId":"748f4904-69a7-2512-7562-f769e4e86e08","sourcePort":"onClick","targetId":"545dd7c8-1e23-8b49-e671-eed0d282a465","targetPort":"open"},{"sourceId":"cb909cc1-e63a-7e45-033f-0eefdd551cf7","sourcePort":"at-open","targetId":"f359b4b9-c112-2929-937a-c63d655fe794","targetPort":"visible"},{"sourceId":"951da391-a2a2-822f-61bf-1386e9533f03","sourcePort":"out-ImageUrl","targetId":"bbf05d05-1485-e073-c238-82290fb9f52b","targetPort":"src"},{"sourceId":"14604613-214f-4748-80f2-3b69c234c95f","sourcePort":"out-image","targetId":"bbf05d05-1485-e073-c238-82290fb9f52b","targetPort":"src"},{"sourceId":"937b049a-6c54-073c-757b-f9278962407c","sourcePort":"out-image","targetId":"bbf05d05-1485-e073-c238-82290fb9f52b","targetPort":"src"},{"sourceId":"d76150a7-9956-ac1b-ee47-71b1f455b1bf","sourcePort":"hoverEnd","targetId":"cb909cc1-e63a-7e45-033f-0eefdd551cf7","targetPort":"to-close"},{"sourceId":"d76150a7-9956-ac1b-ee47-71b1f455b1bf","sourcePort":"hoverStart","targetId":"cb909cc1-e63a-7e45-033f-0eefdd551cf7","targetPort":"to-open"}],"ports":[],"roots":["6415b6d3-80af-3683-1334-91a272960a00"]},{"name":"/#Logic/SOS","nodes":[{"id":"b1868a68-c914-2673-8a98-08d7fd6d215a","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"3d6d61c3-8dee-66bb-b45e-9ba3cff41978","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"ff70af20-f8c5-0ae9-15cb-fd6659901461","type":"REST2","parameters":{"responseScript":"console.log(Response);\n\nif (Response.status === 201) {\n    Outputs.Success = true; \n    Outputs.Data = Response.content; \n} else {\n    Outputs.Failure = true; \n    Outputs.Data = null;\n}\n","method":"POST","requestScript":"//Add custom code to setup the request object before the request\n//is made.\n//\n//*Request.resource     contains the resource path of the request.\n//*Request.method       contains the method, GET, POST, PUT or DELETE.\n//*Request.headers      is a map where you can add additional headers.\n//*Request.parameters   is a map the parameters that will be appended\n//                      to the url.\n//*Request.content      contains the content of the request as a javascript\n//                      object.\n//\n\nRequest.content = {\n    data: {\n        \"FullName\": Inputs.FullName,\n        \"RequestDescription\": Inputs.RequestDescription,\n        \"PeopleCount\": parseInt(Inputs.PeopleCount) || 1,\n        \"NeedWater\": Inputs.NeedWater,\n        \"NeedFood\": Inputs.NeedFood,\n        \"NeedMedical\": Inputs.NeedMedical,\n        \"PhoneNumber\": Inputs.PhoneNumber,\n        \"Email\": Inputs.Email,\n        \"Location\": {\n            \"lat\": parseFloat(Inputs.Latitude),\n            \"lng\": parseFloat(Inputs.Longitude)\n        },\n        \"Province\": parseInt(Inputs.Province),\n        \"District\": parseInt(Inputs.District),\n        \"Ward\": parseInt(Inputs.Ward),\n        \"DamageImage\": Inputs.DamageImage,\n        \"Disaster\": parseInt(Inputs.Disaster),\n    }\n};\n"},"ports":[],"children":[]},{"id":"7b13cf07-4da0-5dad-b40b-32a94ed329ab","type":"/#Logic/Environment","parameters":{},"ports":[],"children":[]},{"id":"38978442-0466-8037-d5a0-93f36d866cc0","type":"JavaScriptFunction","parameters":{"functionScript":"Outputs.URL = Inputs.API_URL \r\n    + '/sos-requests';"},"ports":[{"name":"in-API_URL","displayName":"API_URL","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-URL","displayName":"URL","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]}],"connections":[{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Fetch","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"fetch"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"FullName","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-FullName"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"RequestDescription","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-RequestDescription"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"PeopleCount","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-PeopleCount"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"NeedMedical","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-NeedMedical"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"PhoneNumber","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-PhoneNumber"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Email","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-Email"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"NeedFood","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-NeedFood"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"NeedWater","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-NeedWater"},{"sourceId":"7b13cf07-4da0-5dad-b40b-32a94ed329ab","sourcePort":"API_URL","targetId":"38978442-0466-8037-d5a0-93f36d866cc0","targetPort":"in-API_URL"},{"sourceId":"38978442-0466-8037-d5a0-93f36d866cc0","sourcePort":"out-URL","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"resource"},{"sourceId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","sourcePort":"out-Data","targetId":"3d6d61c3-8dee-66bb-b45e-9ba3cff41978","targetPort":"Response"},{"sourceId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","sourcePort":"out-Success","targetId":"3d6d61c3-8dee-66bb-b45e-9ba3cff41978","targetPort":"Success"},{"sourceId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","sourcePort":"out-Failure","targetId":"3d6d61c3-8dee-66bb-b45e-9ba3cff41978","targetPort":"Failure"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Latitude","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-Latitude"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Longitude","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-Longitude"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Disaster","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-Disaster"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"DamageImage","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-DamageImage"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Ward","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-Ward"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"District","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-District"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Province","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-Province"}],"ports":[{"name":"Success","type":"*","plug":"output","index":0},{"name":"Failure","type":"*","plug":"output","index":1},{"name":"Fetch","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":1},{"name":"Response","type":"*","plug":"output","index":2},{"name":"FullName","type":"*","group":"Inputs","plug":"input","index":2},{"name":"Message","type":"*","plug":"output","index":3},{"name":"RequestDescription","type":"*","group":"Inputs","plug":"input","index":3},{"name":"PeopleCount","type":"*","group":"Inputs","plug":"input","index":4},{"name":"NeedWater","type":"*","group":"Inputs","plug":"input","index":5},{"name":"NeedFood","type":"*","group":"Inputs","plug":"input","index":6},{"name":"NeedMedical","type":"*","group":"Inputs","plug":"input","index":7},{"name":"PhoneNumber","type":"*","group":"Inputs","plug":"input","index":8},{"name":"Email","type":"*","group":"Inputs","plug":"input","index":9},{"name":"Latitude","type":"*","group":"Inputs","plug":"input","index":13},{"name":"Longitude","type":"*","group":"Inputs","plug":"input","index":14},{"name":"Disaster","type":"*","group":"Inputs","plug":"input","index":15},{"name":"DamageImage","type":"*","group":"Inputs","plug":"input","index":16},{"name":"Ward","type":"*","group":"Inputs","plug":"input","index":17},{"name":"District","type":"*","group":"Inputs","plug":"input","index":18},{"name":"Province","type":"*","group":"Inputs","plug":"input","index":19}],"roots":[]}]