[{"name":"/Page/home","nodes":[{"id":"975881a3-e3d2-ba31-755a-6c63b54fe66d","type":"Page","parameters":{"title":"Trang chủ","urlPath":"/home"},"ports":[],"children":[{"id":"b9dfffce-c62e-be4e-cea6-33ab0bc61281","type":"/Components/MapFilter","parameters":{},"ports":[],"children":[]},{"id":"cf494f14-d1be-ea51-9935-338546fe8fe6","type":"module.inlineHtml","parameters":{"html":"<div id=\"map\" style=\"width: 100%; height: 100%\"></div>\r\n<script>\r\n  // tọa độ giữa tỉnh (các tỉnh đang bị thiên tai)\r\n  function calculateCenter(points) {\r\n    // Kiểm tra xem danh sách tọa độ có rỗng hay không\r\n    if (!points || points.length === 0) {\r\n      return null; // Không có tọa độ nào để tính\r\n    }\r\n\r\n    let totalX = 0,\r\n      totalY = 0;\r\n\r\n    // Duyệt qua danh sách tọa độ và tính tổng\r\n    points.forEach((point) => {\r\n      totalX += point.lng;\r\n      totalY += point.lat;\r\n    });\r\n\r\n    // Tính trung bình cộng\r\n    const centerX = totalX / points.length;\r\n    const centerY = totalY / points.length;\r\n\r\n    // Trả về tọa độ trung tâm\r\n    return { lng: centerX, lat: centerY };\r\n  }\r\n\r\n  function calculateZoom(points) {\r\n    let maxDistance = 0;\r\n    points.forEach((point1) => {\r\n      points.forEach((point2) => {\r\n        const distance = Math.sqrt(\r\n          Math.pow(point1.lat - point2.lat, 2) +\r\n            Math.pow(point1.lng - point2.lng, 2)\r\n        );\r\n        if (distance > maxDistance) maxDistance = distance;\r\n      });\r\n    });\r\n\r\n    // Quy đổi khoảng cách thành mức zoom\r\n    // Bạn có thể điều chỉnh giá trị này dựa trên kích thước bản đồ\r\n    if (maxDistance > 1) return 5; // Zoom out xa hơn nếu khoảng cách lớn\r\n    if (maxDistance > 0.5) return 8; // Trung bình\r\n    return 10; // Zoom gần\r\n  }\r\n\r\n  // Hàm chuẩn hóa chuỗi\r\n  function normalizeString(str) {\r\n    return str\r\n      .replace(/Tỉnh/g, \"\")\r\n      .replace(/Thành phố/g, \"\")\r\n      .trim(); // Xóa khoảng trắng đầu và cuối chuỗi\r\n  }\r\n\r\n  function updatePosition(position) {\r\n    const { latitude, longitude } = position.coords;\r\n    console.log({ latitude, longitude });\r\n    marker.setLngLat([longitude, latitude]);\r\n  }\r\n\r\n  // khai báo\r\n  function createMapbox() {\r\n    mapboxgl.accessToken =\r\n      \"pk.eyJ1IjoiZGhpZXAyMzA3IiwiYSI6ImNtNDRpeDFtejBuNzkycHB6bXp6eWZ1MTQifQ.169cDiC_Q2YWzRBdIxxgPg\";\r\n\r\n    provinces = localStorage.getItem(\"provinces\")\r\n      ? JSON.parse(localStorage.getItem(\"provinces\"))\r\n      : [];\r\n\r\n    const provinceNames = provinces?.map((province) =>\r\n      normalizeString(province.name)\r\n    );\r\n\r\n    // Lấy vị trí ở giữa các tỉnh\r\n    let center = {\r\n      lng: 108,\r\n      lat: 14,\r\n    };\r\n\r\n    let zoom = 6;\r\n\r\n    if (provinces.length > 0) {\r\n      const posList = provinces.map((province) => province.location);\r\n      center = calculateCenter(posList);\r\n      zoom = calculateZoom(posList);\r\n    }\r\n\r\n    // Không sửa\r\n    map = new mapboxgl.Map({\r\n      style: \"mapbox://styles/dhiep2307/cm44mghvy011l01sd5cci6k20\", // stylesheet location\r\n      container: \"map\", // container ID\r\n      center: [center.lng, center.lat], // starting position [lng, lat]. Note that lat must be set between -90 and 90\r\n      zoom: zoom, // starting zoom\r\n    });\r\n\r\n    marker = new mapboxgl.Marker();\r\n\r\n    map.on(\"load\", function () {\r\n      map.addSource(\"diaphanhuyen-4apinm\", {\r\n        type: \"vector\",\r\n        url: \"mapbox://dhiep2307.0va1jnhw\",\r\n      });\r\n\r\n      if (provinces.length > 0) {\r\n        map.addLayer({\r\n          id: \"loc-tinh\",\r\n          type: \"fill\",\r\n          source: \"diaphanhuyen-4apinm\",\r\n          \"source-layer\": \"diaphanhuyen-4apinm\",\r\n          layout: {},\r\n          paint: {\r\n            \"fill-color\": \"#ff6666\",\r\n            \"fill-opacity\": 0.2,\r\n          },\r\n          filter: [\"in\", \"Ten_Tinh\", ...provinceNames],\r\n        });\r\n\r\n        provinces.forEach((e) => {\r\n          map.addLayer({\r\n            id: \"text-layer-tinh-\" + e.name,\r\n            type: \"symbol\",\r\n            source: {\r\n              type: \"geojson\",\r\n              data: {\r\n                type: \"FeatureCollection\",\r\n                features: [\r\n                  {\r\n                    type: \"Feature\",\r\n                    geometry: {\r\n                      type: \"Point\",\r\n                      coordinates: [e.location.lng, e.location.lat],\r\n                    },\r\n                    properties: {\r\n                      title: `${e.name}`, // Văn bản sẽ hiển thị\r\n                    },\r\n                  },\r\n                ],\r\n              },\r\n            },\r\n            layout: {\r\n              \"text-field\": [\"get\", \"title\"], // Lấy giá trị từ thuộc tính 'title' để hiển thị\r\n              \"text-size\": [\r\n                \"interpolate\", // Biểu thức interpolate giúp thay đổi kích thước theo zoom\r\n                [\"linear\"], // Mức độ thay đổi là tuyến tính\r\n                [\"zoom\"], // Sử dụng zoom level để điều chỉnh\r\n                5,\r\n                9, // Zoom level 5: 10px (kích thước chữ nhỏ)\r\n                15,\r\n                30, // Zoom level 15: 30px (kích thước chữ lớn)\r\n              ], // Kích thước chữ\r\n              \"text-anchor\": \"center\", // Căn chỉnh chữ theo giữa điểm\r\n              \"text-offset\": [0, 0], // Định vị trí chữ (tùy chọn)\r\n            },\r\n            paint: {\r\n              \"text-color\": \"#186bf0\", // Màu chữ\r\n              \"text-halo-color\": \"#FFFFFF\", // Màu viền chữ\r\n              \"text-halo-width\": 2, // Độ rộng viền chữ\r\n            },\r\n          });\r\n        });\r\n      }\r\n\r\n      // // Add zoom and rotation controls to the map.\r\n      map.addControl(new mapboxgl.NavigationControl());\r\n      map.addControl(new mapboxgl.FullscreenControl());\r\n\r\n      // Không sửa\r\n      //Thêm layer HS, TS\r\n\r\n      map.addLayer({\r\n        id: \"text-layer-truong-sa\",\r\n        type: \"symbol\",\r\n        source: {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [\r\n              {\r\n                type: \"Feature\",\r\n                geometry: {\r\n                  type: \"Point\",\r\n                  coordinates: [113.81768, 9.46653],\r\n                },\r\n                properties: {\r\n                  title: \"Quần đảo Trường Sa (Việt Nam)\",\r\n                },\r\n              },\r\n            ],\r\n          },\r\n        },\r\n        layout: {\r\n          \"text-field\": [\"get\", \"title\"], // Lấy giá trị từ thuộc tính 'title' để hiển thị\r\n          \"text-size\": [\r\n            \"interpolate\", // Biểu thức interpolate giúp thay đổi kích thước theo zoom\r\n            [\"linear\"], // Mức độ thay đổi là tuyến tính\r\n            [\"zoom\"], // Sử dụng zoom level để điều chỉnh\r\n            5,\r\n            9, // Zoom level 5: 10px (kích thước chữ nhỏ)\r\n            15,\r\n            30, // Zoom level 15: 30px (kích thước chữ lớn)\r\n          ], // Kích thước chữ\r\n          \"text-anchor\": \"center\", // Căn chỉnh chữ theo giữa điểm\r\n          \"text-offset\": [0, 0], // Định vị trí chữ (tùy chọn)\r\n        },\r\n        paint: {\r\n          \"text-color\": \"#186bf0\", // Màu chữ\r\n          \"text-halo-color\": \"#FFFFFF\", // Màu viền chữ\r\n          \"text-halo-width\": 2, // Độ rộng viền chữ\r\n        },\r\n      });\r\n\r\n      map.addLayer({\r\n        id: \"text-layer-hoang-sa\",\r\n        type: \"symbol\",\r\n        source: {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [\r\n              {\r\n                type: \"Feature\",\r\n                geometry: {\r\n                  type: \"Point\",\r\n                  coordinates: [111.90739, 16.50884],\r\n                },\r\n                properties: {\r\n                  title: \"Quần đảo Hoàng Sa (Việt Nam)\", // Văn bản sẽ hiển thị\r\n                },\r\n              },\r\n            ],\r\n          },\r\n        },\r\n        layout: {\r\n          \"text-field\": [\"get\", \"title\"], // Lấy giá trị từ thuộc tính 'title' để hiển thị\r\n          \"text-size\": [\r\n            \"interpolate\", // Biểu thức interpolate giúp thay đổi kích thước theo zoom\r\n            [\"linear\"], // Mức độ thay đổi là tuyến tính\r\n            [\"zoom\"], // Sử dụng zoom level để điều chỉnh\r\n            5,\r\n            9, // Zoom level 5: 10px (kích thước chữ nhỏ)\r\n            15,\r\n            30, // Zoom level 15: 30px (kích thước chữ lớn)\r\n          ], // Kích thước chữ\r\n          \"text-anchor\": \"center\", // Căn chỉnh chữ theo giữa điểm\r\n          \"text-offset\": [0, 0], // Định vị trí chữ (tùy chọn)\r\n        },\r\n        paint: {\r\n          \"text-color\": \"#186bf0\", // Màu chữ\r\n          \"text-halo-color\": \"#FFFFFF\", // Màu viền chữ\r\n          \"text-halo-width\": 2, // Độ rộng viền chữ\r\n        },\r\n      });\r\n\r\n      map.addLayer({\r\n        id: \"text-layer-bien-dong\",\r\n        type: \"symbol\",\r\n        source: {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [\r\n              {\r\n                type: \"Feature\",\r\n                geometry: {\r\n                  type: \"Point\",\r\n                  coordinates: [113.23996, 13.84156],\r\n                },\r\n                properties: {\r\n                  title: \"Biển Đông\", // Văn bản sẽ hiển thị\r\n                },\r\n              },\r\n            ],\r\n          },\r\n        },\r\n        layout: {\r\n          \"text-field\": [\"get\", \"title\"], // Lấy giá trị từ thuộc tính 'title' để hiển thị\r\n          \"text-size\": [\r\n            \"interpolate\", // Biểu thức interpolate giúp thay đổi kích thước theo zoom\r\n            [\"linear\"], // Mức độ thay đổi là tuyến tính\r\n            [\"zoom\"], // Sử dụng zoom level để điều chỉnh\r\n            14,\r\n            16, // Zoom level 5: 10px (kích thước chữ nhỏ)\r\n            18,\r\n            30, // Zoom level 15: 30px (kích thước chữ lớn)\r\n          ], // Kích thước chữ\r\n          \"text-anchor\": \"center\", // Căn chỉnh chữ theo giữa điểm\r\n          \"text-offset\": [0, 0], // Định vị trí chữ (tùy chọn)\r\n        },\r\n        paint: {\r\n          \"text-color\": \"#186bf0\", // Màu chữ\r\n          \"text-halo-color\": \"#FFFFFF\", // Màu viền chữ\r\n          \"text-halo-width\": 2, // Độ rộng viền chữ\r\n        },\r\n      });\r\n    });\r\n  }\r\n\r\n  createMapbox();\r\n</script>\r\n","runJs":true,"cssClassName":"noFilter"},"ports":[],"children":[]},{"id":"94708485-8f4f-dbbd-e134-e57d11f48be8","type":"net.noodl.controls.button","parameters":{"position":"absolute","zIndex":1,"label":"YÊU CẦU HỖ TRỢ","backgroundColor":"#EF4444","fontFamily":"fonts/Roboto/Roboto-Bold.ttf","boxShadowEnabled":false,"alignX":"center","alignY":"bottom","useIcon":true,"iconIconSource":{"class":"material-icons","code":"warning","codeAsClass":false},"iconSize":{"value":32,"unit":"px"},"sizeMode":"contentWidth","fontSize":{"value":18,"unit":"px"},"borderRadius":{"value":8,"unit":"px"},"height":{"value":80,"unit":"px"},"width":{"value":100,"unit":"%","isFixed":true},"minWidth":{"value":300,"unit":"px"},"marginBottom":{"value":32,"unit":"px"},"cssClassName":"map"},"stateParameters":{"hover":{"backgroundColor":"#F21313"}},"ports":[],"children":[]}]},{"id":"8c60aba6-413c-1948-48d2-246dcd4986c0","type":"PageInputs","parameters":{},"ports":[],"children":[]},{"id":"174f3032-2fe4-1ca0-6011-a7487b667160","type":"NavigationShowPopup","parameters":{"target":"/Components/Popup/Request Modal"},"ports":[],"children":[]},{"id":"7c9a05ab-acf7-1557-0363-5c85d620fb41","type":"CSS Definition","parameters":{"style":".noFilter {\r\n    width: 100%;\r\n    height: calc(100vh - 80px);\r\n}\r\n\r\n.withFilter {\r\n    width: 100%;\r\n    height: calc(100vh - 160px);\r\n}"},"ports":[],"children":[]},{"id":"baf41f49-6cba-5ae4-14b8-e073b978e3de","type":"Condition","parameters":{"condition":false},"ports":[],"children":[]},{"id":"826e1bf2-e5cc-7a11-91c7-430bfba6b50b","type":"/#Logic/CurrentOrganization","parameters":{},"ports":[],"children":[]},{"id":"f0148c1b-f5bb-2ccb-be8c-4cad6c7cff9c","type":"States","parameters":{"values":"Filter","states":"isTrue,isFalse","value-isTrue-Filter":"withFilter","type-Filter":"string","value-isFalse-Filter":"noFilter","currentState":"isFalse"},"ports":[],"children":[]},{"id":"8506d224-cc8f-f03a-fec7-4c5a5167694b","type":"/#Logic/CurrentMapData","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"94708485-8f4f-dbbd-e134-e57d11f48be8","sourcePort":"onClick","targetId":"174f3032-2fe4-1ca0-6011-a7487b667160","targetPort":"show"},{"sourceId":"826e1bf2-e5cc-7a11-91c7-430bfba6b50b","sourcePort":"hasOrganization","targetId":"baf41f49-6cba-5ae4-14b8-e073b978e3de","targetPort":"condition"},{"sourceId":"baf41f49-6cba-5ae4-14b8-e073b978e3de","sourcePort":"result","targetId":"b9dfffce-c62e-be4e-cea6-33ab0bc61281","targetPort":"Mounted"},{"sourceId":"baf41f49-6cba-5ae4-14b8-e073b978e3de","sourcePort":"isfalse","targetId":"94708485-8f4f-dbbd-e134-e57d11f48be8","targetPort":"mounted"},{"sourceId":"f0148c1b-f5bb-2ccb-be8c-4cad6c7cff9c","sourcePort":"Filter","targetId":"cf494f14-d1be-ea51-9935-338546fe8fe6","targetPort":"cssClassName"},{"sourceId":"baf41f49-6cba-5ae4-14b8-e073b978e3de","sourcePort":"isfalse","targetId":"f0148c1b-f5bb-2ccb-be8c-4cad6c7cff9c","targetPort":"to-isFalse"},{"sourceId":"975881a3-e3d2-ba31-755a-6c63b54fe66d","sourcePort":"didMount","targetId":"8506d224-cc8f-f03a-fec7-4c5a5167694b","targetPort":"Do"},{"sourceId":"baf41f49-6cba-5ae4-14b8-e073b978e3de","sourcePort":"result","targetId":"f0148c1b-f5bb-2ccb-be8c-4cad6c7cff9c","targetPort":"to-isTrue"},{"sourceId":"975881a3-e3d2-ba31-755a-6c63b54fe66d","sourcePort":"didMount","targetId":"baf41f49-6cba-5ae4-14b8-e073b978e3de","targetPort":"eval"}],"ports":[],"roots":["975881a3-e3d2-ba31-755a-6c63b54fe66d"]},{"name":"/Components/Popup/Request Modal","nodes":[{"id":"39c647c6-36e1-4270-fe95-3427c0050513","type":"NavigationClosePopup","parameters":{"closeActions":"Confirmed"},"ports":[],"children":[]},{"id":"6415b6d3-80af-3683-1334-91a272960a00","type":"Group","parameters":{"visible":true,"scrollEnabled":true,"sizeMode":"explicit","width":{"value":100,"unit":"%","isFixed":false},"height":{"value":100,"unit":"%","isFixed":false},"position":"relative"},"ports":[],"children":[{"id":"5183f776-f946-c588-253d-ffb5e3a8a7a4","type":"Group","parameters":{"backgroundColor":"#000000A5","zIndex":2,"mounted":true,"position":"relative","width":{"value":100,"unit":"%","isFixed":false},"height":{"value":100,"unit":"%","isFixed":false}},"ports":[],"children":[]},{"id":"b244469c-0e1d-ef52-6c6c-f4fe4e6c3611","type":"Group","parameters":{"backgroundColor":"Grey - 100","boxShadowEnabled":true,"blockTouch":true,"borderRadius":{"value":12,"unit":"px"},"boxShadowBlurRadius":{"value":8,"unit":"px"},"boxShadowSpreadRadius":{"value":0,"unit":"px"},"boxShadowOffsetY":{"value":4,"unit":"px"},"boxShadowColor":"#00000026","zIndex":3,"visible":true,"clip":false,"position":"absolute","sizeMode":"contentHeight","width":{"value":100,"unit":"%"},"minWidth":{"value":320,"unit":"px"},"maxWidth":{"value":700,"unit":"px"},"alignX":"center","alignY":"top","paddingBottom":{"value":24,"unit":"px"},"paddingTop":{"value":24,"unit":"px"},"paddingLeft":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"marginTop":{"value":32,"unit":"px"}},"ports":[],"children":[{"id":"af0e669b-a210-91a1-1c57-e4d5523a8e21","type":"net.noodl.controls.button","parameters":{"position":"absolute","alignX":"right","alignY":"top","backgroundColor":"#5836F500","useIcon":true,"useLabel":false,"iconColor":"Grey - 700","iconIconSource":{"class":"material-icons","code":"close"},"iconSize":{"value":24,"unit":"px"},"paddingLeft":{"value":4,"unit":"px"},"paddingRight":{"value":4,"unit":"px"},"iconSpacing":{"value":0,"unit":"px"},"minWidth":{"value":0,"unit":"px"},"sizeMode":"contentSize","paddingTop":{"value":4,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"},"marginRight":{"value":12,"unit":"px"},"marginTop":{"value":12,"unit":"px"}},"ports":[],"children":[]},{"id":"06149b48-f0c1-7518-122c-945cb291e396","type":"Text","parameters":{"textStyle":"Title Medium","text":"Gửi yêu cầu","marginRight":{"value":24,"unit":"px"}},"ports":[],"children":[]},{"id":"fe384eeb-6c36-eaf6-7a85-102cfd1a2146","type":"net.noodl.visual.columns","parameters":{"layoutString":"1 1"},"ports":[],"children":[{"id":"9e5f66a5-9deb-67af-8a40-8beb36699c5a","type":"Group","parameters":{"flexDirection":"column","rowGap":{"value":12,"unit":"px"},"paddingTop":{"value":12,"unit":"px"}},"ports":[],"children":[{"id":"c7f01474-36d0-a80e-b972-8853637c35f1","type":"net.noodl.controls.options","parameters":{"items":"[\n    {\"Label\":\"Option 1\", \"Value\":\"1\"},\n    {\"Label\":\"Option 2\", \"Value\":\"2\"},\n    {\"Label\":\"Option 3\", \"Value\":\"3\"}\n]","label":"Yêu cầu hỗ trợ cho*","placeholder":"Chọn thiên tai đang diễn ra"},"ports":[],"children":[]},{"id":"92b11fa8-85f5-daeb-bdfb-8a82f6fb1f6f","type":"/Components/Form","parameters":{"Controls":"[\n    {\n        Type:\"Text Input\",\n        Label:\"Họ và tên*\",\n        Property:\"FullName\",\n    },\n    {\n        Type:\"Text Input\",\n        Label:\"Số điện thoại*\",\n        Property:\"PhoneNumber\",\n    },\n    {\n        Type:\"Text Input\",\n        Label:\"Email (nếu có)\",\n        Property:\"Email\",\n        InputType: \"Email\",\n    },\n    {\n        Type:\"Text Input\",\n        Label:\"Số người cần hỗ trợ (nếu có)\",\n        Property:\"PeopleCount\",\n    },\n]"},"ports":[],"children":[]},{"id":"02306700-a947-f2ca-b1e8-ce87b7d9ff73","type":"Group","parameters":{"flexDirection":"column","columnGap":{"value":8,"unit":"px"},"width":{"value":100,"unit":"%","isFixed":true}},"ports":[],"children":[{"id":"9365fa12-b9d2-9c04-2a36-05fba51de8d0","type":"Text","parameters":{"text":"Nhu cầu","sizeMode":"contentHeight","fontSize":{"value":14,"unit":"px"}},"ports":[],"children":[]},{"id":"1a89caf9-ce3e-a73c-84ae-04be5b6ae81c","type":"Group","parameters":{},"ports":[],"children":[{"id":"02c64d63-9c06-d39d-6ece-3f9a13812cfe","type":"net.noodl.visual.columns","parameters":{},"ports":[],"children":[{"id":"253b5ca3-b957-3ea1-ecde-8d313ba1ae05","type":"net.noodl.controls.checkbox","parameters":{"label":"Nước"},"ports":[],"children":[]},{"id":"066360ac-0bf4-84bc-f2ee-f6a316942a8c","type":"net.noodl.controls.checkbox","parameters":{"label":"Đồ ăn"},"ports":[],"children":[]},{"id":"de5c7e80-01d6-4d89-9d7c-bcd780427144","type":"net.noodl.controls.checkbox","parameters":{"label":"Y tế"},"ports":[],"children":[]},{"id":"e7a71da5-a73e-1ee0-0986-1e36aa6af5dd","type":"net.noodl.controls.checkbox","parameters":{"label":"Khác"},"ports":[],"children":[]}]}]}]}]},{"id":"c9c7f4ee-b717-ba54-61da-97f2487281fa","type":"Group","parameters":{"flexDirection":"column","rowGap":{"value":12,"unit":"px"},"paddingTop":{"value":12,"unit":"px"}},"ports":[],"children":[{"id":"516b5985-63ae-6b96-8ac0-e94aace3e5ea","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":16,"unit":"px"},"width":{"value":100,"unit":"%","isFixed":true}},"ports":[],"children":[{"id":"64d93c97-3261-7565-9efc-fe1b96bd534c","type":"net.noodl.visual.columns","parameters":{},"ports":[],"children":[{"id":"2cb9c5d5-e661-975d-c66f-f2ea44ce475d","type":"net.noodl.controls.options","parameters":{"value":"1","items":"[\n    {\"Label\":\"Option 1\", \"Value\":\"1\"},\n    {\"Label\":\"Option 2\", \"Value\":\"2\"},\n    {\"Label\":\"Option 3\", \"Value\":\"3\"}\n]","placeholder":"Chọn","label":"Tỉnh","width":{"value":100,"unit":"%","isFixed":false},"sizeMode":"explicit"},"ports":[],"children":[]},{"id":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","type":"net.noodl.controls.options","parameters":{"placeholder":"Chọn","label":"Huyện","width":{"value":100,"unit":"%","isFixed":false},"sizeMode":"explicit","enabled":false},"ports":[],"children":[]},{"id":"bf3fe88c-3df6-02b6-890c-b37abda91b77","type":"net.noodl.controls.options","parameters":{"label":"Xã","placeholder":"Chọn","width":{"value":100,"unit":"%","isFixed":false},"sizeMode":"explicit","enabled":false},"ports":[],"children":[]}]}]},{"id":"d76150a7-9956-ac1b-ee47-71b1f455b1bf","type":"Group","parameters":{},"ports":[],"children":[{"id":"bbf05d05-1485-e073-c238-82290fb9f52b","type":"Image","parameters":{"minWidth":{"value":100,"unit":"%"},"minHeight":{"value":200,"unit":"px"},"maxWidth":{"value":100,"unit":"%"},"maxHeight":{"value":200,"unit":"px"},"styleCss":"background-color: #CECECE;\r\nobject-fit: cover","borderRadius":{"value":8,"unit":"px"},"src":"https://placehold.co/100x100/38BCF8/FFF?text=UniHand","borderStyle":"solid","borderWidth":{"value":1,"unit":"px"},"borderColor":"Border"},"ports":[],"children":[]},{"id":"3fc2e64a-e092-ec5d-67dd-f275d0722691","type":"Group","parameters":{"position":"absolute","backgroundColor":"#5A5A5A","opacity":0.5,"visible":false,"zIndex":1},"stateParameters":{"hover":{}},"ports":[],"children":[]},{"id":"f359b4b9-c112-2929-937a-c63d655fe794","type":"Group","parameters":{"position":"absolute","visible":false,"zIndex":2},"ports":[],"children":[{"id":"748f4904-69a7-2512-7562-f769e4e86e08","type":"net.noodl.controls.button","parameters":{"label":"Chọn ảnh","borderStyle":"solid","backgroundColor":"#00000000","borderWidth":{"value":1,"unit":"px"},"color":"#000000","sizeMode":"explicit","useIcon":true,"iconIconSource":{"class":"material-icons","code":"image","codeAsClass":false},"iconColor":"#000000","height":{"value":100,"unit":"%"}},"stateParameters":{"hover":{"backgroundColor":"#00000035"}},"ports":[],"children":[]},{"id":"1d481d57-5c7d-5593-0b7e-5e6fc07fa924","type":"net.noodl.controls.button","parameters":{"label":"","backgroundColor":"#FFFFFF7F","mounted":true,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"delete_outline","codeAsClass":false},"paddingLeft":{"value":8,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"iconColor":"White","borderStyle":"none","borderColor":"Grey - 400","color":"#1666FF","borderWidth":{"value":1.3,"unit":"px"},"height":{"value":36,"unit":"px"},"useLabel":false,"minWidth":{"value":0,"unit":"px"},"borderRadius":{"value":50,"unit":"%"},"iconSize":{"value":22,"unit":"px"},"position":"absolute","marginTop":{"value":12,"unit":"px"},"marginLeft":{"value":12,"unit":"px"},"styleCss":"/* background-color: red; */\r\n\r\nright: 12px;\r\ntop: 0;","sizeMode":"contentSize","paddingTop":{"value":8,"unit":"px"},"paddingBottom":{"value":8,"unit":"px"},"alignX":"right","marginRight":{"value":12,"unit":"px"},"zIndex":3},"stateParameters":{"disabled":{"opacity":0},"hover":{"opacity":0.8,"backgroundColor":"#FFFFFF7F"}},"ports":[],"children":[]}]}]},{"id":"98beac46-0577-6fd9-bca5-385a3f3c73de","type":"net.noodl.controls.textinput","parameters":{"label":"Mô tả","type":"textArea","height":{"value":100,"unit":"px"},"paddingTop":{"value":8,"unit":"px"}},"ports":[],"children":[]},{"id":"6ef3f7c0-751c-cfcb-1c66-9f494aab2dec","type":"net.noodl.controls.button","parameters":{"label":"Gửi yêu cầu","sizeMode":"contentWidth","alignX":"center","minWidth":{"value":100,"unit":"%"}},"ports":[],"children":[]}]}]}]}]},{"id":"d0611b56-b3ca-637b-5efe-154ef7767c1c","type":"States","parameters":{"states":"hide,show","values":"size,opacity,visible","value-hide-size":0,"value-show-size":1,"value-hide-opacity":0,"value-show-opacity":1,"currentState":"hide","transitiondef-hide":{"curve":[0,0,0.58,1],"dur":150,"delay":0},"transitiondef-show":{"curve":[0,0,0.58,1],"dur":150,"delay":0},"value-hide-z-index":-1,"value-show-z-index":3,"type-mount":"boolean","value-hide-mount":false,"value-show-mount":true,"type-visible":"boolean","value-hide-visible":false,"value-show-visible":2},"ports":[],"children":[]},{"id":"9aa98ad2-e2dc-f426-f0a5-6d36f09022c7","type":"/Components/Show Toast","parameters":{"Message":"Gửi yêu cầu thành công","Type":"Success"},"ports":[],"children":[]},{"id":"b0d07aa4-5adc-5fb5-c2a8-4d3746c5b931","type":"/Components/Show Toast","parameters":{"Message":"Gửi yêu cầu không thành công, vui lòng thử lại","Type":"Error"},"ports":[],"children":[]},{"id":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","type":"/#Logic/SOS","parameters":{},"ports":[],"children":[]},{"id":"f7690a33-00b3-e769-e6b0-71f9f0c7d4f0","type":"/#Logic/GetDisasters","parameters":{},"ports":[],"children":[]},{"id":"31d77b1f-e18d-43f9-ba3f-45c2951320a2","type":"JavaScriptFunction","parameters":{"functionScript":"const inputArray = Inputs.ResponseArray;\r\nif(inputArray) {\r\n    Outputs.DropdownOptions = inputArray.map((item, index) => ({\r\n    Label: item.Name,\r\n    Value: item.id.toString()\r\n    }));\r\n}"},"ports":[{"name":"in-ResponseArray","displayName":"ResponseArray","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-DropdownOptions","displayName":"DropdownOptions","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"ecad2343-e5bb-64ce-8eff-e886172a2613","type":"Model2","parameters":{"properties":"FullName,PhoneNumber,Email"},"ports":[],"children":[]},{"id":"472c54b2-433e-f84f-c7d4-61de87f938cd","type":"JavaScriptFunction","parameters":{"functionScript":"const errors = [];\r\nconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n\r\nif (!Inputs.FullName || Inputs.FullName.trim() === '') {\r\n  errors.push({\r\n    Property: 'FullName',\r\n    Error: 'Vui lòng nhập tên của bạn',\r\n  });\r\n}\r\n\r\nif (!Inputs.PhoneNumber || Inputs.PhoneNumber.trim() === '') {\r\n  errors.push({\r\n    Property: 'PhoneNumber',\r\n    Error: 'Vui lòng nhập số điện thoại',\r\n  });\r\n} else if (!/^\\d+$/.test(Inputs.PhoneNumber.trim())) {\r\n  errors.push({\r\n    Property: 'PhoneNumber', \r\n    Error: 'Số điện thoại chỉ được nhập số',\r\n  });\r\n}\r\n\r\nif(Inputs.Email) {\r\n  if (!emailRegex.test(Inputs.Email)) {\r\n  errors.push({\r\n    Property: 'Email',\r\n    Error: 'Email không hợp lệ.',\r\n  });\r\n}\r\n}\r\n\r\nOutputs.IsError = errors.length === 0\r\nOutputs.Errors = errors;"},"ports":[{"name":"in-FullName","displayName":"FullName","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-PhoneNumber","displayName":"PhoneNumber","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Email","displayName":"Email","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-IsError","displayName":"IsError","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-Errors","displayName":"Errors","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"b16b0ceb-5007-4e3e-a8e7-51ceb6770c9d","type":"Model2","parameters":{"properties":"FullName,PhoneNumber,Email,PeopleCount"},"ports":[],"children":[]},{"id":"e6b4c1bc-1c21-2584-59a1-d42e8497310b","type":"/#Logic/GetProvinces","parameters":{},"ports":[],"children":[]},{"id":"fc72403a-a0a7-e767-0733-177c2b025940","type":"JavaScriptFunction","parameters":{"functionScript":"const response = Inputs.Response;\r\n\r\nif (Array.isArray(response)) {\r\n    const options = response.map((item, index) => ({\r\n        Label: item.FullName,\r\n        Value: item.id.toString()\r\n    }));\r\n    Outputs.Options = options;\r\n} else {\r\n    Outputs.Options = [];\r\n}\r\n"},"ports":[{"name":"in-Response","displayName":"Response","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Options","displayName":"Options","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"292046a0-6a17-f5bd-d553-2e56b0f1d935","type":"Model2","parameters":{"modelId":"Location","properties":"lat,lng"},"ports":[],"children":[]},{"id":"36164f65-29c7-8436-27fc-1ad789a38b2b","type":"/#Logic/ConvertLocation","parameters":{},"ports":[],"children":[]},{"id":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","type":"JavaScriptFunction","parameters":{"functionScript":"const response = Inputs.Response;\r\n\r\nif (response && response.Province && response.District && response.Ward) {\r\n    Outputs.ProvinceId = response.Province.id;\r\n    Outputs.DistrictId = response.District.id;\r\n    Outputs.WardId = response.Ward.id;\r\n} else {\r\n    Outputs.ProvinceId = null;\r\n    Outputs.DistrictId = null;\r\n    Outputs.WardId = null;\r\n}"},"ports":[{"name":"in-Response","displayName":"Response","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-ProvinceId","displayName":"ProvinceId","plug":"output","type":"*","group":"Outputs","index":5},{"name":"out-DistrictId","displayName":"DistrictId","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-WardId","displayName":"WardId","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"81a453ef-0ad4-9561-0d69-d1d59533cf54","type":"/#Logic/GetDistricts","parameters":{},"ports":[],"children":[]},{"id":"41fba4c8-cf9e-8c45-5851-8261d8da563a","type":"JavaScriptFunction","parameters":{"functionScript":"const response = Inputs.Response;\r\n\r\nif (Array.isArray(response)) {\r\n    const options = response.map((item, index) => ({\r\n        Label: item.FullName,\r\n        Value: item.id.toString() \r\n    }));\r\n    Outputs.Options = options;\r\n} else {\r\n    Outputs.Options = [];\r\n}\r\n"},"ports":[{"name":"in-Response","displayName":"Response","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Options","displayName":"Options","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"dbc14437-ad2a-d73c-f99d-276bf6e2cc20","type":"/#Logic/GetWards","parameters":{},"ports":[],"children":[]},{"id":"d7e369f3-6f04-3a82-6334-206f4d15acc2","type":"JavaScriptFunction","parameters":{"functionScript":"const response = Inputs.Response;\r\n\r\nif (Array.isArray(response)) {\r\n    const options = response.map((item, index) => ({\r\n        Label: item.FullName,\r\n        Value: item.id.toString() \r\n    }));\r\n    Outputs.Options = options;\r\n} else {\r\n    Outputs.Options = [];\r\n}\r\n"},"ports":[{"name":"in-Response","displayName":"Response","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Options","displayName":"Options","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"841556ac-0007-5b30-1139-4cecb0ad63d2","type":"Expression","parameters":{"expression":"width > 400"},"ports":[],"children":[]},{"id":"98122e7f-dfd2-d7b0-df5a-e5e33eb2fc0c","type":"States","parameters":{"values":"Layout String","states":"Is Single Column,Is Double Column","useTransitions":false,"type-Layout String":"string","value-Is Single Column-Layout String":"1 1","value-Is Double Column-Layout String":"1 1 1 1"},"ports":[],"children":[]},{"id":"e9197062-55d0-49da-b3f1-d87de892c236","type":"Expression","parameters":{"expression":"width > 400\r\n"},"ports":[],"children":[]},{"id":"9d680b28-5648-c85b-9b60-79719a0e3251","type":"States","parameters":{"values":"Layout String","states":"Is Single Column,Is Tripble Column","useTransitions":false,"type-Layout String":"string","value-Is Single Column-Layout String":"1","value-Is Tripble Column-Layout String":"1 1 1"},"ports":[],"children":[]},{"id":"c31361df-88e8-9109-a4eb-5752ad78abca","type":"JavaScriptFunction","parameters":{"functionScript":"const file = Inputs.file\r\n\r\nif (file) {\r\n    const formData = new FormData();\r\n\r\n    formData.append(\"files\", file);\r\n\r\n    fetch(\"http://194.233.66.115:1337/api/upload\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n    })\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n        if (Array.isArray(data)) {\r\n            const ids = data.map(item => item.id);\r\n            Outputs.Ids = ids;\r\n        } else {\r\n            Outputs.Ids = [];\r\n        }\r\n        Outputs.Success()\r\n    })\r\n    .catch((error) => {\r\n        Outputs.Failute()\r\n    });\r\n}\r\nelse {\r\n    Outputs.Cancel();\r\n}"},"ports":[{"name":"in-file","displayName":"file","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Failute","displayName":"Failute","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Cancel","displayName":"Cancel","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Ids","displayName":"Ids","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"545dd7c8-1e23-8b49-e671-eed0d282a465","type":"Open File Picker","parameters":{"acceptedFileTypes":"image/*"},"ports":[],"children":[]},{"id":"9c3896e5-fbf3-6ac1-1569-ba3e71f73951","type":"Expression","parameters":{"expression":"width > 700"},"ports":[],"children":[]},{"id":"124d8875-3048-a16c-c1a1-f06abedfc125","type":"States","parameters":{"values":"Layout String","states":"Is Single Column,Is Double Column","useTransitions":false,"type-Layout String":"string","value-Is Single Column-Layout String":"1","value-Is Double Column-Layout String":"1 1"},"ports":[],"children":[]},{"id":"951da391-a2a2-822f-61bf-1386e9533f03","type":"JavaScriptFunction","parameters":{"functionScript":"const file = Inputs.file\r\n\r\nif(file) {\r\n    const imageUrl = URL.createObjectURL(file);\r\n    Outputs.ImageUrl = imageUrl;\r\n}"},"ports":[{"name":"in-file","displayName":"file","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-ImageUrl","displayName":"ImageUrl","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"def0dce8-d480-65fe-2c93-00d906cddd21","type":"JavaScriptFunction","parameters":{"functionScript":"const inputArray = Inputs.ResponseArray;\r\nif (inputArray && inputArray.length > 0) {\r\n    const lastItem = inputArray[inputArray.length - 1];\r\n    Outputs.DefautValue = lastItem.id.toString();\r\n}\r\n"},"ports":[{"name":"in-ResponseArray","displayName":"ResponseArray","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-DefautValue","displayName":"DefautValue","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"937b049a-6c54-073c-757b-f9278962407c","type":"JavaScriptFunction","parameters":{"functionScript":"const file = Inputs.file;\r\n\r\nconst placeholderImage = 'https://placehold.co/100x100/38BCF8/FFF?text=UniHand';\r\nconst validImageTypes = ['image/gif', 'image/jpeg', 'image/png'];\r\n\r\nif (file && validImageTypes.includes(file.type)) {\r\n  const imageUrl = URL.createObjectURL(file);\r\n  Outputs.image = imageUrl;\r\n  Outputs.file = file;\r\n} else {\r\n  Outputs.image = placeholderImage;\r\n  Outputs.file = null;\r\n}\r\n"},"ports":[{"name":"in-file","displayName":"file","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-image","displayName":"image","plug":"output","type":"*","group":"Outputs","index":5},{"name":"out-file","displayName":"file","plug":"output","type":"*","group":"Outputs","index":6}],"children":[]},{"id":"14604613-214f-4748-80f2-3b69c234c95f","type":"JavaScriptFunction","parameters":{"functionScript":"function clearOutputs() {\r\n  Outputs.file = {};\r\n  Outputs.image = 'https://placehold.co/100x100/38BCF8/FFF?text=UniHand'\r\n}\r\n\r\nclearOutputs();"},"ports":[{"name":"out-file","displayName":"file","plug":"output","type":"*","group":"Outputs","index":4},{"name":"out-image","displayName":"image","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]},{"id":"cb909cc1-e63a-7e45-033f-0eefdd551cf7","type":"States","parameters":{"states":"open,close"},"ports":[],"children":[]},{"id":"24d977e1-5351-413a-4b4a-616010709e27","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n  Value: \"string\"\r\n};\r\n\r\nScript.Outputs = {\r\n  Done: \"signal\",\r\n  Value: \"string\",\r\n  NullValue: 'number',\r\n  EmptyArr: 'array',\r\n};\r\n\r\nfunction onChange() {\r\n  Script.Outputs.Value = Script.Inputs.Value;\r\n  Script.Outputs.NullValue = null;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nScript.Setters.Value = onChange;"},"ports":[{"name":"Value","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"Done","type":{"name":"signal"},"plug":"output","group":"Outputs","index":6},{"name":"Value","type":{"name":"string"},"plug":"output","group":"Outputs","index":7},{"name":"NullValue","type":{"name":"number"},"plug":"output","group":"Outputs","index":8},{"name":"EmptyArr","type":{"name":"array"},"plug":"output","group":"Outputs","index":9}],"children":[]},{"id":"65be63b7-3188-5fb3-d069-48f1f77c1b11","type":"Javascript2","parameters":{"code":"Script.Inputs = {\r\n  Value: \"string\"\r\n};\r\n\r\nScript.Outputs = {\r\n  Done: \"signal\",\r\n  Value: \"string\",\r\n  NullValue: 'number',\r\n  EmptyArr: 'array',\r\n};\r\n\r\nfunction onChange() {\r\n  Script.Outputs.Value = Script.Inputs.Value;\r\n  Script.Outputs.NullValue = null;\r\n  Script.Outputs.EmptyArr = [];\r\n  Script.Outputs.Done();\r\n}\r\n\r\nScript.Setters.Value = onChange;"},"ports":[{"name":"Value","plug":"input","type":{"name":"string"},"group":"Inputs","index":5},{"name":"Done","type":{"name":"signal"},"plug":"output","group":"Outputs","index":6},{"name":"Value","type":{"name":"string"},"plug":"output","group":"Outputs","index":7},{"name":"NullValue","type":{"name":"number"},"plug":"output","group":"Outputs","index":8},{"name":"EmptyArr","type":{"name":"array"},"plug":"output","group":"Outputs","index":9}],"children":[]},{"id":"fc5e74ed-a969-aab7-bd6c-d735186dd28d","type":"States","parameters":{"states":"onLoadding,Default","values":"Label,Enabaled","type-Enabaled":"boolean","type-Label":"string","currentState":"Default","value-onLoadding-Label":"Đang tải ...","value-Default-Label":"Gửi yêu cầu","value-Default-Enabaled":true},"ports":[],"children":[]},{"id":"326366e8-bc7a-86cf-cd11-57ed393f250e","type":"JavaScriptFunction","parameters":{"functionScript":"Outputs.Dang = 2"},"ports":[{"name":"out-Dang","displayName":"Dang","plug":"output","type":"*","group":"Outputs","index":4}],"children":[]}],"connections":[{"sourceId":"6415b6d3-80af-3683-1334-91a272960a00","sourcePort":"didMount","targetId":"d0611b56-b3ca-637b-5efe-154ef7767c1c","targetPort":"to-show"},{"sourceId":"d0611b56-b3ca-637b-5efe-154ef7767c1c","sourcePort":"size","targetId":"b244469c-0e1d-ef52-6c6c-f4fe4e6c3611","targetPort":"transformScale"},{"sourceId":"d0611b56-b3ca-637b-5efe-154ef7767c1c","sourcePort":"opacity","targetId":"b244469c-0e1d-ef52-6c6c-f4fe4e6c3611","targetPort":"opacity"},{"sourceId":"31d77b1f-e18d-43f9-ba3f-45c2951320a2","sourcePort":"out-DropdownOptions","targetId":"c7f01474-36d0-a80e-b972-8853637c35f1","targetPort":"items"},{"sourceId":"c7f01474-36d0-a80e-b972-8853637c35f1","sourcePort":"value","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Disaster"},{"sourceId":"98beac46-0577-6fd9-bca5-385a3f3c73de","sourcePort":"onTextChanged","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"RequestDescription"},{"sourceId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","sourcePort":"Success","targetId":"9aa98ad2-e2dc-f426-f0a5-6d36f09022c7","targetPort":"Do"},{"sourceId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","sourcePort":"Failure","targetId":"b0d07aa4-5adc-5fb5-c2a8-4d3746c5b931","targetPort":"Do"},{"sourceId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","sourcePort":"Success","targetId":"39c647c6-36e1-4270-fe95-3427c0050513","targetPort":"closeAction-Confirmed"},{"sourceId":"92b11fa8-85f5-daeb-bdfb-8a82f6fb1f6f","sourcePort":"Object Id","targetId":"ecad2343-e5bb-64ce-8eff-e886172a2613","targetPort":"modelId"},{"sourceId":"ecad2343-e5bb-64ce-8eff-e886172a2613","sourcePort":"prop-PhoneNumber","targetId":"472c54b2-433e-f84f-c7d4-61de87f938cd","targetPort":"in-PhoneNumber"},{"sourceId":"472c54b2-433e-f84f-c7d4-61de87f938cd","sourcePort":"out-Errors","targetId":"92b11fa8-85f5-daeb-bdfb-8a82f6fb1f6f","targetPort":"Errors"},{"sourceId":"92b11fa8-85f5-daeb-bdfb-8a82f6fb1f6f","sourcePort":"Object Id","targetId":"b16b0ceb-5007-4e3e-a8e7-51ceb6770c9d","targetPort":"modelId"},{"sourceId":"b16b0ceb-5007-4e3e-a8e7-51ceb6770c9d","sourcePort":"prop-FullName","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"FullName"},{"sourceId":"b16b0ceb-5007-4e3e-a8e7-51ceb6770c9d","sourcePort":"prop-PhoneNumber","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"PhoneNumber"},{"sourceId":"472c54b2-433e-f84f-c7d4-61de87f938cd","sourcePort":"out-IsError","targetId":"6ef3f7c0-751c-cfcb-1c66-9f494aab2dec","targetPort":"enabled"},{"sourceId":"ecad2343-e5bb-64ce-8eff-e886172a2613","sourcePort":"prop-FullName","targetId":"472c54b2-433e-f84f-c7d4-61de87f938cd","targetPort":"in-FullName"},{"sourceId":"ecad2343-e5bb-64ce-8eff-e886172a2613","sourcePort":"prop-Email","targetId":"472c54b2-433e-f84f-c7d4-61de87f938cd","targetPort":"in-Email"},{"sourceId":"b16b0ceb-5007-4e3e-a8e7-51ceb6770c9d","sourcePort":"prop-Email","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Email"},{"sourceId":"b16b0ceb-5007-4e3e-a8e7-51ceb6770c9d","sourcePort":"prop-PeopleCount","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"PeopleCount"},{"sourceId":"e6b4c1bc-1c21-2584-59a1-d42e8497310b","sourcePort":"Response","targetId":"fc72403a-a0a7-e767-0733-177c2b025940","targetPort":"in-Response"},{"sourceId":"fc72403a-a0a7-e767-0733-177c2b025940","sourcePort":"out-Options","targetId":"2cb9c5d5-e661-975d-c66f-f2ea44ce475d","targetPort":"items"},{"sourceId":"6415b6d3-80af-3683-1334-91a272960a00","sourcePort":"didMount","targetId":"e6b4c1bc-1c21-2584-59a1-d42e8497310b","targetPort":"Fetch"},{"sourceId":"292046a0-6a17-f5bd-d553-2e56b0f1d935","sourcePort":"prop-lat","targetId":"36164f65-29c7-8436-27fc-1ad789a38b2b","targetPort":"lat"},{"sourceId":"292046a0-6a17-f5bd-d553-2e56b0f1d935","sourcePort":"prop-lng","targetId":"36164f65-29c7-8436-27fc-1ad789a38b2b","targetPort":"lng"},{"sourceId":"36164f65-29c7-8436-27fc-1ad789a38b2b","sourcePort":"Response","targetId":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","targetPort":"in-Response"},{"sourceId":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","sourcePort":"out-ProvinceId","targetId":"2cb9c5d5-e661-975d-c66f-f2ea44ce475d","targetPort":"value"},{"sourceId":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","sourcePort":"out-DistrictId","targetId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","targetPort":"value"},{"sourceId":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","sourcePort":"out-WardId","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"value"},{"sourceId":"2cb9c5d5-e661-975d-c66f-f2ea44ce475d","sourcePort":"value","targetId":"81a453ef-0ad4-9561-0d69-d1d59533cf54","targetPort":"ProvinceId"},{"sourceId":"81a453ef-0ad4-9561-0d69-d1d59533cf54","sourcePort":"Response","targetId":"41fba4c8-cf9e-8c45-5851-8261d8da563a","targetPort":"in-Response"},{"sourceId":"41fba4c8-cf9e-8c45-5851-8261d8da563a","sourcePort":"out-Options","targetId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","targetPort":"items"},{"sourceId":"6415b6d3-80af-3683-1334-91a272960a00","sourcePort":"didMount","targetId":"36164f65-29c7-8436-27fc-1ad789a38b2b","targetPort":"Fetch"},{"sourceId":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","sourcePort":"out-ProvinceId","targetId":"81a453ef-0ad4-9561-0d69-d1d59533cf54","targetPort":"Fetch"},{"sourceId":"dbc14437-ad2a-d73c-f99d-276bf6e2cc20","sourcePort":"Response","targetId":"d7e369f3-6f04-3a82-6334-206f4d15acc2","targetPort":"in-Response"},{"sourceId":"d7e369f3-6f04-3a82-6334-206f4d15acc2","sourcePort":"out-Options","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"items"},{"sourceId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","sourcePort":"value","targetId":"dbc14437-ad2a-d73c-f99d-276bf6e2cc20","targetPort":"DistrictsId"},{"sourceId":"6f01cd44-0d29-14a5-334d-1ad77cdaf93d","sourcePort":"out-DistrictId","targetId":"dbc14437-ad2a-d73c-f99d-276bf6e2cc20","targetPort":"Fetch"},{"sourceId":"d0611b56-b3ca-637b-5efe-154ef7767c1c","sourcePort":"opacity","targetId":"5183f776-f946-c588-253d-ffb5e3a8a7a4","targetPort":"opacity"},{"sourceId":"af0e669b-a210-91a1-1c57-e4d5523a8e21","sourcePort":"onClick","targetId":"39c647c6-36e1-4270-fe95-3427c0050513","targetPort":"close"},{"sourceId":"de5c7e80-01d6-4d89-9d7c-bcd780427144","sourcePort":"checked","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"NeedMedical"},{"sourceId":"066360ac-0bf4-84bc-f2ee-f6a316942a8c","sourcePort":"checked","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"NeedFood"},{"sourceId":"253b5ca3-b957-3ea1-ecde-8d313ba1ae05","sourcePort":"checked","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"NeedWater"},{"sourceId":"841556ac-0007-5b30-1139-4cecb0ad63d2","sourcePort":"isTrueEv","targetId":"98122e7f-dfd2-d7b0-df5a-e5e33eb2fc0c","targetPort":"to-Is Double Column"},{"sourceId":"841556ac-0007-5b30-1139-4cecb0ad63d2","sourcePort":"isFalseEv","targetId":"98122e7f-dfd2-d7b0-df5a-e5e33eb2fc0c","targetPort":"to-Is Single Column"},{"sourceId":"1a89caf9-ce3e-a73c-84ae-04be5b6ae81c","sourcePort":"boundingWidth","targetId":"841556ac-0007-5b30-1139-4cecb0ad63d2","targetPort":"width"},{"sourceId":"98122e7f-dfd2-d7b0-df5a-e5e33eb2fc0c","sourcePort":"Layout String","targetId":"02c64d63-9c06-d39d-6ece-3f9a13812cfe","targetPort":"layoutString"},{"sourceId":"516b5985-63ae-6b96-8ac0-e94aace3e5ea","sourcePort":"boundingWidth","targetId":"e9197062-55d0-49da-b3f1-d87de892c236","targetPort":"width"},{"sourceId":"9d680b28-5648-c85b-9b60-79719a0e3251","sourcePort":"Layout String","targetId":"64d93c97-3261-7565-9efc-fe1b96bd534c","targetPort":"layoutString"},{"sourceId":"e9197062-55d0-49da-b3f1-d87de892c236","sourcePort":"isFalseEv","targetId":"9d680b28-5648-c85b-9b60-79719a0e3251","targetPort":"to-Is Single Column"},{"sourceId":"e9197062-55d0-49da-b3f1-d87de892c236","sourcePort":"isTrueEv","targetId":"9d680b28-5648-c85b-9b60-79719a0e3251","targetPort":"to-Is Tripble Column"},{"sourceId":"292046a0-6a17-f5bd-d553-2e56b0f1d935","sourcePort":"prop-lat","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Latitude"},{"sourceId":"292046a0-6a17-f5bd-d553-2e56b0f1d935","sourcePort":"prop-lng","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Longitude"},{"sourceId":"9c3896e5-fbf3-6ac1-1569-ba3e71f73951","sourcePort":"isTrue","targetId":"124d8875-3048-a16c-c1a1-f06abedfc125","targetPort":"to-Is Double Column"},{"sourceId":"9c3896e5-fbf3-6ac1-1569-ba3e71f73951","sourcePort":"isFalseEv","targetId":"124d8875-3048-a16c-c1a1-f06abedfc125","targetPort":"to-Is Single Column"},{"sourceId":"124d8875-3048-a16c-c1a1-f06abedfc125","sourcePort":"Layout String","targetId":"fe384eeb-6c36-eaf6-7a85-102cfd1a2146","targetPort":"layoutString"},{"sourceId":"6415b6d3-80af-3683-1334-91a272960a00","sourcePort":"boundingWidth","targetId":"9c3896e5-fbf3-6ac1-1569-ba3e71f73951","targetPort":"width"},{"sourceId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","sourcePort":"Failure","targetId":"39c647c6-36e1-4270-fe95-3427c0050513","targetPort":"close"},{"sourceId":"2cb9c5d5-e661-975d-c66f-f2ea44ce475d","sourcePort":"value","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Province"},{"sourceId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","sourcePort":"value","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"District"},{"sourceId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","sourcePort":"value","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Ward"},{"sourceId":"6ef3f7c0-751c-cfcb-1c66-9f494aab2dec","sourcePort":"onClick","targetId":"c31361df-88e8-9109-a4eb-5752ad78abca","targetPort":"run"},{"sourceId":"c31361df-88e8-9109-a4eb-5752ad78abca","sourcePort":"out-Success","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Fetch"},{"sourceId":"c31361df-88e8-9109-a4eb-5752ad78abca","sourcePort":"out-Failute","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Fetch"},{"sourceId":"c31361df-88e8-9109-a4eb-5752ad78abca","sourcePort":"out-Ids","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"DamageImage"},{"sourceId":"545dd7c8-1e23-8b49-e671-eed0d282a465","sourcePort":"file","targetId":"c31361df-88e8-9109-a4eb-5752ad78abca","targetPort":"in-file"},{"sourceId":"545dd7c8-1e23-8b49-e671-eed0d282a465","sourcePort":"file","targetId":"951da391-a2a2-822f-61bf-1386e9533f03","targetPort":"in-file"},{"sourceId":"def0dce8-d480-65fe-2c93-00d906cddd21","sourcePort":"out-DefautValue","targetId":"c7f01474-36d0-a80e-b972-8853637c35f1","targetPort":"value"},{"sourceId":"c31361df-88e8-9109-a4eb-5752ad78abca","sourcePort":"out-Cancel","targetId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","targetPort":"Fetch"},{"sourceId":"14604613-214f-4748-80f2-3b69c234c95f","sourcePort":"out-file","targetId":"937b049a-6c54-073c-757b-f9278962407c","targetPort":"in-file"},{"sourceId":"951da391-a2a2-822f-61bf-1386e9533f03","sourcePort":"out-ImageUrl","targetId":"937b049a-6c54-073c-757b-f9278962407c","targetPort":"in-file"},{"sourceId":"937b049a-6c54-073c-757b-f9278962407c","sourcePort":"out-image","targetId":"bbf05d05-1485-e073-c238-82290fb9f52b","targetPort":"src"},{"sourceId":"d76150a7-9956-ac1b-ee47-71b1f455b1bf","sourcePort":"hoverStart","targetId":"cb909cc1-e63a-7e45-033f-0eefdd551cf7","targetPort":"to-open"},{"sourceId":"d76150a7-9956-ac1b-ee47-71b1f455b1bf","sourcePort":"hoverEnd","targetId":"cb909cc1-e63a-7e45-033f-0eefdd551cf7","targetPort":"to-close"},{"sourceId":"cb909cc1-e63a-7e45-033f-0eefdd551cf7","sourcePort":"at-open","targetId":"3fc2e64a-e092-ec5d-67dd-f275d0722691","targetPort":"visible"},{"sourceId":"748f4904-69a7-2512-7562-f769e4e86e08","sourcePort":"onClick","targetId":"545dd7c8-1e23-8b49-e671-eed0d282a465","targetPort":"open"},{"sourceId":"14604613-214f-4748-80f2-3b69c234c95f","sourcePort":"out-image","targetId":"bbf05d05-1485-e073-c238-82290fb9f52b","targetPort":"src"},{"sourceId":"1d481d57-5c7d-5593-0b7e-5e6fc07fa924","sourcePort":"onClick","targetId":"14604613-214f-4748-80f2-3b69c234c95f","targetPort":"run"},{"sourceId":"951da391-a2a2-822f-61bf-1386e9533f03","sourcePort":"out-ImageUrl","targetId":"bbf05d05-1485-e073-c238-82290fb9f52b","targetPort":"src"},{"sourceId":"cb909cc1-e63a-7e45-033f-0eefdd551cf7","sourcePort":"at-open","targetId":"f359b4b9-c112-2929-937a-c63d655fe794","targetPort":"visible"},{"sourceId":"41fba4c8-cf9e-8c45-5851-8261d8da563a","sourcePort":"out-Options","targetId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","targetPort":"enabled"},{"sourceId":"d7e369f3-6f04-3a82-6334-206f4d15acc2","sourcePort":"out-Options","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"enabled"},{"sourceId":"2cb9c5d5-e661-975d-c66f-f2ea44ce475d","sourcePort":"value","targetId":"24d977e1-5351-413a-4b4a-616010709e27","targetPort":"Value"},{"sourceId":"24d977e1-5351-413a-4b4a-616010709e27","sourcePort":"NullValue","targetId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","targetPort":"value"},{"sourceId":"24d977e1-5351-413a-4b4a-616010709e27","sourcePort":"NullValue","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"value"},{"sourceId":"24d977e1-5351-413a-4b4a-616010709e27","sourcePort":"EmptyArr","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"items"},{"sourceId":"24d977e1-5351-413a-4b4a-616010709e27","sourcePort":"EmptyArr","targetId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","targetPort":"items"},{"sourceId":"24d977e1-5351-413a-4b4a-616010709e27","sourcePort":"Done","targetId":"81a453ef-0ad4-9561-0d69-d1d59533cf54","targetPort":"Fetch"},{"sourceId":"65be63b7-3188-5fb3-d069-48f1f77c1b11","sourcePort":"Done","targetId":"dbc14437-ad2a-d73c-f99d-276bf6e2cc20","targetPort":"Fetch"},{"sourceId":"65be63b7-3188-5fb3-d069-48f1f77c1b11","sourcePort":"EmptyArr","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"items"},{"sourceId":"65be63b7-3188-5fb3-d069-48f1f77c1b11","sourcePort":"NullValue","targetId":"bf3fe88c-3df6-02b6-890c-b37abda91b77","targetPort":"value"},{"sourceId":"8be6ec96-836a-60cb-bce0-9bda02af7f1a","sourcePort":"value","targetId":"65be63b7-3188-5fb3-d069-48f1f77c1b11","targetPort":"Value"},{"sourceId":"6ef3f7c0-751c-cfcb-1c66-9f494aab2dec","sourcePort":"onClick","targetId":"fc5e74ed-a969-aab7-bd6c-d735186dd28d","targetPort":"to-onLoadding"},{"sourceId":"fc5e74ed-a969-aab7-bd6c-d735186dd28d","sourcePort":"Label","targetId":"6ef3f7c0-751c-cfcb-1c66-9f494aab2dec","targetPort":"label"},{"sourceId":"fc5e74ed-a969-aab7-bd6c-d735186dd28d","sourcePort":"Enabaled","targetId":"6ef3f7c0-751c-cfcb-1c66-9f494aab2dec","targetPort":"enabled"},{"sourceId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","sourcePort":"Success","targetId":"fc5e74ed-a969-aab7-bd6c-d735186dd28d","targetPort":"to-Default"},{"sourceId":"05be62e5-3fb5-6c37-407a-f0b3ac6e69e4","sourcePort":"Failure","targetId":"fc5e74ed-a969-aab7-bd6c-d735186dd28d","targetPort":"to-Default"},{"sourceId":"326366e8-bc7a-86cf-cd11-57ed393f250e","sourcePort":"out-Dang","targetId":"f7690a33-00b3-e769-e6b0-71f9f0c7d4f0","targetPort":"status"},{"sourceId":"6415b6d3-80af-3683-1334-91a272960a00","sourcePort":"didMount","targetId":"f7690a33-00b3-e769-e6b0-71f9f0c7d4f0","targetPort":"Do"},{"sourceId":"f7690a33-00b3-e769-e6b0-71f9f0c7d4f0","sourcePort":"Data","targetId":"31d77b1f-e18d-43f9-ba3f-45c2951320a2","targetPort":"in-ResponseArray"},{"sourceId":"f7690a33-00b3-e769-e6b0-71f9f0c7d4f0","sourcePort":"Data","targetId":"def0dce8-d480-65fe-2c93-00d906cddd21","targetPort":"in-ResponseArray"}],"ports":[],"roots":["6415b6d3-80af-3683-1334-91a272960a00"]},{"name":"/#Logic/SOS","nodes":[{"id":"b1868a68-c914-2673-8a98-08d7fd6d215a","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"3d6d61c3-8dee-66bb-b45e-9ba3cff41978","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"ff70af20-f8c5-0ae9-15cb-fd6659901461","type":"REST2","parameters":{"responseScript":"console.log(Response);\n\nif (Response.status === 201) {\n    Outputs.Success = true; \n    Outputs.Data = Response.content; \n} else {\n    Outputs.Failure = true; \n    Outputs.Data = null;\n}\n","method":"POST","requestScript":"//Add custom code to setup the request object before the request\n//is made.\n//\n//*Request.resource     contains the resource path of the request.\n//*Request.method       contains the method, GET, POST, PUT or DELETE.\n//*Request.headers      is a map where you can add additional headers.\n//*Request.parameters   is a map the parameters that will be appended\n//                      to the url.\n//*Request.content      contains the content of the request as a javascript\n//                      object.\n//\n\nRequest.content = {\n    data: {\n        \"FullName\": Inputs.FullName,\n        \"RequestDescription\": Inputs.RequestDescription,\n        \"PeopleCount\": parseInt(Inputs.PeopleCount) || 1,\n        \"NeedWater\": Inputs.NeedWater,\n        \"NeedFood\": Inputs.NeedFood,\n        \"NeedMedical\": Inputs.NeedMedical,\n        \"PhoneNumber\": Inputs.PhoneNumber,\n        \"Email\": Inputs.Email,\n        \"Location\": {\n            \"lat\": parseFloat(Inputs.Latitude),\n            \"lng\": parseFloat(Inputs.Longitude)\n        },\n        \"Province\": parseInt(Inputs.Province),\n        \"District\": parseInt(Inputs.District),\n        \"Ward\": parseInt(Inputs.Ward),\n        \"DamageImage\": Inputs.DamageImage,\n        \"Disaster\": parseInt(Inputs.Disaster),\n    }\n};\n"},"ports":[],"children":[]},{"id":"7b13cf07-4da0-5dad-b40b-32a94ed329ab","type":"/#Logic/Environment","parameters":{},"ports":[],"children":[]},{"id":"38978442-0466-8037-d5a0-93f36d866cc0","type":"JavaScriptFunction","parameters":{"functionScript":"Outputs.URL = Inputs.API_URL \r\n    + '/sos-requests';"},"ports":[{"name":"in-API_URL","displayName":"API_URL","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-URL","displayName":"URL","plug":"output","type":"*","group":"Outputs","index":5}],"children":[]}],"connections":[{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Fetch","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"fetch"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"FullName","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-FullName"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"RequestDescription","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-RequestDescription"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"PeopleCount","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-PeopleCount"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"NeedMedical","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-NeedMedical"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"PhoneNumber","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-PhoneNumber"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Email","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-Email"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"NeedFood","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-NeedFood"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"NeedWater","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-NeedWater"},{"sourceId":"7b13cf07-4da0-5dad-b40b-32a94ed329ab","sourcePort":"API_URL","targetId":"38978442-0466-8037-d5a0-93f36d866cc0","targetPort":"in-API_URL"},{"sourceId":"38978442-0466-8037-d5a0-93f36d866cc0","sourcePort":"out-URL","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"resource"},{"sourceId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","sourcePort":"out-Data","targetId":"3d6d61c3-8dee-66bb-b45e-9ba3cff41978","targetPort":"Response"},{"sourceId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","sourcePort":"out-Success","targetId":"3d6d61c3-8dee-66bb-b45e-9ba3cff41978","targetPort":"Success"},{"sourceId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","sourcePort":"out-Failure","targetId":"3d6d61c3-8dee-66bb-b45e-9ba3cff41978","targetPort":"Failure"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Latitude","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-Latitude"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Longitude","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-Longitude"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Disaster","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-Disaster"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"DamageImage","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-DamageImage"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Ward","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-Ward"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"District","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-District"},{"sourceId":"b1868a68-c914-2673-8a98-08d7fd6d215a","sourcePort":"Province","targetId":"ff70af20-f8c5-0ae9-15cb-fd6659901461","targetPort":"in-Province"}],"ports":[{"name":"Success","type":"*","plug":"output","index":0},{"name":"Failure","type":"*","plug":"output","index":1},{"name":"Fetch","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":1},{"name":"Response","type":"*","plug":"output","index":2},{"name":"FullName","type":"*","group":"Inputs","plug":"input","index":2},{"name":"Message","type":"*","plug":"output","index":3},{"name":"RequestDescription","type":"*","group":"Inputs","plug":"input","index":3},{"name":"PeopleCount","type":"*","group":"Inputs","plug":"input","index":4},{"name":"NeedWater","type":"*","group":"Inputs","plug":"input","index":5},{"name":"NeedFood","type":"*","group":"Inputs","plug":"input","index":6},{"name":"NeedMedical","type":"*","group":"Inputs","plug":"input","index":7},{"name":"PhoneNumber","type":"*","group":"Inputs","plug":"input","index":8},{"name":"Email","type":"*","group":"Inputs","plug":"input","index":9},{"name":"Latitude","type":"*","group":"Inputs","plug":"input","index":13},{"name":"Longitude","type":"*","group":"Inputs","plug":"input","index":14},{"name":"Disaster","type":"*","group":"Inputs","plug":"input","index":15},{"name":"DamageImage","type":"*","group":"Inputs","plug":"input","index":16},{"name":"Ward","type":"*","group":"Inputs","plug":"input","index":17},{"name":"District","type":"*","group":"Inputs","plug":"input","index":18},{"name":"Province","type":"*","group":"Inputs","plug":"input","index":19}],"roots":[]},{"name":"/#Logic/CurrentMapData","nodes":[{"id":"5abb5ad2-ca82-d3f1-be88-a0685d4baa0f","type":"JavaScriptFunction","parameters":{"functionScript":"const data = Inputs.data;\r\n\r\nfunction extractProvinces(data) {\r\n    const seen = new Set();\r\n    return data.flatMap((item) =>\r\n        item.Provinces.map((province) => ({\r\n            name: province.FullName,\r\n            location: {\r\n                lat: parseFloat(province.Latitude) || 0,\r\n                lng: parseFloat(province.Longitude) || 0,\r\n            },\r\n        }))\r\n    ).filter(province => {\r\n        if (seen.has(province.name)) {\r\n            return false;\r\n        } else {\r\n            seen.add(province.name);\r\n            return true;\r\n        }\r\n    });\r\n}\r\n\r\nif (data) {\r\n    const provinces = extractProvinces(data);\r\n\r\n    const oldProvinces = JSON.parse(localStorage.getItem(\"provinces\")) || [];\r\n\r\n    if (JSON.stringify(provinces) === JSON.stringify(oldProvinces)) {\r\n        return;\r\n    } else {\r\n        localStorage.setItem(\"provinces\", JSON.stringify(provinces));\r\n        Outputs.Success();\r\n        return;\r\n    }\r\n}\r\n"},"ports":[{"name":"in-data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5}],"children":[]},{"id":"c8c59d39-f5df-f74d-ba6f-588bd55bc3b1","type":"JavaScriptFunction","parameters":{"functionScript":"Outputs.Dang = 2"},"ports":[{"name":"out-Dang","displayName":"Dang","plug":"output","type":"*","group":"Outputs","index":4}],"children":[]},{"id":"6abd86d0-4795-ac36-8962-0840450825f2","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"8edf61c3-c8bc-0cb6-2fb5-77d62c215140","type":"/#Logic/ReloadPage","parameters":{},"ports":[],"children":[]},{"id":"09e1f465-fc9a-29ca-71d4-34abd4e6175b","type":"/#Logic/GetDisasters","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"5abb5ad2-ca82-d3f1-be88-a0685d4baa0f","sourcePort":"out-Success","targetId":"8edf61c3-c8bc-0cb6-2fb5-77d62c215140","targetPort":"Do"},{"sourceId":"6abd86d0-4795-ac36-8962-0840450825f2","sourcePort":"Do","targetId":"09e1f465-fc9a-29ca-71d4-34abd4e6175b","targetPort":"Do"},{"sourceId":"c8c59d39-f5df-f74d-ba6f-588bd55bc3b1","sourcePort":"out-Dang","targetId":"09e1f465-fc9a-29ca-71d4-34abd4e6175b","targetPort":"status"},{"sourceId":"09e1f465-fc9a-29ca-71d4-34abd4e6175b","sourcePort":"Success","targetId":"5abb5ad2-ca82-d3f1-be88-a0685d4baa0f","targetPort":"run"}],"ports":[{"name":"Do","type":{"name":"signal","allowConnectionsOnly":true},"group":"Actions","plug":"input","index":1},{"name":"idThienTai","type":"*","plug":"input","index":2}],"roots":[]}]