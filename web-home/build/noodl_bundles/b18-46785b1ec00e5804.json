[{"name":"/Page/notifications-detail","nodes":[{"id":"05f5e368-a7c9-f9ba-2b71-352f8452f686","type":"Page","parameters":{},"ports":[],"children":[{"id":"ea813b10-704f-79ff-1d4d-b06d13a822df","type":"Group","parameters":{"scrollEnabled":true,"paddingLeft":{"value":60,"unit":"px"},"paddingRight":{"value":60,"unit":"px"},"rowGap":{"value":16,"unit":"px"}},"ports":[],"children":[{"id":"90b4b98e-177f-e4b0-d240-adcbb2b80559","type":"Group","parameters":{"minWidth":{"value":100,"unit":"%"},"minHeight":{"value":80,"unit":"px"},"backgroundColor":"transparent","maxHeight":{"value":80,"unit":"px"},"flexDirection":"row","alignItems":"center","paddingLeft":{"value":12,"unit":"px"},"paddingRight":{"value":12,"unit":"px"},"paddingTop":{"value":12,"unit":"px"},"paddingBottom":{"value":12,"unit":"px"},"columnGap":{"value":12,"unit":"px"}},"ports":[],"children":[{"id":"61445c7a-eb2f-d451-aa5f-647403ea3301","type":"net.noodl.controls.button","parameters":{"boxShadowEnabled":false,"useLabel":false,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"arrow_back_ios_new","codeAsClass":false},"sizeMode":"contentSize","paddingTop":{"value":12,"unit":"px"},"paddingBottom":{"value":12,"unit":"px"},"paddingLeft":{"value":12,"unit":"px"},"paddingRight":{"value":12,"unit":"px"},"minWidth":{"value":0,"unit":"px"},"borderRadius":{"value":50,"unit":"%"},"alignY":"center","alignX":"center","iconSize":{"value":20,"unit":"px"}},"ports":[],"children":[]},{"id":"c73e76b8-fa82-ae7f-a517-63d1629e28b0","type":"Text","parameters":{"text":"Chi tiết yêu cầu","fontSize":{"value":18,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf"},"ports":[],"children":[]}]},{"id":"1c19b4dc-8479-af8f-c821-591b9d8a6ee7","type":"net.noodl.visual.columns","parameters":{"layoutString":"1 1"},"ports":[],"children":[{"id":"26d1dbdc-a1e7-fcc1-a8ea-c9804627bcb0","type":"Group","parameters":{"rowGap":{"value":16,"unit":"px"}},"ports":[],"children":[{"id":"fd95fd1e-43d9-cc6f-ed00-b16a7d0a8190","type":"Group","parameters":{"backgroundColor":"Grey - 200","paddingTop":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"paddingBottom":{"value":24,"unit":"px"},"paddingLeft":{"value":24,"unit":"px"},"borderRadius":{"value":8,"unit":"px"},"sizeMode":"contentHeight","rowGap":{"value":4,"unit":"px"}},"ports":[],"children":[{"id":"b4d82295-348f-8d2a-acaa-2c0477750a04","type":"Text","parameters":{"text":"Thông tin người gửi","fontSize":{"value":18,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Bold.ttf","color":"Primary"},"ports":[],"children":[]},{"id":"b37507e3-b3e9-4440-814d-fe388c576a48","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentHeight","marginBottom":{"value":0,"unit":"px"}},"ports":[],"children":[{"id":"9a816d5e-9e9e-0c8d-a198-e13b02f4d449","type":"Text","parameters":{"text":"Họ tên: ","sizeMode":"contentSize","color":"Grey - 600","fontSize":{"value":18,"unit":"px"}},"ports":[],"children":[]},{"id":"172fc6cf-6675-6c59-68f4-51859c424550","type":"Text","parameters":{"text":"....","sizeMode":"contentSize","fontSize":{"value":18,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf"},"ports":[],"children":[]}]},{"id":"d04985b6-3ec2-858c-91be-b4f02e9f807b","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentHeight","marginBottom":{"value":0,"unit":"px"}},"ports":[],"children":[{"id":"55811b65-a6ea-787a-6230-8534db0b2105","type":"Text","parameters":{"text":"Số điện thoại: ","sizeMode":"contentSize","color":"Grey - 600","fontSize":{"value":18,"unit":"px"}},"ports":[],"children":[]},{"id":"558ac9ef-d5a2-c95b-4e91-91cba0a00efc","type":"net.noodl.controls.button","parameters":{"paddingLeft":{"value":0,"unit":"px"},"paddingRight":{"value":0,"unit":"px"},"backgroundColor":"transparent","sizeMode":"contentSize","color":"Grey - 900","alignY":"bottom","alignX":"left","minWidth":{"value":0,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf","label":"","fontSize":{"value":18,"unit":"px"}},"stateParameters":{"hover":{"color":"#1666FF"}},"ports":[],"children":[]}]},{"id":"d8e74b31-c42a-96c7-f3c4-e2a2312b5e9e","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentHeight","marginBottom":{"value":0,"unit":"px"}},"ports":[],"children":[{"id":"fbcc5cb3-34ac-30f1-34cb-659bbe85300a","type":"Text","parameters":{"text":"Email: ","sizeMode":"contentSize","color":"Grey - 600","fontSize":{"value":18,"unit":"px"}},"ports":[],"children":[]},{"id":"263b5700-f6e3-069b-ee51-7d630527ea62","type":"net.noodl.controls.button","parameters":{"paddingLeft":{"value":0,"unit":"px"},"paddingRight":{"value":0,"unit":"px"},"backgroundColor":"transparent","sizeMode":"contentSize","color":"Grey - 900","alignY":"bottom","alignX":"left","minWidth":{"value":0,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf","label":"","fontSize":{"value":18,"unit":"px"}},"stateParameters":{"hover":{"color":"#1666FF"}},"ports":[],"children":[]}]},{"id":"0aaba0ee-8f19-308e-cc84-6e249f0d41c8","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":8,"unit":"px"},"sizeMode":"contentHeight","alignX":"left"},"ports":[],"children":[{"id":"0f4f51b5-71d6-d803-c9cf-f9fca6d5638f","type":"Text","parameters":{"text":"Địa chỉ:","sizeMode":"contentSize","color":"Grey - 600","fontSize":{"value":18,"unit":"px"}},"ports":[],"children":[]},{"id":"2cdbb2d6-cc5b-a258-f4de-b99530c3fea6","type":"Text","parameters":{"text":"...","sizeMode":"contentHeight","fontSize":{"value":18,"unit":"px"}},"ports":[],"children":[]}]}]},{"id":"2d6c0afd-bd04-a03c-0e99-edbd011644a9","type":"Group","parameters":{"backgroundColor":"Grey - 200","paddingTop":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"paddingBottom":{"value":24,"unit":"px"},"paddingLeft":{"value":24,"unit":"px"},"borderRadius":{"value":8,"unit":"px"},"sizeMode":"contentHeight"},"ports":[],"children":[{"id":"600ba596-714a-f4c0-32a7-806f1bf16757","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentHeight","alignX":"left"},"ports":[],"children":[{"id":"ddafefee-520c-ccc0-13e9-17af79dd7551","type":"Text","parameters":{"text":"Tên thiên tai: ","sizeMode":"contentSize","color":"Danger","fontSize":{"value":18,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Bold.ttf"},"ports":[],"children":[]},{"id":"1c11738d-b847-8a86-73d0-bda70ecf4ef7","type":"Text","parameters":{"text":"...","sizeMode":"contentSize","fontSize":{"value":18,"unit":"px"}},"ports":[],"children":[]}]},{"id":"1b717a04-f9dd-a1e3-43e3-43520da0c634","type":"Group","parameters":{},"ports":[],"children":[{"id":"82956293-6778-fba6-af5f-e0c52747afe7","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentSize","paddingTop":{"value":4,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"}},"ports":[],"children":[{"id":"c64b5602-5933-63ca-da1b-7de69dfce2f1","type":"Text","parameters":{"text":"Trạng thái: ","sizeMode":"contentSize","color":"Grey - 600","fontSize":{"value":18,"unit":"px"}},"ports":[],"children":[]},{"id":"6976a3ae-c1e0-d583-eeaf-143f86add54d","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":8,"unit":"px"},"justifyContent":"flex-start","paddingTop":{"value":4,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"paddingLeft":{"value":8,"unit":"px"},"sizeMode":"contentSize","backgroundColor":"ECFCCB","borderRadius":{"value":8,"unit":"px"},"borderStyle":"solid","borderWidth":{"value":0.4,"unit":"px"},"borderColor":"Success"},"ports":[],"children":[{"id":"b2e8e6e8-7b75-34a9-8b8d-8ab55cc14ebe","type":"Text","variant":"active","parameters":{"fontSize":{"value":14,"unit":"px"},"text":"Đã hỗ trợ"},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]}]},{"id":"07f13bdc-0dce-bf88-ee1a-db1bf771509f","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":8,"unit":"px"},"justifyContent":"flex-start","paddingTop":{"value":4,"unit":"px"},"paddingBottom":{"value":4,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"paddingLeft":{"value":8,"unit":"px"},"sizeMode":"contentSize","backgroundColor":"FEF8C3","borderRadius":{"value":8,"unit":"px"},"borderStyle":"solid","borderWidth":{"value":0.4,"unit":"px"},"borderColor":"Notice"},"ports":[],"children":[{"id":"5662f2d3-b422-9b5d-a54b-1e34a36526ef","type":"Text","variant":"active","parameters":{"fontSize":{"value":14,"unit":"px"},"text":"Đang hỗ trợ","color":"A06109"},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]}]},{"id":"d8e60d91-da4f-e6d2-0916-e53deca918c0","type":"Group","parameters":{"flexDirection":"row","justifyContent":"flex-start","borderRadius":{"value":8,"unit":"px"},"backgroundColor":"FBECEC","borderStyle":"solid","borderWidth":{"value":0.2,"unit":"px"},"borderColor":"Notice","visible":true,"paddingBottom":{"value":4,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"paddingTop":{"value":4,"unit":"px"},"paddingLeft":{"value":8,"unit":"px"},"sizeMode":"contentSize"},"ports":[],"children":[{"id":"72386739-3d26-9f22-353c-2cc99e6faf72","type":"Text","variant":"active","parameters":{"text":"Chưa được hỗ trợ","color":"Danger","fontSize":{"value":14,"unit":"px"},"textAlignY":"center"},"stateParameters":{},"stateTransitions":{},"defaultStateTransitions":{},"ports":[],"children":[]}]}]}]}]},{"id":"3656be7e-768a-d1c1-64ec-13c656a3f150","type":"Group","parameters":{"backgroundColor":"Grey - 200","paddingTop":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"paddingBottom":{"value":24,"unit":"px"},"paddingLeft":{"value":24,"unit":"px"},"borderRadius":{"value":8,"unit":"px"},"sizeMode":"contentHeight"},"ports":[],"children":[{"id":"5023e1e4-d916-24e3-1a13-d56343fae7c3","type":"Text","parameters":{"text":"Nhu cầu","fontSize":{"value":18,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf","marginBottom":{"value":20,"unit":"px"}},"ports":[],"children":[]},{"id":"42fd9cbb-4356-f463-7b16-fc11e804d703","type":"net.noodl.visual.columns","parameters":{"layoutString":"1 ","direction":"row","minWidth":{"value":100,"unit":"px"}},"ports":[],"children":[{"id":"0be94dfa-02f6-bd70-19a4-307df97c90a8","type":"net.noodl.controls.checkbox","parameters":{"label":"Đồ ăn","useLabel":true,"enabled":false},"stateParameters":{"disabled":{"opacity":1}},"ports":[],"children":[]},{"id":"7e067b1c-92d2-3351-6082-8d39252ad643","type":"net.noodl.controls.checkbox","parameters":{"label":"Nước uống","enabled":false},"stateParameters":{"disabled":{"opacity":1}},"ports":[],"children":[]},{"id":"f4365a67-296a-6496-dd84-58346fd3c806","type":"net.noodl.controls.checkbox","parameters":{"label":"Y tế","enabled":false},"stateParameters":{"disabled":{"opacity":1}},"ports":[],"children":[]},{"id":"5df1cb04-aac7-a1c0-de36-db80f9960288","type":"net.noodl.controls.checkbox","parameters":{"label":"Khác","enabled":false,"checked":true},"stateParameters":{"disabled":{"opacity":1}},"ports":[],"children":[]}]},{"id":"efb3c99f-e7ae-c777-538b-a040b072ea16","type":"Group","parameters":{"flexDirection":"column","columnGap":{"value":24,"unit":"px"}},"ports":[],"children":[{"id":"b3b734a5-6b89-bf82-d649-4596a29e33ab","type":"Text","parameters":{"text":"Chi tiết:","sizeMode":"contentSize","color":"Grey - 600","fontSize":{"value":18,"unit":"px"},"marginTop":{"value":12,"unit":"px"}},"ports":[],"children":[]},{"id":"cdcfce5a-470f-4fa0-de9f-a91456aad515","type":"Text","parameters":{"fontSize":{"value":18,"unit":"px"}},"ports":[],"children":[]}]}]}]},{"id":"caab2250-13d4-d85c-a05f-4b4e7d1198c2","type":"Group","parameters":{},"ports":[],"children":[{"id":"d09f7dd5-8ad8-4759-4974-f336ac7d0ec5","type":"Group","parameters":{"backgroundColor":"Grey - 200","paddingTop":{"value":8,"unit":"px"},"paddingRight":{"value":8,"unit":"px"},"paddingBottom":{"value":8,"unit":"px"},"paddingLeft":{"value":8,"unit":"px"},"borderRadius":{"value":8,"unit":"px"},"sizeMode":"explicit","rowGap":{"value":4,"unit":"px"}},"ports":[],"children":[{"id":"d449d08c-5fd7-e4c0-7504-6cab32dc43c5","type":"/Components/MapRequestDetail","parameters":{},"ports":[],"children":[]}]}]}]},{"id":"6fcf11dd-133d-be08-e288-d73e8fa7c83b","type":"Group","parameters":{"backgroundColor":"Grey - 200","paddingTop":{"value":24,"unit":"px"},"paddingRight":{"value":24,"unit":"px"},"paddingBottom":{"value":24,"unit":"px"},"paddingLeft":{"value":24,"unit":"px"},"borderRadius":{"value":8,"unit":"px"},"sizeMode":"contentHeight","marginBottom":{"value":16,"unit":"px"}},"ports":[],"children":[{"id":"7fda6af6-095f-3a29-8a7c-922ac489fbf1","type":"Text","parameters":{"text":"Hình ảnh hiện trường:","fontSize":{"value":18,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Medium.ttf","marginBottom":{"value":20,"unit":"px"}},"ports":[],"children":[]},{"id":"aeb76770-4e30-2f9d-792d-ed6da0791dc9","type":"Group","parameters":{"flexDirection":"row","columnGap":{"value":8,"unit":"px"},"sizeMode":"contentSize"},"ports":[],"children":[{"id":"7c136cf5-6c68-0440-2704-188ebb814797","type":"For Each","parameters":{"template":"/page/Chi tiet yeu cau/ImageYeuCau"},"ports":[],"children":[]}]}]}]}]},{"id":"4bc8a09f-533e-20a3-5c22-3cb30ffca286","type":"PageInputs","parameters":{"queryParams":"id"},"ports":[],"children":[]},{"id":"3f1ade8e-4aa4-597d-1173-eea052bf514a","type":"/#Logic/GetRequestDetail","parameters":{},"ports":[],"children":[]},{"id":"fd13396b-967d-c56d-736c-28c0adf2f6ee","type":"JavaScriptFunction","parameters":{"functionScript":"const data = Inputs.data\r\n\r\nif (!data) return\r\n\r\nOutputs.FullName = data?.FullName\r\nOutputs.RequestDescription = data?.RequestDescription;\r\nOutputs.PeopleCount = data?.PeopleCount;\r\nOutputs.NeedWater = data?.NeedWater;\r\nOutputs.NeedFood = data?.NeedFood;\r\nOutputs.NeedMedical = data?.NeedMedical;\r\nOutputs.Location = data?.Location;\r\nOutputs.PhoneNumber = data?.PhoneNumber;\r\nOutputs.Email = data?.Email;\r\nOutputs.Province = data?.Province;\r\nOutputs.District = data?.District;\r\nOutputs.Ward = data?.Ward;\r\nOutputs.Disaster = data?.Disaster;\r\nOutputs.DisasterDescription = data?.Disaster?.Description;\r\nOutputs.DamageImage = data?.DamageImage\r\nOutputs.State = data?.State\r\nOutputs.AcceptedBy = data?.AcceptedBy\r\n"},"ports":[{"name":"in-data","displayName":"data","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-FullName","displayName":"FullName","plug":"output","type":"*","group":"Outputs","index":5},{"name":"out-RequestDescription","displayName":"RequestDescription","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-PeopleCount","displayName":"PeopleCount","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-NeedWater","displayName":"NeedWater","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-NeedFood","displayName":"NeedFood","plug":"output","type":"*","group":"Outputs","index":9},{"name":"out-NeedMedical","displayName":"NeedMedical","plug":"output","type":"*","group":"Outputs","index":10},{"name":"out-Location","displayName":"Location","plug":"output","type":"*","group":"Outputs","index":11},{"name":"out-PhoneNumber","displayName":"PhoneNumber","plug":"output","type":"*","group":"Outputs","index":12},{"name":"out-Email","displayName":"Email","plug":"output","type":"*","group":"Outputs","index":13},{"name":"out-Province","displayName":"Province","plug":"output","type":"*","group":"Outputs","index":14},{"name":"out-District","displayName":"District","plug":"output","type":"*","group":"Outputs","index":15},{"name":"out-Ward","displayName":"Ward","plug":"output","type":"*","group":"Outputs","index":16},{"name":"out-Disaster","displayName":"Disaster","plug":"output","type":"*","group":"Outputs","index":17},{"name":"out-DisasterDescription","displayName":"DisasterDescription","plug":"output","type":"*","group":"Outputs","index":18},{"name":"out-DamageImage","displayName":"DamageImage","plug":"output","type":"*","group":"Outputs","index":19},{"name":"out-State","displayName":"State","plug":"output","type":"*","group":"Outputs","index":20},{"name":"out-AcceptedBy","displayName":"AcceptedBy","plug":"output","type":"*","group":"Outputs","index":21}],"children":[]},{"id":"992e876d-80d6-cc0f-e786-643013ca456e","type":"JavaScriptFunction","parameters":{"functionScript":"const provinceName = Inputs.Province?.FullName || \"\"\r\nconst districtName = Inputs.District?.FullName || \"\"\r\nconst wardName = Inputs.Ward?.FullName || \"\"\r\n\r\nconst parts = [];\r\n\r\n\r\nif (wardName) parts.push(wardName);\r\nif (districtName) parts.push(districtName);\r\nif (provinceName) parts.push(provinceName);\r\n\r\nif (parts.length > 0) {\r\n    const address = `${parts.join(\", \")}`; // Ghép các phần tử không rỗng\r\n    Outputs.Address = address\r\n}\r\n"},"ports":[{"name":"in-Province","displayName":"Province","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-District","displayName":"District","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Ward","displayName":"Ward","plug":"input","type":"*","group":"Inputs","index":6},{"name":"out-Address","displayName":"Address","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"c01cdc52-53a5-e5a6-7c24-2b5ec15abf31","type":"net.noodl.externallink","parameters":{"link":""},"ports":[],"children":[]},{"id":"ea41e4ab-ca88-0a17-986b-a5412ef10d9e","type":"Expression","parameters":{"expression":"\"tel:\" + phone"},"ports":[],"children":[]},{"id":"d67bafe1-c32a-d6a7-3858-1328ab9118f2","type":"Expression","parameters":{"expression":"\"mailto:\" + email"},"ports":[],"children":[]},{"id":"44cdd98f-68e1-7f2b-5944-0ea1ee31b22b","type":"net.noodl.externallink","parameters":{"link":""},"ports":[],"children":[]},{"id":"1ecac04a-1d90-0e32-fb4a-5c19b4e6c4e8","type":"Expression","parameters":{"expression":"Location.lat"},"ports":[],"children":[]},{"id":"62be3ab3-9fe9-e2b2-894f-036d4208842e","type":"Expression","parameters":{"expression":"Location.lng"},"ports":[],"children":[]},{"id":"1f46248a-ce61-bdec-6541-8dd2391160d6","type":"JavaScriptFunction","parameters":{"functionScript":"const state = Inputs.state || false\r\nconst AcceptedBy = Inputs.AcceptedBy\r\n\r\nOutputs.ChuaHoTro = false;\r\nOutputs.DangHoTro = false;\r\nOutputs.DaHoTro = false;\r\n\r\nif (!state && AcceptedBy === null) {\r\n    Outputs.ChuaHoTro = true;\r\n    return\r\n} else if (!state && AcceptedBy !== null) {\r\n    Outputs.DangHoTro = true;\r\n    return\r\n} else if (state) {\r\n    Outputs.DaHoTro = true;\r\n    return;\r\n}"},"ports":[{"name":"in-state","displayName":"state","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-AcceptedBy","displayName":"AcceptedBy","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-ChuaHoTro","displayName":"ChuaHoTro","plug":"output","type":"*","group":"Outputs","index":6},{"name":"out-DangHoTro","displayName":"DangHoTro","plug":"output","type":"*","group":"Outputs","index":7},{"name":"out-DaHoTro","displayName":"DaHoTro","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"1d84954b-60ef-4623-ad87-03cac659fc32","type":"Expression","parameters":{"expression":"Disaster.Name || ''"},"ports":[],"children":[]},{"id":"f60d497f-ff49-a553-12c2-f234542e9ab4","type":"RouterNavigate","parameters":{"router":"Main","target":"/Page/notifications"},"ports":[],"children":[]},{"id":"30aaa806-d5cf-ff8b-c39f-a8d4b48974f8","type":"Expression","parameters":{"expression":"width > 250\r\n"},"ports":[],"children":[]},{"id":"c7210156-29c9-05b2-d1ba-6c7e6279fe09","type":"States","parameters":{"values":"Layout String","states":"Is Single Column,Is Double Column","useTransitions":false,"type-Layout String":"string","value-Is Single Column-Layout String":"1","value-Is Double Column-Layout String":"1 1"},"ports":[],"children":[]},{"id":"076fe1cc-b6d0-c4d5-843b-cc449414cc96","type":"/Components/LoadingSpinner","parameters":{},"ports":[],"children":[]},{"id":"139f1efd-f3e6-bc6e-7060-aa17bc478373","type":"Expression","parameters":{"expression":"width > 700"},"ports":[],"children":[]},{"id":"b055cd4e-85f0-879f-13cb-facd97d8070b","type":"States","parameters":{"values":"Layout String,Padding","states":"Is Single Column,Is Double Column","useTransitions":false,"type-Layout String":"string","value-Is Single Column-Layout String":"1","value-Is Double Column-Layout String":"1 1","value-Is Single Column-Padding":16,"value-Is Double Column-Padding":32},"ports":[],"children":[]},{"id":"67c914ee-661d-32ea-aef0-5395550302e0","type":"Text","parameters":{},"ports":[],"children":[]},{"id":"6322b54c-a59d-1912-6997-d525b0c8327b","type":"Text","parameters":{},"ports":[],"children":[]},{"id":"6f35ae28-b6bd-75a8-4b77-6aa6b190cccb","type":"Text","parameters":{"text":"Ví trí người gửi","fontSize":{"value":18,"unit":"px"},"fontFamily":"fonts/Roboto/Roboto-Bold.ttf","color":"Primary","marginLeft":{"value":8,"unit":"px"},"marginBottom":{"value":8,"unit":"px"}},"ports":[],"children":[]}],"connections":[{"sourceId":"3f1ade8e-4aa4-597d-1173-eea052bf514a","sourcePort":"data","targetId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","targetPort":"in-data"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-FullName","targetId":"172fc6cf-6675-6c59-68f4-51859c424550","targetPort":"text"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-Province","targetId":"992e876d-80d6-cc0f-e786-643013ca456e","targetPort":"in-Province"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-District","targetId":"992e876d-80d6-cc0f-e786-643013ca456e","targetPort":"in-District"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-Ward","targetId":"992e876d-80d6-cc0f-e786-643013ca456e","targetPort":"in-Ward"},{"sourceId":"992e876d-80d6-cc0f-e786-643013ca456e","sourcePort":"out-Address","targetId":"2cdbb2d6-cc5b-a258-f4de-b99530c3fea6","targetPort":"text"},{"sourceId":"ea41e4ab-ca88-0a17-986b-a5412ef10d9e","sourcePort":"result","targetId":"c01cdc52-53a5-e5a6-7c24-2b5ec15abf31","targetPort":"link"},{"sourceId":"558ac9ef-d5a2-c95b-4e91-91cba0a00efc","sourcePort":"onClick","targetId":"c01cdc52-53a5-e5a6-7c24-2b5ec15abf31","targetPort":"do"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-PhoneNumber","targetId":"558ac9ef-d5a2-c95b-4e91-91cba0a00efc","targetPort":"label"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-PhoneNumber","targetId":"ea41e4ab-ca88-0a17-986b-a5412ef10d9e","targetPort":"phone"},{"sourceId":"d67bafe1-c32a-d6a7-3858-1328ab9118f2","sourcePort":"result","targetId":"44cdd98f-68e1-7f2b-5944-0ea1ee31b22b","targetPort":"link"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-Email","targetId":"d67bafe1-c32a-d6a7-3858-1328ab9118f2","targetPort":"email"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-NeedFood","targetId":"0be94dfa-02f6-bd70-19a4-307df97c90a8","targetPort":"checked"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-NeedWater","targetId":"7e067b1c-92d2-3351-6082-8d39252ad643","targetPort":"checked"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-NeedMedical","targetId":"f4365a67-296a-6496-dd84-58346fd3c806","targetPort":"checked"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-NeedWater","targetId":"5df1cb04-aac7-a1c0-de36-db80f9960288","targetPort":"uncheck"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-NeedFood","targetId":"5df1cb04-aac7-a1c0-de36-db80f9960288","targetPort":"uncheck"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-NeedMedical","targetId":"5df1cb04-aac7-a1c0-de36-db80f9960288","targetPort":"uncheck"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-RequestDescription","targetId":"cdcfce5a-470f-4fa0-de9f-a91456aad515","targetPort":"text"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-DamageImage","targetId":"7c136cf5-6c68-0440-2704-188ebb814797","targetPort":"items"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-Location","targetId":"1ecac04a-1d90-0e32-fb4a-5c19b4e6c4e8","targetPort":"Location"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-Location","targetId":"62be3ab3-9fe9-e2b2-894f-036d4208842e","targetPort":"Location"},{"sourceId":"62be3ab3-9fe9-e2b2-894f-036d4208842e","sourcePort":"result","targetId":"6322b54c-a59d-1912-6997-d525b0c8327b","targetPort":"text"},{"sourceId":"1ecac04a-1d90-0e32-fb4a-5c19b4e6c4e8","sourcePort":"result","targetId":"67c914ee-661d-32ea-aef0-5395550302e0","targetPort":"text"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-State","targetId":"1f46248a-ce61-bdec-6541-8dd2391160d6","targetPort":"in-state"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-AcceptedBy","targetId":"1f46248a-ce61-bdec-6541-8dd2391160d6","targetPort":"in-AcceptedBy"},{"sourceId":"1f46248a-ce61-bdec-6541-8dd2391160d6","sourcePort":"out-ChuaHoTro","targetId":"d8e60d91-da4f-e6d2-0916-e53deca918c0","targetPort":"mounted"},{"sourceId":"1f46248a-ce61-bdec-6541-8dd2391160d6","sourcePort":"out-DangHoTro","targetId":"07f13bdc-0dce-bf88-ee1a-db1bf771509f","targetPort":"mounted"},{"sourceId":"1f46248a-ce61-bdec-6541-8dd2391160d6","sourcePort":"out-DaHoTro","targetId":"6976a3ae-c1e0-d583-eeaf-143f86add54d","targetPort":"mounted"},{"sourceId":"992e876d-80d6-cc0f-e786-643013ca456e","sourcePort":"out-Address","targetId":"0aaba0ee-8f19-308e-cc84-6e249f0d41c8","targetPort":"mounted"},{"sourceId":"4bc8a09f-533e-20a3-5c22-3cb30ffca286","sourcePort":"pm-id","targetId":"3f1ade8e-4aa4-597d-1173-eea052bf514a","targetPort":"id"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-Disaster","targetId":"1d84954b-60ef-4623-ad87-03cac659fc32","targetPort":"Disaster"},{"sourceId":"1d84954b-60ef-4623-ad87-03cac659fc32","sourcePort":"result","targetId":"1c11738d-b847-8a86-73d0-bda70ecf4ef7","targetPort":"text"},{"sourceId":"05f5e368-a7c9-f9ba-2b71-352f8452f686","sourcePort":"didMount","targetId":"3f1ade8e-4aa4-597d-1173-eea052bf514a","targetPort":"Do"},{"sourceId":"61445c7a-eb2f-d451-aa5f-647403ea3301","sourcePort":"onClick","targetId":"f60d497f-ff49-a553-12c2-f234542e9ab4","targetPort":"navigate"},{"sourceId":"263b5700-f6e3-069b-ee51-7d630527ea62","sourcePort":"onClick","targetId":"44cdd98f-68e1-7f2b-5944-0ea1ee31b22b","targetPort":"do"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-Email","targetId":"263b5700-f6e3-069b-ee51-7d630527ea62","targetPort":"label"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-Email","targetId":"d8e74b31-c42a-96c7-f3c4-e2a2312b5e9e","targetPort":"mounted"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-PhoneNumber","targetId":"d04985b6-3ec2-858c-91be-b4f02e9f807b","targetPort":"mounted"},{"sourceId":"30aaa806-d5cf-ff8b-c39f-a8d4b48974f8","sourcePort":"isTrue","targetId":"c7210156-29c9-05b2-d1ba-6c7e6279fe09","targetPort":"to-Is Double Column"},{"sourceId":"30aaa806-d5cf-ff8b-c39f-a8d4b48974f8","sourcePort":"isFalseEv","targetId":"c7210156-29c9-05b2-d1ba-6c7e6279fe09","targetPort":"to-Is Single Column"},{"sourceId":"c7210156-29c9-05b2-d1ba-6c7e6279fe09","sourcePort":"Layout String","targetId":"42fd9cbb-4356-f463-7b16-fc11e804d703","targetPort":"layoutString"},{"sourceId":"3656be7e-768a-d1c1-64ec-13c656a3f150","sourcePort":"boundingWidth","targetId":"30aaa806-d5cf-ff8b-c39f-a8d4b48974f8","targetPort":"width"},{"sourceId":"fd13396b-967d-c56d-736c-28c0adf2f6ee","sourcePort":"out-DamageImage","targetId":"6fcf11dd-133d-be08-e288-d73e8fa7c83b","targetPort":"mounted"},{"sourceId":"3f1ade8e-4aa4-597d-1173-eea052bf514a","sourcePort":"Success","targetId":"076fe1cc-b6d0-c4d5-843b-cc449414cc96","targetPort":"Hide"},{"sourceId":"3f1ade8e-4aa4-597d-1173-eea052bf514a","sourcePort":"Failure","targetId":"076fe1cc-b6d0-c4d5-843b-cc449414cc96","targetPort":"Hide"},{"sourceId":"139f1efd-f3e6-bc6e-7060-aa17bc478373","sourcePort":"isTrue","targetId":"b055cd4e-85f0-879f-13cb-facd97d8070b","targetPort":"to-Is Double Column"},{"sourceId":"139f1efd-f3e6-bc6e-7060-aa17bc478373","sourcePort":"isFalseEv","targetId":"b055cd4e-85f0-879f-13cb-facd97d8070b","targetPort":"to-Is Single Column"},{"sourceId":"ea813b10-704f-79ff-1d4d-b06d13a822df","sourcePort":"boundingWidth","targetId":"139f1efd-f3e6-bc6e-7060-aa17bc478373","targetPort":"width"},{"sourceId":"b055cd4e-85f0-879f-13cb-facd97d8070b","sourcePort":"Layout String","targetId":"1c19b4dc-8479-af8f-c821-591b9d8a6ee7","targetPort":"layoutString"},{"sourceId":"b055cd4e-85f0-879f-13cb-facd97d8070b","sourcePort":"Padding","targetId":"ea813b10-704f-79ff-1d4d-b06d13a822df","targetPort":"paddingLeft"},{"sourceId":"b055cd4e-85f0-879f-13cb-facd97d8070b","sourcePort":"Padding","targetId":"ea813b10-704f-79ff-1d4d-b06d13a822df","targetPort":"paddingRight"}],"ports":[],"roots":["05f5e368-a7c9-f9ba-2b71-352f8452f686","67c914ee-661d-32ea-aef0-5395550302e0","6322b54c-a59d-1912-6997-d525b0c8327b","6f35ae28-b6bd-75a8-4b77-6aa6b190cccb"]},{"name":"/Components/MapRequestDetail","nodes":[{"id":"238feaea-8f84-c867-d778-e372d1c95183","type":"Group","parameters":{"sizeMode":"explicit","minWidth":{"value":100,"unit":"%"},"minHeight":{"value":100,"unit":"%"},"maxWidth":{"value":100,"unit":"%"},"maxHeight":{"value":100,"unit":"%"},"width":{"value":100,"unit":"%","isFixed":true},"height":{"value":100,"unit":"%","isFixed":true}},"ports":[],"children":[{"id":"9d4e47f9-4063-ca14-608d-9faf1d2cf03b","type":"module.inlineHtml","parameters":{"html":"<div id=\"map\" style=\"width: 100%; height: 100%;\"></div>\r\n<script>\r\n  // tọa độ giữa tỉnh (các tỉnh đang bị thiên tai)\r\n  function calculateCenter(points) {\r\n    // Kiểm tra xem danh sách tọa độ có rỗng hay không\r\n    if (!points || points.length === 0) {\r\n      return null; // Không có tọa độ nào để tính\r\n    }\r\n\r\n    let totalX = 0,\r\n      totalY = 0;\r\n\r\n    // Duyệt qua danh sách tọa độ và tính tổng\r\n    points.forEach((point) => {\r\n      totalX += point.lng;\r\n      totalY += point.lat;\r\n    });\r\n\r\n    // Tính trung bình cộng\r\n    const centerX = totalX / points.length;\r\n    const centerY = totalY / points.length;\r\n\r\n    // Trả về tọa độ trung tâm\r\n    return { lng: centerX, lat: centerY };\r\n  }\r\n\r\n  function calculateZoom(points) {\r\n    let maxDistance = 0;\r\n    points.forEach((point1) => {\r\n      points.forEach((point2) => {\r\n        const distance = Math.sqrt(\r\n          Math.pow(point1.lat - point2.lat, 2) +\r\n            Math.pow(point1.lng - point2.lng, 2)\r\n        );\r\n        if (distance > maxDistance) maxDistance = distance;\r\n      });\r\n    });\r\n\r\n    // Quy đổi khoảng cách thành mức zoom\r\n    // Bạn có thể điều chỉnh giá trị này dựa trên kích thước bản đồ\r\n    if (maxDistance > 1) return 5; // Zoom out xa hơn nếu khoảng cách lớn\r\n    if (maxDistance > 0.5) return 8; // Trung bình\r\n    return 10; // Zoom gần\r\n  }\r\n\r\n  // Hàm chuẩn hóa chuỗi\r\n  function normalizeString(str) {\r\n    return str\r\n      .replace(/Tỉnh/g, \"\")\r\n      .replace(/Thành phố/g, \"\")\r\n      .trim(); // Xóa khoảng trắng đầu và cuối chuỗi\r\n  }\r\n\r\n  function updatePosition(position) {\r\n    const { latitude, longitude } = position.coords;\r\n    console.log({ latitude, longitude });\r\n    marker.setLngLat([longitude, latitude]);\r\n  }\r\n\r\n  // khai báo\r\n  function createMapbox() {\r\n    mapboxgl.accessToken =\r\n      \"pk.eyJ1IjoiZGhpZXAyMzA3IiwiYSI6ImNtNDRpeDFtejBuNzkycHB6bXp6eWZ1MTQifQ.169cDiC_Q2YWzRBdIxxgPg\";\r\n\r\n    const provinces = localStorage.getItem(\"provinces\")\r\n      ? JSON.parse(localStorage.getItem(\"provinces\"))\r\n      : [];\r\n      \r\n    const locations = localStorage.getItem(\"locations\")\r\n      ? JSON.parse(localStorage.getItem(\"locations\"))\r\n      : [];\r\n\r\n    const provinceNames = provinces?.map((province) =>\r\n      normalizeString(province.name)\r\n    );\r\n\r\n    // Lấy vị trí ở giữa các tỉnh\r\n    let center = {\r\n      lng: 108,\r\n      lat: 14,\r\n    };\r\n\r\n    let zoom = 6;\r\n\r\n    if (provinces.length > 0) {\r\n      const posList = provinces.map((province) => province.location);\r\n      center = calculateCenter(posList);\r\n      zoom = calculateZoom(posList);\r\n    }\r\n\r\n    // Không sửa\r\n    map = new mapboxgl.Map({\r\n      style: \"mapbox://styles/dhiep2307/cm44mghvy011l01sd5cci6k20\", // stylesheet location\r\n      container: \"map\", // container ID\r\n      center: [center.lng, center.lat], // starting position [lng, lat]. Note that lat must be set between -90 and 90\r\n      zoom: zoom, // starting zoom\r\n    });\r\n\r\n    marker = new mapboxgl.Marker();\r\n\r\n    // Thêm marker\r\n    if (locations.length > 0) {\r\n      // new mapboxgl.Marker({ color: \"red\" })\r\n      //   .setLngLat([106.348231, 9.9229538]) // Vị trí\r\n      //   .addTo(map); // Thêm vào bản đồ\r\n      locations.map((location) => {\r\n        const marker2 = new mapboxgl.Marker()\r\n          .setLngLat([location.lng, location.lat]) // Vị trí\r\n          .addTo(map); // Thêm vào bản đồ\r\n\r\n        const popup = new mapboxgl.Popup({\r\n          offset: 25,\r\n          closeOnClick: true,\r\n          closeButton: true,\r\n        }).setHTML(\r\n          `<p style=\"font-size: 20px; font-weight: bold\">${location?.description}</p>\r\n            <a style=\"font-size: 16px; display: block; border: 1px solid #000; padding-left: 8px; padding-top: 5px; padding-bottom: 5px; border-radius: 5px; background-color: green; font-weight: bold; color: white\" href=\"tel://${location?.phone}\"> Gọi: ${location?.phone}</a>\r\n            `\r\n        );\r\n\r\n        marker2.setPopup(popup);\r\n      });\r\n    }\r\n\r\n    // Tạo map\r\n    map.on(\"load\", function () {\r\n      map.addSource(\"diaphanhuyen-4apinm\", {\r\n        type: \"vector\",\r\n        url: \"mapbox://dhiep2307.0va1jnhw\",\r\n      });\r\n\r\n      if (provinces.length > 0) {\r\n        map.addLayer({\r\n          id: \"loc-tinh\",\r\n          type: \"fill\",\r\n          source: \"diaphanhuyen-4apinm\",\r\n          \"source-layer\": \"diaphanhuyen-4apinm\",\r\n          layout: {},\r\n          paint: {\r\n            \"fill-color\": \"#ff6666\",\r\n            \"fill-opacity\": 0.2,\r\n          },\r\n          filter: [\"in\", \"Ten_Tinh\", ...provinceNames],\r\n        });\r\n\r\n        provinces.forEach((e) => {\r\n          map.addLayer({\r\n            id: \"text-layer-tinh-\" + e.name,\r\n            type: \"symbol\",\r\n            source: {\r\n              type: \"geojson\",\r\n              data: {\r\n                type: \"FeatureCollection\",\r\n                features: [\r\n                  {\r\n                    type: \"Feature\",\r\n                    geometry: {\r\n                      type: \"Point\",\r\n                      coordinates: [e.location.lng, e.location.lat],\r\n                    },\r\n                    properties: {\r\n                      title: `${e.name}`, // Văn bản sẽ hiển thị\r\n                    },\r\n                  },\r\n                ],\r\n              },\r\n            },\r\n            layout: {\r\n              \"text-field\": [\"get\", \"title\"], // Lấy giá trị từ thuộc tính 'title' để hiển thị\r\n              \"text-size\": [\r\n                \"interpolate\", // Biểu thức interpolate giúp thay đổi kích thước theo zoom\r\n                [\"linear\"], // Mức độ thay đổi là tuyến tính\r\n                [\"zoom\"], // Sử dụng zoom level để điều chỉnh\r\n                5,\r\n                9, // Zoom level 5: 10px (kích thước chữ nhỏ)\r\n                15,\r\n                30, // Zoom level 15: 30px (kích thước chữ lớn)\r\n              ], // Kích thước chữ\r\n              \"text-anchor\": \"center\", // Căn chỉnh chữ theo giữa điểm\r\n              \"text-offset\": [0, 0], // Định vị trí chữ (tùy chọn)\r\n            },\r\n            paint: {\r\n              \"text-color\": \"#186bf0\", // Màu chữ\r\n              \"text-halo-color\": \"#FFFFFF\", // Màu viền chữ\r\n              \"text-halo-width\": 2, // Độ rộng viền chữ\r\n            },\r\n          });\r\n        });\r\n      }\r\n\r\n      // Thêm marker\r\n      // if (locations.length > 0) {\r\n      //   locations.map((location) => {\r\n      //     const marker2 = new mapboxgl.Marker({ color: \"red\" })\r\n      //       .setLngLat([106.348231, 9.9229538]) // Vị trí\r\n      //       .addTo(map); // Thêm vào bản đồ\r\n      //   });\r\n      // }\r\n\r\n      // // Add zoom and rotation controls to the map.\r\n      map.addControl(new mapboxgl.NavigationControl());\r\n      map.addControl(new mapboxgl.FullscreenControl());\r\n\r\n      // Không sửa\r\n      //Thêm layer HS, TS\r\n\r\n      map.addLayer({\r\n        id: \"text-layer-truong-sa\",\r\n        type: \"symbol\",\r\n        source: {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [\r\n              {\r\n                type: \"Feature\",\r\n                geometry: {\r\n                  type: \"Point\",\r\n                  coordinates: [113.81768, 9.46653],\r\n                },\r\n                properties: {\r\n                  title: \"Quần đảo Trường Sa (Việt Nam)\",\r\n                },\r\n              },\r\n            ],\r\n          },\r\n        },\r\n        layout: {\r\n          \"text-field\": [\"get\", \"title\"], // Lấy giá trị từ thuộc tính 'title' để hiển thị\r\n          \"text-size\": [\r\n            \"interpolate\", // Biểu thức interpolate giúp thay đổi kích thước theo zoom\r\n            [\"linear\"], // Mức độ thay đổi là tuyến tính\r\n            [\"zoom\"], // Sử dụng zoom level để điều chỉnh\r\n            5,\r\n            9, // Zoom level 5: 10px (kích thước chữ nhỏ)\r\n            15,\r\n            30, // Zoom level 15: 30px (kích thước chữ lớn)\r\n          ], // Kích thước chữ\r\n          \"text-anchor\": \"center\", // Căn chỉnh chữ theo giữa điểm\r\n          \"text-offset\": [0, 0], // Định vị trí chữ (tùy chọn)\r\n        },\r\n        paint: {\r\n          \"text-color\": \"#186bf0\", // Màu chữ\r\n          \"text-halo-color\": \"#FFFFFF\", // Màu viền chữ\r\n          \"text-halo-width\": 2, // Độ rộng viền chữ\r\n        },\r\n      });\r\n\r\n      map.addLayer({\r\n        id: \"text-layer-hoang-sa\",\r\n        type: \"symbol\",\r\n        source: {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [\r\n              {\r\n                type: \"Feature\",\r\n                geometry: {\r\n                  type: \"Point\",\r\n                  coordinates: [111.90739, 16.50884],\r\n                },\r\n                properties: {\r\n                  title: \"Quần đảo Hoàng Sa (Việt Nam)\", // Văn bản sẽ hiển thị\r\n                },\r\n              },\r\n            ],\r\n          },\r\n        },\r\n        layout: {\r\n          \"text-field\": [\"get\", \"title\"], // Lấy giá trị từ thuộc tính 'title' để hiển thị\r\n          \"text-size\": [\r\n            \"interpolate\", // Biểu thức interpolate giúp thay đổi kích thước theo zoom\r\n            [\"linear\"], // Mức độ thay đổi là tuyến tính\r\n            [\"zoom\"], // Sử dụng zoom level để điều chỉnh\r\n            5,\r\n            9, // Zoom level 5: 10px (kích thước chữ nhỏ)\r\n            15,\r\n            30, // Zoom level 15: 30px (kích thước chữ lớn)\r\n          ], // Kích thước chữ\r\n          \"text-anchor\": \"center\", // Căn chỉnh chữ theo giữa điểm\r\n          \"text-offset\": [0, 0], // Định vị trí chữ (tùy chọn)\r\n        },\r\n        paint: {\r\n          \"text-color\": \"#186bf0\", // Màu chữ\r\n          \"text-halo-color\": \"#FFFFFF\", // Màu viền chữ\r\n          \"text-halo-width\": 2, // Độ rộng viền chữ\r\n        },\r\n      });\r\n\r\n      map.addLayer({\r\n        id: \"text-layer-bien-dong\",\r\n        type: \"symbol\",\r\n        source: {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"FeatureCollection\",\r\n            features: [\r\n              {\r\n                type: \"Feature\",\r\n                geometry: {\r\n                  type: \"Point\",\r\n                  coordinates: [113.23996, 13.84156],\r\n                },\r\n                properties: {\r\n                  title: \"Biển Đông\", // Văn bản sẽ hiển thị\r\n                },\r\n              },\r\n            ],\r\n          },\r\n        },\r\n        layout: {\r\n          \"text-field\": [\"get\", \"title\"], // Lấy giá trị từ thuộc tính 'title' để hiển thị\r\n          \"text-size\": [\r\n            \"interpolate\", // Biểu thức interpolate giúp thay đổi kích thước theo zoom\r\n            [\"linear\"], // Mức độ thay đổi là tuyến tính\r\n            [\"zoom\"], // Sử dụng zoom level để điều chỉnh\r\n            14,\r\n            16, // Zoom level 5: 10px (kích thước chữ nhỏ)\r\n            18,\r\n            30, // Zoom level 15: 30px (kích thước chữ lớn)\r\n          ], // Kích thước chữ\r\n          \"text-anchor\": \"center\", // Căn chỉnh chữ theo giữa điểm\r\n          \"text-offset\": [0, 0], // Định vị trí chữ (tùy chọn)\r\n        },\r\n        paint: {\r\n          \"text-color\": \"#186bf0\", // Màu chữ\r\n          \"text-halo-color\": \"#FFFFFF\", // Màu viền chữ\r\n          \"text-halo-width\": 2, // Độ rộng viền chữ\r\n        },\r\n      });\r\n    });\r\n  }\r\n\r\n  createMapbox();\r\n</script>\r\n","runJs":true,"styleCss":"width: 100%;\r\nheight: 100%;"},"ports":[],"children":[]}]}],"connections":[],"ports":[],"roots":["238feaea-8f84-c867-d778-e372d1c95183"]},{"name":"/#Logic/GetRequestDetail","nodes":[{"id":"471c7873-2adc-508a-ed73-c479c5c792fc","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"6ecdb6d1-fe39-e142-7b92-4af2e98549bc","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"4ee4668f-723c-fdce-99d7-d53cbbc66f66","type":"REST2","parameters":{"responseScript":"// Add custom code to convert the response content to outputs\n//\n//*Response.status    The status code of the response\n//*Response.content   The content of the response as a javascript\n//                    object.\n//*Response.request   The request object that resulted in the response.\n//\n//*Inputs and *Outputs contain the inputs and outputs of the node.\n\nconst DATA = Response.content;\n\nif(!DATA) return;\n\nOutputs.DATA = Response.content?.data\nOutputs.Results = Response.DATA;","resource":"","requestScript":"//Add custom code to setup the request object before the request\n//is made.\n//\n//*Request.resource     contains the resource path of the request.\n//*Request.method       contains the method, GET, POST, PUT or DELETE.\n//*Request.headers      is a map where you can add additional headers.\n//*Request.parameters   is a map the parameters that will be appended\n//                      to the url.\n//*Request.content      contains the content of the request as a javascript\n//                      object.\n//\nconst tokenInfo = Inputs.token\n\nRequest.headers = {\n    Authorization: `Bearer ${tokenInfo}`,\n}"},"ports":[],"children":[]},{"id":"c49a17ba-a0b2-c792-510e-1ffb8dd9ee79","type":"/#Logic/CurrentUser","parameters":{},"ports":[],"children":[]},{"id":"7fbfb477-e6ac-f248-36c5-f2bccf2766ed","type":"Expression","parameters":{"expression":"baseApi + '/sos-requests/' + id + '?populate=*'"},"ports":[],"children":[]},{"id":"91beb41f-abde-d4a9-8cb0-95bd92315c7a","type":"/#Logic/Environment","parameters":{},"ports":[],"children":[]},{"id":"9ad9bc7d-5c90-90e4-d829-6c128ef19a52","type":"/Components/LoadingSpinner","parameters":{},"ports":[],"children":[]},{"id":"2e420a40-477f-bd02-90d1-5b73fe0f1968","type":"Condition","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"c49a17ba-a0b2-c792-510e-1ffb8dd9ee79","sourcePort":"token","targetId":"4ee4668f-723c-fdce-99d7-d53cbbc66f66","targetPort":"in-token"},{"sourceId":"471c7873-2adc-508a-ed73-c479c5c792fc","sourcePort":"id","targetId":"7fbfb477-e6ac-f248-36c5-f2bccf2766ed","targetPort":"id"},{"sourceId":"7fbfb477-e6ac-f248-36c5-f2bccf2766ed","sourcePort":"result","targetId":"4ee4668f-723c-fdce-99d7-d53cbbc66f66","targetPort":"resource"},{"sourceId":"4ee4668f-723c-fdce-99d7-d53cbbc66f66","sourcePort":"out-DATA","targetId":"6ecdb6d1-fe39-e142-7b92-4af2e98549bc","targetPort":"data"},{"sourceId":"4ee4668f-723c-fdce-99d7-d53cbbc66f66","sourcePort":"success","targetId":"6ecdb6d1-fe39-e142-7b92-4af2e98549bc","targetPort":"Success"},{"sourceId":"4ee4668f-723c-fdce-99d7-d53cbbc66f66","sourcePort":"failure","targetId":"6ecdb6d1-fe39-e142-7b92-4af2e98549bc","targetPort":"Failure"},{"sourceId":"471c7873-2adc-508a-ed73-c479c5c792fc","sourcePort":"Do","targetId":"4ee4668f-723c-fdce-99d7-d53cbbc66f66","targetPort":"fetch"},{"sourceId":"91beb41f-abde-d4a9-8cb0-95bd92315c7a","sourcePort":"API_URL","targetId":"7fbfb477-e6ac-f248-36c5-f2bccf2766ed","targetPort":"baseApi"},{"sourceId":"471c7873-2adc-508a-ed73-c479c5c792fc","sourcePort":"Do","targetId":"9ad9bc7d-5c90-90e4-d829-6c128ef19a52","targetPort":"Show"},{"sourceId":"4ee4668f-723c-fdce-99d7-d53cbbc66f66","sourcePort":"success","targetId":"9ad9bc7d-5c90-90e4-d829-6c128ef19a52","targetPort":"Hide"},{"sourceId":"4ee4668f-723c-fdce-99d7-d53cbbc66f66","sourcePort":"failure","targetId":"9ad9bc7d-5c90-90e4-d829-6c128ef19a52","targetPort":"Hide"},{"sourceId":"471c7873-2adc-508a-ed73-c479c5c792fc","sourcePort":"Do","targetId":"2e420a40-477f-bd02-90d1-5b73fe0f1968","targetPort":"condition"},{"sourceId":"c49a17ba-a0b2-c792-510e-1ffb8dd9ee79","sourcePort":"token","targetId":"2e420a40-477f-bd02-90d1-5b73fe0f1968","targetPort":"condition"},{"sourceId":"2e420a40-477f-bd02-90d1-5b73fe0f1968","sourcePort":"ontrue","targetId":"4ee4668f-723c-fdce-99d7-d53cbbc66f66","targetPort":"fetch"}],"ports":[{"name":"Success","type":"signal","plug":"output","index":0},{"name":"Do","type":{"name":"boolean","allowConnectionsOnly":true},"plug":"input","index":0},{"name":"Failure","type":"signal","plug":"output","index":1},{"name":"id","type":{"name":"*","editAsType":"string"},"group":"Parameters","plug":"input","index":1},{"name":"data","type":"*","plug":"output","index":2}],"roots":[]}]